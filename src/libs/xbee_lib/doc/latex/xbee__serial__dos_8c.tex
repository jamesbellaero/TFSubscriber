\hypertarget{xbee__serial__dos_8c}{}\section{src/dos/xbee\+\_\+serial\+\_\+dos.c File Reference}
\label{xbee__serial__dos_8c}\index{src/dos/xbee\+\_\+serial\+\_\+dos.\+c@{src/dos/xbee\+\_\+serial\+\_\+dos.\+c}}


Serial Interface for X\+Bee Module (D\+OS Platform)  


{\ttfamily \#include $<$errno.\+h$>$}\newline
{\ttfamily \#include $<$limits.\+h$>$}\newline
{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include \char`\"{}xbee/serial.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}xbee/cbuf.\+h\char`\"{}}\newline
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define {\bfseries U\+A\+R\+T\+\_\+\+R\+BR}~0
\item 
\#define {\bfseries U\+A\+R\+T\+\_\+\+T\+HR}~0
\item 
\#define {\bfseries U\+A\+R\+T\+\_\+\+D\+LL}~0
\item 
\#define {\bfseries U\+A\+R\+T\+\_\+\+I\+ER}~1
\item 
\#define {\bfseries U\+A\+R\+T\+\_\+\+D\+LM}~1
\item 
\#define {\bfseries U\+A\+R\+T\+\_\+\+I\+IR}~2
\item 
\#define {\bfseries U\+A\+R\+T\+\_\+\+F\+CR}~2
\item 
\#define {\bfseries U\+A\+R\+T\+\_\+\+L\+CR}~3
\item 
\#define {\bfseries U\+A\+R\+T\+\_\+\+M\+CR}~4
\item 
\#define {\bfseries U\+A\+R\+T\+\_\+\+L\+SR}~5
\item 
\#define {\bfseries U\+A\+R\+T\+\_\+\+M\+SR}~6
\item 
\#define {\bfseries U\+A\+R\+T\+\_\+\+S\+CR}~7
\item 
\#define {\bfseries I\+E\+R\+\_\+\+N\+O\+NE}~0
\item 
\#define {\bfseries I\+E\+R\+\_\+\+R\+X\+\_\+\+D\+A\+TA}~(1$<$$<$0)
\item 
\#define {\bfseries I\+E\+R\+\_\+\+T\+X\+\_\+\+E\+M\+P\+TY}~(1$<$$<$1)
\item 
\#define {\bfseries I\+E\+R\+\_\+\+L\+S\+R\+\_\+\+C\+H\+A\+N\+GE}~(1$<$$<$2)
\item 
\#define {\bfseries I\+E\+R\+\_\+\+M\+S\+R\+\_\+\+C\+H\+A\+N\+GE}~(1$<$$<$3)
\item 
\#define {\bfseries I\+E\+R\+\_\+\+D\+E\+F\+A\+U\+LT}~(I\+E\+R\+\_\+\+R\+X\+\_\+\+D\+A\+TA $\vert$ I\+E\+R\+\_\+\+T\+X\+\_\+\+E\+M\+P\+TY $\vert$ I\+E\+R\+\_\+\+L\+S\+R\+\_\+\+C\+H\+A\+N\+GE)
\item 
\#define {\bfseries F\+C\+R\+\_\+\+D\+I\+S\+A\+B\+L\+E\+\_\+\+F\+I\+F\+OS}~(0$<$$<$0)
\item 
\#define {\bfseries F\+C\+R\+\_\+\+E\+N\+A\+B\+L\+E\+\_\+\+F\+I\+F\+OS}~(1$<$$<$0)
\item 
\#define {\bfseries F\+C\+R\+\_\+\+C\+L\+E\+A\+R\+\_\+\+R\+X\+\_\+\+F\+I\+FO}~(1$<$$<$1)
\item 
\#define {\bfseries F\+C\+R\+\_\+\+C\+L\+E\+A\+R\+\_\+\+T\+X\+\_\+\+F\+I\+FO}~(1$<$$<$2)
\item 
\#define {\bfseries F\+C\+R\+\_\+\+D\+M\+A\+\_\+\+M\+O\+D\+E\+\_\+0}~(0$<$$<$3)
\item 
\#define {\bfseries F\+C\+R\+\_\+\+D\+M\+A\+\_\+\+M\+O\+D\+E\+\_\+1}~(1$<$$<$3)
\item 
\#define {\bfseries F\+C\+R\+\_\+\+E\+N\+A\+B\+L\+E\+\_\+64\+B\+Y\+TE}~(1$<$$<$5)
\item 
\#define {\bfseries F\+C\+R\+\_\+\+I\+N\+T\+\_\+\+T\+R\+I\+G\+G\+E\+R\+\_\+1\+B\+Y\+TE}~(0$<$$<$6)
\item 
\#define {\bfseries F\+C\+R\+\_\+\+I\+N\+T\+\_\+\+T\+R\+I\+G\+G\+E\+R\+\_\+4\+B\+Y\+TE}~(1$<$$<$6)
\item 
\#define {\bfseries F\+C\+R\+\_\+\+I\+N\+T\+\_\+\+T\+R\+I\+G\+G\+E\+R\+\_\+8\+B\+Y\+TE}~(2$<$$<$6)
\item 
\#define {\bfseries F\+C\+R\+\_\+\+I\+N\+T\+\_\+\+T\+R\+I\+G\+G\+E\+R\+\_\+14\+B\+Y\+TE}~(3$<$$<$6)
\item 
\#define {\bfseries F\+C\+R\+\_\+\+D\+E\+F\+A\+U\+LT}~(F\+C\+R\+\_\+\+E\+N\+A\+B\+L\+E\+\_\+\+F\+I\+F\+OS $\vert$ F\+C\+R\+\_\+\+D\+M\+A\+\_\+\+M\+O\+D\+E\+\_\+0)
\item 
\#define {\bfseries L\+C\+R\+\_\+5\+B\+IT}~(0$<$$<$0)
\item 
\#define {\bfseries L\+C\+R\+\_\+6\+B\+IT}~(1$<$$<$0)
\item 
\#define {\bfseries L\+C\+R\+\_\+7\+B\+IT}~(2$<$$<$0)
\item 
\#define {\bfseries L\+C\+R\+\_\+8\+B\+IT}~(3$<$$<$0)
\item 
\#define {\bfseries L\+C\+R\+\_\+1\+S\+T\+OP}~(0$<$$<$2)
\item 
\#define {\bfseries L\+C\+R\+\_\+2\+S\+T\+OP}~(1$<$$<$2)
\item 
\#define {\bfseries L\+C\+R\+\_\+\+P\+A\+R\+I\+T\+Y\+\_\+\+N\+O\+NE}~(0$<$$<$3)
\item 
\#define {\bfseries L\+C\+R\+\_\+\+P\+A\+R\+I\+T\+Y\+\_\+\+O\+DD}~(1$<$$<$3)
\item 
\#define {\bfseries L\+C\+R\+\_\+\+P\+A\+R\+I\+T\+Y\+\_\+\+E\+V\+EN}~(3$<$$<$3)
\item 
\#define {\bfseries L\+C\+R\+\_\+\+P\+A\+R\+I\+T\+Y\+\_\+\+M\+A\+RK}~(5$<$$<$3)
\item 
\#define {\bfseries L\+C\+R\+\_\+\+P\+A\+R\+I\+T\+Y\+\_\+\+S\+P\+A\+CE}~(7$<$$<$3)
\item 
\#define {\bfseries L\+C\+R\+\_\+\+B\+R\+E\+A\+K\+\_\+\+E\+N\+A\+B\+LE}~(1$<$$<$6)
\item 
\#define {\bfseries L\+C\+R\+\_\+\+D\+I\+V\+I\+S\+O\+R\+\_\+\+L\+A\+T\+CH}~(1$<$$<$7)
\item 
\#define {\bfseries L\+C\+R\+\_\+\+D\+E\+F\+A\+U\+LT}~(L\+C\+R\+\_\+8\+B\+IT $\vert$ L\+C\+R\+\_\+1\+S\+T\+OP $\vert$ L\+C\+R\+\_\+\+P\+A\+R\+I\+T\+Y\+\_\+\+N\+O\+NE)
\item 
\#define {\bfseries M\+C\+R\+\_\+\+N\+O\+NE}~0
\item 
\#define {\bfseries M\+C\+R\+\_\+\+D\+TR}~(1$<$$<$0)
\item 
\#define {\bfseries M\+C\+R\+\_\+\+R\+TS}~(1$<$$<$1)
\item 
\#define {\bfseries M\+C\+R\+\_\+\+O\+U\+T1}~(1$<$$<$2)
\item 
\#define {\bfseries M\+C\+R\+\_\+\+O\+U\+T2}~(1$<$$<$3)
\item 
\#define {\bfseries M\+C\+R\+\_\+\+L\+O\+O\+P\+B\+A\+CK}~(1$<$$<$4)
\item 
\#define {\bfseries M\+C\+R\+\_\+\+A\+U\+T\+O\+F\+L\+OW}~(1$<$$<$5)
\item 
\#define {\bfseries M\+C\+R\+\_\+\+D\+E\+F\+A\+U\+LT}~(M\+C\+R\+\_\+\+D\+TR $\vert$ M\+C\+R\+\_\+\+R\+TS $\vert$ M\+C\+R\+\_\+\+O\+U\+T2)
\item 
\#define {\bfseries M\+S\+R\+\_\+\+C\+T\+S\+\_\+\+C\+H\+A\+N\+G\+ED}~(1$<$$<$0)
\item 
\#define {\bfseries M\+S\+R\+\_\+\+D\+S\+R\+\_\+\+C\+H\+A\+N\+G\+ED}~(1$<$$<$1)
\item 
\#define {\bfseries M\+S\+R\+\_\+\+R\+I\+\_\+\+E\+D\+GE}~(1$<$$<$2)
\item 
\#define {\bfseries M\+S\+R\+\_\+\+C\+D\+\_\+\+C\+H\+A\+N\+G\+ED}~(1$<$$<$3)
\item 
\#define {\bfseries M\+S\+R\+\_\+\+C\+TS}~(1$<$$<$4)
\item 
\#define {\bfseries M\+S\+R\+\_\+\+D\+SR}~(1$<$$<$5)
\item 
\#define {\bfseries M\+S\+R\+\_\+\+RI}~(1$<$$<$6)
\item 
\#define {\bfseries M\+S\+R\+\_\+\+CD}~(1$<$$<$7)
\item 
\#define {\bfseries X\+B\+E\+E\+\_\+\+S\+E\+R\+\_\+\+C\+H\+E\+CK}(ptr)
\item 
\#define {\bfseries C\+B\+U\+F\+\_\+\+S\+I\+ZE}~255
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \+\_\+\+\_\+interrupt \+\_\+\+\_\+far {\bfseries xbee\+\_\+ser\+\_\+isr} ()
\item 
int \hyperlink{group__hal__dos_ga3c79f6b72b6cfc3cc5c4524450f661b9}{xbee\+\_\+ser\+\_\+invalid} (\hyperlink{structxbee__serial__t}{xbee\+\_\+serial\+\_\+t} $\ast$serial)
\begin{DoxyCompactList}\small\item\em Helper function used by other xbee\+\_\+serial functions to validate the {\itshape serial} parameter. \end{DoxyCompactList}\item 
const char $\ast$ \hyperlink{group__hal__dos_ga898057d1b7645785e7f3d6256828d039}{xbee\+\_\+ser\+\_\+portname} (\hyperlink{structxbee__serial__t}{xbee\+\_\+serial\+\_\+t} $\ast$serial)
\begin{DoxyCompactList}\small\item\em Returns a human-\/readable string describing the serial port. \end{DoxyCompactList}\item 
int \hyperlink{group__hal__dos_ga2ca4e60c9d642084afa52dff9e1f6be4}{xbee\+\_\+ser\+\_\+write} (\hyperlink{structxbee__serial__t}{xbee\+\_\+serial\+\_\+t} $\ast$serial, const void \hyperlink{group__hal_gaef060b3456fdcc093a7210a762d5f2ed}{F\+AR} $\ast$buffer, int \hyperlink{group__zdo_gab2b3adeb2a67e656ff030b56727fd0ac}{length})
\begin{DoxyCompactList}\small\item\em Transmits {\itshape length} bytes from {\itshape buffer} to the X\+Bee serial port {\itshape serial}. \end{DoxyCompactList}\item 
int \hyperlink{group__hal__dos_ga8263312373c03a79a718142e051b3342}{xbee\+\_\+ser\+\_\+read} (\hyperlink{structxbee__serial__t}{xbee\+\_\+serial\+\_\+t} $\ast$serial, void \hyperlink{group__hal_gaef060b3456fdcc093a7210a762d5f2ed}{F\+AR} $\ast$buffer, int bufsize)
\begin{DoxyCompactList}\small\item\em Reads up to {\itshape bufsize} bytes from X\+Bee serial port {\itshape serial} and into {\itshape buffer}. \end{DoxyCompactList}\item 
int \hyperlink{group__hal__dos_ga86fea2345efb8bf9424228f0979b1849}{xbee\+\_\+ser\+\_\+putchar} (\hyperlink{structxbee__serial__t}{xbee\+\_\+serial\+\_\+t} $\ast$serial, \hyperlink{group__hal__dos_gae1affc9ca37cfb624959c866a73f83c2}{uint8\+\_\+t} ch)
\begin{DoxyCompactList}\small\item\em Transmits a single character, {\itshape ch}, to the X\+Bee serial port {\itshape serial}. \end{DoxyCompactList}\item 
int \hyperlink{group__hal__dos_gaeeb38154313a44f86146cdcfe08e7d08}{xbee\+\_\+ser\+\_\+getchar} (\hyperlink{structxbee__serial__t}{xbee\+\_\+serial\+\_\+t} $\ast$serial)
\begin{DoxyCompactList}\small\item\em Reads a single character from the X\+Bee serial port {\itshape serial}. \end{DoxyCompactList}\item 
int \hyperlink{group__hal__dos_ga3ad8f378b572d6fec982f1086bd3b94f}{xbee\+\_\+ser\+\_\+tx\+\_\+free} (\hyperlink{structxbee__serial__t}{xbee\+\_\+serial\+\_\+t} $\ast$serial)
\begin{DoxyCompactList}\small\item\em Returns the number of bytes of unused space in the serial transmit buffer for X\+Bee serial port {\itshape serial}. \end{DoxyCompactList}\item 
int \hyperlink{group__hal__dos_gaabf70934d186354cde4ac14ed27d1bd2}{xbee\+\_\+ser\+\_\+tx\+\_\+used} (\hyperlink{structxbee__serial__t}{xbee\+\_\+serial\+\_\+t} $\ast$serial)
\begin{DoxyCompactList}\small\item\em Returns the number of queued bytes in the serial transmit buffer for X\+Bee serial port {\itshape serial}. \end{DoxyCompactList}\item 
int \hyperlink{group__hal__dos_ga05308d37301d27715f1e1308b7189220}{xbee\+\_\+ser\+\_\+tx\+\_\+flush} (\hyperlink{structxbee__serial__t}{xbee\+\_\+serial\+\_\+t} $\ast$serial)
\begin{DoxyCompactList}\small\item\em Flushes (i.\+e., deletes and does not transmit) characters in the serial transmit buffer for X\+Bee serial port {\itshape serial}. \end{DoxyCompactList}\item 
int \hyperlink{group__hal__dos_ga16fb431a1e66861439518e562431821f}{xbee\+\_\+ser\+\_\+rx\+\_\+free} (\hyperlink{structxbee__serial__t}{xbee\+\_\+serial\+\_\+t} $\ast$serial)
\begin{DoxyCompactList}\small\item\em Returns the number of bytes of unused space in the serial receive buffer for X\+Bee serial port {\itshape serial}. \end{DoxyCompactList}\item 
int \hyperlink{group__hal__dos_ga43b8322771cc16b4130fa5330ad2242b}{xbee\+\_\+ser\+\_\+rx\+\_\+used} (\hyperlink{structxbee__serial__t}{xbee\+\_\+serial\+\_\+t} $\ast$serial)
\begin{DoxyCompactList}\small\item\em Returns the number of queued bytes in the serial receive buffer for X\+Bee serial port {\itshape serial}. \end{DoxyCompactList}\item 
int \hyperlink{group__hal__dos_ga98a6d5ceb5e1445e8ef82ccaa65a8c15}{xbee\+\_\+ser\+\_\+rx\+\_\+flush} (\hyperlink{structxbee__serial__t}{xbee\+\_\+serial\+\_\+t} $\ast$serial)
\begin{DoxyCompactList}\small\item\em Deletes all characters in the serial receive buffer for X\+Bee serial port {\itshape serial}. \end{DoxyCompactList}\item 
int \hyperlink{group__hal__dos_gab3c12543a07e0669b672c5cab54b0926}{xbee\+\_\+ser\+\_\+baudrate} (\hyperlink{structxbee__serial__t}{xbee\+\_\+serial\+\_\+t} $\ast$serial, \hyperlink{group__hal__dos_ga09a1e304d66d35dd47daffee9731edaa}{uint32\+\_\+t} baudrate)
\begin{DoxyCompactList}\small\item\em Change the baud rate of X\+Bee serial port {\itshape serial} to {\itshape baudrate} bits/second. \end{DoxyCompactList}\item 
int \hyperlink{group__hal__dos_gaa615a221dd69c17ee2989c281f2bf04a}{xbee\+\_\+ser\+\_\+open} (\hyperlink{structxbee__serial__t}{xbee\+\_\+serial\+\_\+t} $\ast$serial, \hyperlink{group__hal__dos_ga09a1e304d66d35dd47daffee9731edaa}{uint32\+\_\+t} baudrate)
\begin{DoxyCompactList}\small\item\em Opens the serial port connected to X\+Bee serial port {\itshape serial} at {\itshape baudrate} bits/second. \end{DoxyCompactList}\item 
int \hyperlink{group__hal__dos_ga48b9d743a446074ea6abacd0de24044d}{xbee\+\_\+ser\+\_\+close} (\hyperlink{structxbee__serial__t}{xbee\+\_\+serial\+\_\+t} $\ast$serial)
\begin{DoxyCompactList}\small\item\em Close the serial port attached to X\+Bee serial port {\itshape serial}. \end{DoxyCompactList}\item 
int \hyperlink{group__hal__dos_ga6ae89792415a7ac8b45b56188eb9eeb4}{xbee\+\_\+ser\+\_\+break} (\hyperlink{structxbee__serial__t}{xbee\+\_\+serial\+\_\+t} $\ast$serial, int enabled)
\begin{DoxyCompactList}\small\item\em Disable the serial transmit pin and pull it low to send a break to the X\+Bee serial port. \end{DoxyCompactList}\item 
int \hyperlink{group__hal__dos_ga1f5f72ffdfbfb45ac523640db32296ff}{xbee\+\_\+ser\+\_\+flowcontrol} (\hyperlink{structxbee__serial__t}{xbee\+\_\+serial\+\_\+t} $\ast$serial, int enabled)
\begin{DoxyCompactList}\small\item\em Enable or disable hardware flow control (C\+T\+S/\+R\+TS) on the serial port for X\+Bee serial port {\itshape serial}. \end{DoxyCompactList}\item 
int \hyperlink{group__hal__dos_ga731188d8cf41d3d749bc84d51b672535}{xbee\+\_\+ser\+\_\+set\+\_\+rts} (\hyperlink{structxbee__serial__t}{xbee\+\_\+serial\+\_\+t} $\ast$serial, int asserted)
\begin{DoxyCompactList}\small\item\em Disable hardware flow control and manually set the R\+TS (ready to send) pin on the X\+Bee device\textquotesingle{}s serial port. \end{DoxyCompactList}\item 
int \hyperlink{group__hal__dos_ga894f6fadc890b5ba5ce32338f0acd217}{xbee\+\_\+ser\+\_\+get\+\_\+cts} (\hyperlink{structxbee__serial__t}{xbee\+\_\+serial\+\_\+t} $\ast$serial)
\begin{DoxyCompactList}\small\item\em Read the status of the /\+C\+TS (clear to send) pin on the serial port connected to X\+Bee serial port {\itshape serial}. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Serial Interface for X\+Bee Module (D\+OS Platform) 

Warning\+: This module is incomplete. It only supports C\+O\+M1. 