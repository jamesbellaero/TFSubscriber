<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.13">
  <compounddef id="xbee__atcmd_8c" kind="file" language="C++">
    <compoundname>xbee_atcmd.c</compoundname>
    <includes local="no">errno.h</includes>
    <includes local="no">stddef.h</includes>
    <includes local="no">stdio.h</includes>
    <includes local="no">string.h</includes>
    <includes local="no">time.h</includes>
    <includes refid="platform_8h" local="yes">xbee/platform.h</includes>
    <includes refid="byteorder_8h" local="yes">xbee/byteorder.h</includes>
    <includes refid="atcmd_8h" local="yes">xbee/atcmd.h</includes>
    <incdepgraph>
      <node id="1303">
        <label>xbee/device.h</label>
        <link refid="device_8h"/>
        <childnode refid="1298" relation="include">
        </childnode>
        <childnode refid="1304" relation="include">
        </childnode>
        <childnode refid="1305" relation="include">
        </childnode>
        <childnode refid="1306" relation="include">
        </childnode>
      </node>
      <node id="1293">
        <label>errno.h</label>
      </node>
      <node id="1299">
        <label>xbee/jslong_glue.h</label>
        <link refid="jslong__glue_8h_source"/>
        <childnode refid="1300" relation="include">
        </childnode>
      </node>
      <node id="1294">
        <label>stddef.h</label>
      </node>
      <node id="1306">
        <label>wpan/aps.h</label>
        <link refid="aps_8h"/>
        <childnode refid="1305" relation="include">
        </childnode>
      </node>
      <node id="1301">
        <label>xbee/byteorder.h</label>
        <link refid="byteorder_8h"/>
        <childnode refid="1296" relation="include">
        </childnode>
        <childnode refid="1298" relation="include">
        </childnode>
      </node>
      <node id="1296">
        <label>string.h</label>
      </node>
      <node id="1305">
        <label>wpan/types.h</label>
        <link refid="types_8h"/>
        <childnode refid="1298" relation="include">
        </childnode>
      </node>
      <node id="1298">
        <label>xbee/platform.h</label>
        <link refid="platform_8h"/>
        <childnode refid="1293" relation="include">
        </childnode>
        <childnode refid="1294" relation="include">
        </childnode>
        <childnode refid="1299" relation="include">
        </childnode>
      </node>
      <node id="1302">
        <label>xbee/atcmd.h</label>
        <link refid="atcmd_8h"/>
        <childnode refid="1303" relation="include">
        </childnode>
      </node>
      <node id="1304">
        <label>xbee/serial.h</label>
        <link refid="serial_8h"/>
        <childnode refid="1298" relation="include">
        </childnode>
      </node>
      <node id="1297">
        <label>time.h</label>
      </node>
      <node id="1300">
        <label>xbee/jslong.h</label>
        <link refid="jslong_8h_source"/>
      </node>
      <node id="1292">
        <label>src/xbee/xbee_atcmd.c</label>
        <link refid="xbee__atcmd_8c"/>
        <childnode refid="1293" relation="include">
        </childnode>
        <childnode refid="1294" relation="include">
        </childnode>
        <childnode refid="1295" relation="include">
        </childnode>
        <childnode refid="1296" relation="include">
        </childnode>
        <childnode refid="1297" relation="include">
        </childnode>
        <childnode refid="1298" relation="include">
        </childnode>
        <childnode refid="1301" relation="include">
        </childnode>
        <childnode refid="1302" relation="include">
        </childnode>
      </node>
      <node id="1295">
        <label>stdio.h</label>
      </node>
    </incdepgraph>
      <sectiondef kind="define">
      <memberdef kind="define" id="group__xbee__atcmd_1gaa0a5c0b4df3e37c4a829f4675818fbbf" prot="public" static="no">
        <name>_xbee_atcmd_debug</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/xbee/xbee_atcmd.c" line="55" column="10" bodyfile="src/xbee/xbee_atcmd.c" bodystart="55" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__xbee__atcmd_1ga23209b601f70aa30a5a6997c9baf313e" prot="public" static="no">
        <name>XBEE_ATCMD_REG_REFRESH_IDX</name>
        <initializer>6</initializer>
        <briefdescription>
<para>Offset into _xbee_atcmd_query_regs to use when refreshing the xbee_dev_t/ <ref refid="structwpan__dev__t" kindref="compound">wpan_dev_t</ref> structure. </para>        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/xbee/xbee_atcmd.c" line="737" column="11" bodyfile="src/xbee/xbee_atcmd.c" bodystart="737" bodyend="-1"/>
        <referencedby refid="group__xbee__atcmd_1ga12317255ca84c2539b7d7a58816eccab" compoundref="xbee__atcmd_8c" startline="764" endline="808">xbee_cmd_query_device</referencedby>
      </memberdef>
      </sectiondef>
      <sectiondef kind="var">
      <memberdef kind="variable" id="group__xbee__atcmd_1ga551531248de3d539dfb15bd89cf4734b" prot="public" static="no" mutable="no">
        <type><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref> <ref refid="structxbee__cmd__request__t" kindref="compound">xbee_cmd_request_t</ref></type>
        <definition>FAR xbee_cmd_request_t xbee_cmd_request_table[XBEE_CMD_REQUEST_TABLESIZE]</definition>
        <argsstring>[XBEE_CMD_REQUEST_TABLESIZE]</argsstring>
        <name>xbee_cmd_request_table</name>
        <briefdescription>
<para>Table used to keep track of outstanding requests. </para>        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/xbee/xbee_atcmd.c" line="67" column="1" bodyfile="src/xbee/xbee_atcmd.c" bodystart="67" bodyend="-1"/>
        <referencedby refid="group__xbee__atcmd_1ga710b2223cda09c52a8518c964da88347" compoundref="xbee__atcmd_8c" startline="170" endline="187">_xbee_cmd_handle_to_address</referencedby>
      </memberdef>
      <memberdef kind="variable" id="group__xbee__atcmd_1ga0b78107b2303165b7cf9969125064dcc" prot="public" static="no" mutable="no">
        <type>const <ref refid="structxbee__atcmd__reg__t" kindref="compound">xbee_atcmd_reg_t</ref></type>
        <definition>const xbee_atcmd_reg_t _xbee_atcmd_query_regs[]</definition>
        <argsstring>[]</argsstring>
        <name>_xbee_atcmd_query_regs</name>
        <initializer>= {
	<ref refid="group__xbee__atcmd_1gaafe33c3d8ea48b42b25d1183eaf93071" kindref="member">XBEE_ATCMD_REG</ref>( &apos;H&apos;, &apos;V&apos;, <ref refid="group__xbee__atcmd_1gga1bd8ecd38c107579d20ded3c79a7d70ba0be0c682bc30049849b0c169b661c537" kindref="member">XBEE_CLT_COPY_BE</ref>, <ref refid="structxbee__dev__t" kindref="compound">xbee_dev_t</ref>, hardware_version),
	<ref refid="group__xbee__atcmd_1gaafe33c3d8ea48b42b25d1183eaf93071" kindref="member">XBEE_ATCMD_REG</ref>( &apos;V&apos;, &apos;R&apos;, <ref refid="group__xbee__atcmd_1gga1bd8ecd38c107579d20ded3c79a7d70ba0be0c682bc30049849b0c169b661c537" kindref="member">XBEE_CLT_COPY_BE</ref>, <ref refid="structxbee__dev__t" kindref="compound">xbee_dev_t</ref>, firmware_version),
	<ref refid="group__xbee__atcmd_1gaafe33c3d8ea48b42b25d1183eaf93071" kindref="member">XBEE_ATCMD_REG</ref>( &apos;S&apos;, &apos;H&apos;, <ref refid="group__xbee__atcmd_1gga1bd8ecd38c107579d20ded3c79a7d70ba5450809b1aae150ec7dfb4c8faa8161a" kindref="member">XBEE_CLT_COPY_PAD_LEFT</ref>, <ref refid="structxbee__dev__t" kindref="compound">xbee_dev_t</ref>, wpan_dev.address.ieee.l[0]),
	<ref refid="group__xbee__atcmd_1gaafe33c3d8ea48b42b25d1183eaf93071" kindref="member">XBEE_ATCMD_REG</ref>( &apos;S&apos;, &apos;L&apos;, <ref refid="group__xbee__atcmd_1gga1bd8ecd38c107579d20ded3c79a7d70ba5450809b1aae150ec7dfb4c8faa8161a" kindref="member">XBEE_CLT_COPY_PAD_LEFT</ref>, <ref refid="structxbee__dev__t" kindref="compound">xbee_dev_t</ref>, wpan_dev.address.ieee.l[1]),





	<ref refid="group__xbee__atcmd_1gabbaf60bd4d186b860fd58c8a6111e9f9" kindref="member">XBEE_ATCMD_REG_CB</ref>( &apos;E&apos;, &apos;O&apos;, _xbee_cmd_query_handle_eo, 0),
	<ref refid="group__xbee__atcmd_1gabbaf60bd4d186b860fd58c8a6111e9f9" kindref="member">XBEE_ATCMD_REG_CB</ref>( &apos;A&apos;, &apos;I&apos;, _xbee_cmd_query_handle_ai, 0),
	
	<ref refid="group__xbee__atcmd_1gaafe33c3d8ea48b42b25d1183eaf93071" kindref="member">XBEE_ATCMD_REG</ref>( &apos;N&apos;, &apos;P&apos;, <ref refid="group__xbee__atcmd_1gga1bd8ecd38c107579d20ded3c79a7d70ba0be0c682bc30049849b0c169b661c537" kindref="member">XBEE_CLT_COPY_BE</ref>, <ref refid="structxbee__dev__t" kindref="compound">xbee_dev_t</ref>, <ref refid="group__zcl_1gacb1403989580c30b5cac60f347c5d6ab" kindref="member">wpan_dev.payload</ref>),
	<ref refid="group__xbee__atcmd_1gaafe33c3d8ea48b42b25d1183eaf93071" kindref="member">XBEE_ATCMD_REG</ref>( &apos;M&apos;, &apos;Y&apos;, <ref refid="group__xbee__atcmd_1gga1bd8ecd38c107579d20ded3c79a7d70ba0be0c682bc30049849b0c169b661c537" kindref="member">XBEE_CLT_COPY_BE</ref>, <ref refid="structxbee__dev__t" kindref="compound">xbee_dev_t</ref>, wpan_dev.address.network),

}</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<internal><para>List of XBee registers to query at startup; used to learn about the attached XBee module. </para></internal>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/xbee/xbee_atcmd.c" line="710" column="1" bodyfile="src/xbee/xbee_atcmd.c" bodystart="710" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="group__xbee__atcmd_1ga6cd73a1bba0cb3c1766f7f7d5d2123ea" prot="public" static="no" mutable="no">
        <type><ref refid="structxbee__command__list__context__t" kindref="compound">xbee_command_list_context_t</ref></type>
        <definition>xbee_command_list_context_t _xbee_atcmd_query_regs_head</definition>
        <argsstring></argsstring>
        <name>_xbee_atcmd_query_regs_head</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/xbee/xbee_atcmd.c" line="729" column="1" bodyfile="src/xbee/xbee_atcmd.c" bodystart="729" bodyend="-1"/>
      </memberdef>
      </sectiondef>
      <sectiondef kind="func">
      <memberdef kind="function" id="group__xbee__atcmd_1ga7ef08f6771da8c18234bbffca2be4ff3" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int xbee_cmd_tick</definition>
        <argsstring>(void)</argsstring>
        <name>xbee_cmd_tick</name>
        <param>
          <type>void</type>
        </param>
        <briefdescription>
<para>This function should be called periodically (at least every few seconds) to expire old entries from the AT Command Request table. </para>        </briefdescription>
        <detaileddescription>
<para><simplesect kind="return"><para>&gt;0 number of requests expired </para></simplesect>
<simplesect kind="return"><para>0 none of the requests in the table expired </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/xbee/xbee_atcmd.c" line="81" column="1" bodyfile="src/xbee/xbee_atcmd.c" bodystart="81" bodyend="150"/>
        <references refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" compoundref="platform_8h" startline="370">FAR</references>
        <referencedby refid="group__xbee__atcmd_1ga83f36dfc3c3cd2c4046719ea6e9cc53c" compoundref="xbee__atcmd_8c" startline="825" endline="835">xbee_cmd_query_status</referencedby>
        <referencedby refid="group__xbee__io_1gad253478285335c84b310aafb13aa1b21" compoundref="xbee__io_8c" startline="779" endline="789">xbee_io_query_status</referencedby>
      </memberdef>
      <memberdef kind="function" id="group__xbee__atcmd_1ga710b2223cda09c52a8518c964da88347" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="structxbee__cmd__request__t" kindref="compound">xbee_cmd_request_t</ref> <ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref> *</type>
        <definition>xbee_cmd_request_t FAR * _xbee_cmd_handle_to_address</definition>
        <argsstring>(int16_t handle)</argsstring>
        <name>_xbee_cmd_handle_to_address</name>
        <param>
          <type><ref refid="group__hal__dos_1ga2140805d08462d474b82ddc8d1c2f3e6" kindref="member">int16_t</ref></type>
          <declname>handle</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<internal><para>Convert a handle (16-bit int) to a pointer into the command request table. Ensures that the handle is valid (correct index and sequence bytes).</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">handle</parametername>
</parameternamelist>
<parameterdescription>
<para>Handle returned from <ref refid="group__xbee__atcmd_1gab73aaf873be6f9e515dcd65748a7f21c" kindref="member">xbee_cmd_create()</ref>.</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>Pointer into the request table or NULL if handle is invalid.</para></simplesect>
<simplesect kind="see"><para><ref refid="group__xbee__atcmd_1gab73aaf873be6f9e515dcd65748a7f21c" kindref="member">xbee_cmd_create()</ref> </para></simplesect>
</para></internal>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/xbee/xbee_atcmd.c" line="153" column="1" bodyfile="src/xbee/xbee_atcmd.c" bodystart="170" bodyend="187"/>
        <references refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" compoundref="platform_8h" startline="370">FAR</references>
        <references refid="group__xbee__atcmd_1ga551531248de3d539dfb15bd89cf4734b" compoundref="xbee__atcmd_8c" startline="67">xbee_cmd_request_table</references>
        <references refid="group__xbee__atcmd_1gaf992e9b985e2b1eb185ef3d2d38a01c0" compoundref="atcmd_8h" startline="30">XBEE_CMD_REQUEST_TABLESIZE</references>
        <referencedby refid="group__xbee__atcmd_1ga91641619ae34da34615193962ffd1525" compoundref="xbee__atcmd_8c" startline="984" endline="989">xbee_cmd_release_handle</referencedby>
        <referencedby refid="group__xbee__atcmd_1ga2c58eedef60b41dd30ae1f6b475606a8" compoundref="xbee__atcmd_8c" startline="1404" endline="1485">xbee_cmd_send</referencedby>
        <referencedby refid="group__xbee__atcmd_1ga0a5d2e2e87743061c46abd53e379e014" compoundref="xbee__atcmd_8c" startline="1057" endline="1072">xbee_cmd_set_callback</referencedby>
        <referencedby refid="group__xbee__atcmd_1ga06181e54a87d90c30108360d6b433323" compoundref="xbee__atcmd_8c" startline="1009" endline="1022">xbee_cmd_set_command</referencedby>
        <referencedby refid="group__xbee__atcmd_1ga4295dde3673b07f41e569e333abd9730" compoundref="xbee__atcmd_8c" startline="1272" endline="1285">xbee_cmd_set_param</referencedby>
        <referencedby refid="group__xbee__atcmd_1gae478cb2ea9bb07ade86009a65e6d121f" compoundref="xbee__atcmd_8c" startline="1115" endline="1143">xbee_cmd_set_target</referencedby>
      </memberdef>
      <memberdef kind="function" id="group__xbee__atcmd_1ga4931ffe3ba31eaf16eee72ac0a95015b" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int _xbee_cmd_issue_list</definition>
        <argsstring>(xbee_dev_t *xbee, xbee_command_list_context_t FAR *clc, const xbee_cmd_response_t FAR *response)</argsstring>
        <name>_xbee_cmd_issue_list</name>
        <param>
          <type><ref refid="structxbee__dev__t" kindref="compound">xbee_dev_t</ref> *</type>
          <declname>xbee</declname>
        </param>
        <param>
          <type><ref refid="structxbee__command__list__context__t" kindref="compound">xbee_command_list_context_t</ref> <ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref> *</type>
          <declname>clc</declname>
        </param>
        <param>
          <type>const <ref refid="structxbee__cmd__response__t" kindref="compound">xbee_cmd_response_t</ref> <ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref> *</type>
          <declname>response</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<internal><para>Helper function to send off the next command in the list. </para></internal>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/xbee/xbee_atcmd.c" line="197" column="1" bodyfile="src/xbee/xbee_atcmd.c" bodystart="197" bodyend="266"/>
        <references refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" compoundref="platform_8h" startline="370">FAR</references>
      </memberdef>
      <memberdef kind="function" id="group__xbee__atcmd_1ga9f1bad1621dfd1d13b6f1102fc592d13" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int _xbee_cmd_list_callback</definition>
        <argsstring>(const xbee_cmd_response_t FAR *response)</argsstring>
        <name>_xbee_cmd_list_callback</name>
        <param>
          <type>const <ref refid="structxbee__cmd__response__t" kindref="compound">xbee_cmd_response_t</ref> <ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref> *</type>
          <declname>response</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<internal><para>Callback used by xbee_cmd_query_device (and possibly other functions) to learn about the attached XBee device (hardware/firmware version, address, etc.)</para><para>View function help for <ref refid="group__xbee__atcmd_1ga0a5d2e2e87743061c46abd53e379e014" kindref="member">xbee_cmd_set_callback()</ref> for details on <ref refid="structxbee__cmd__response__t" kindref="compound">xbee_cmd_response_t</ref> structure. <verbatim>This callback should only be called by xbee_cmd_handle_response(). ***</verbatim> </para></internal>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/xbee/xbee_atcmd.c" line="284" column="1" bodyfile="src/xbee/xbee_atcmd.c" bodystart="284" bodyend="448"/>
        <references refid="group__xbee__atcmd_1ga1a5aaa930940857f68f245eeb89506b5" compoundref="atcmd_8h" startline="246">command</references>
        <references refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" compoundref="platform_8h" startline="370">FAR</references>
      </memberdef>
      <memberdef kind="function" id="group__xbee__atcmd_1gab9fb2f15b9134bd32d937a51e4c68014" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int xbee_cmd_list_execute</definition>
        <argsstring>(xbee_dev_t *xbee, xbee_command_list_context_t FAR *clc, const xbee_atcmd_reg_t FAR *list, void FAR *base, const wpan_address_t FAR *address)</argsstring>
        <name>xbee_cmd_list_execute</name>
        <param>
          <type><ref refid="structxbee__dev__t" kindref="compound">xbee_dev_t</ref> *</type>
          <declname>xbee</declname>
        </param>
        <param>
          <type><ref refid="structxbee__command__list__context__t" kindref="compound">xbee_command_list_context_t</ref> <ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref> *</type>
          <declname>clc</declname>
        </param>
        <param>
          <type>const <ref refid="structxbee__atcmd__reg__t" kindref="compound">xbee_atcmd_reg_t</ref> <ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref> *</type>
          <declname>list</declname>
        </param>
        <param>
          <type>void <ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref> *</type>
          <declname>base</declname>
        </param>
        <param>
          <type>const <ref refid="structwpan__address__t" kindref="compound">wpan_address_t</ref> <ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref> *</type>
          <declname>address</declname>
        </param>
        <briefdescription>
<para>Execute a list of AT commands. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="inout">xbee</parametername>
</parameternamelist>
<parameterdescription>
<para>Device to execute commands </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="out">clc</parametername>
</parameternamelist>
<parameterdescription>
<para>List head to set up. This must be static since callback functions access it asynchronously. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">list</parametername>
</parameternamelist>
<parameterdescription>
<para>First entry of list of commands to execute. The list must be terminated by either <ref refid="group__xbee__atcmd_1ga22fe547f7ae9fd0b090c5e45f03c162d" kindref="member">XBEE_ATCMD_REG_END</ref> or <ref refid="group__xbee__atcmd_1gae8d6778e286e3bf82eafc842d451c161" kindref="member">XBEE_ATCMD_REG_END_CB</ref>. List entries are created using <ref refid="group__xbee__atcmd_1gaafe33c3d8ea48b42b25d1183eaf93071" kindref="member">XBEE_ATCMD_REG</ref> macros etc. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">base</parametername>
</parameternamelist>
<parameterdescription>
<para>Base address of a structure to fill in with command results or as a source of values to set. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">address</parametername>
</parameternamelist>
<parameterdescription>
<para>Remote address, or NULL if local device.</para></parameterdescription>
</parameteritem>
</parameterlist>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>0</parametername>
</parameternamelist>
<parameterdescription>
<para>started sending commands from the list </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>-ENOSPC</parametername>
</parameternamelist>
<parameterdescription>
<para>the AT command table is full (increase the compile-time macro XBEE_CMD_REQUEST_TABLESIZE) </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>-EINVAL</parametername>
</parameternamelist>
<parameterdescription>
<para>an invalid parameter was passed to the function</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="see"><para><ref refid="group__xbee__atcmd_1gafb2d1636c675066469ee388170ea27a0" kindref="member">xbee_cmd_list_status()</ref> </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/xbee/xbee_atcmd.c" line="474" column="1" bodyfile="src/xbee/xbee_atcmd.c" bodystart="474" bodyend="501"/>
      </memberdef>
      <memberdef kind="function" id="group__xbee__atcmd_1gafb2d1636c675066469ee388170ea27a0" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>enum <ref refid="group__xbee__atcmd_1ga3ec63530d743d1c91126c67493c3245d" kindref="member">xbee_command_list_status</ref>()</type>
        <definition>enum xbee_command_list_status() xbee_cmd_list_status</definition>
        <argsstring>(xbee_command_list_context_t FAR *clc)</argsstring>
        <name>xbee_cmd_list_status</name>
        <param>
          <type><ref refid="structxbee__command__list__context__t" kindref="compound">xbee_command_list_context_t</ref> <ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref> *</type>
          <declname>clc</declname>
        </param>
        <briefdescription>
<para>Determine status of command list execution. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">clc</parametername>
</parameternamelist>
<parameterdescription>
<para>List head passed to <ref refid="group__xbee__atcmd_1gab9fb2f15b9134bd32d937a51e4c68014" kindref="member">xbee_cmd_list_execute()</ref>.</para></parameterdescription>
</parameteritem>
</parameterlist>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>XBEE_COMMAND_LIST_RUNNING</parametername>
</parameternamelist>
<parameterdescription>
<para>currently executing commands </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>XBEE_COMMAND_LIST_DONE</parametername>
</parameternamelist>
<parameterdescription>
<para>successfully completed </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>XBEE_COMMAND_LIST_TIMEOUT</parametername>
</parameternamelist>
<parameterdescription>
<para>timed out </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>XBEE_COMMAND_LIST_ERROR</parametername>
</parameternamelist>
<parameterdescription>
<para>completed with error(s)</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="see"><para><ref refid="group__xbee__atcmd_1gab9fb2f15b9134bd32d937a51e4c68014" kindref="member">xbee_cmd_list_execute()</ref> </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/xbee/xbee_atcmd.c" line="474" column="1" bodyfile="src/xbee/xbee_atcmd.c" bodystart="519" bodyend="523"/>
        <referencedby refid="group__xbee__atcmd_1ga83f36dfc3c3cd2c4046719ea6e9cc53c" compoundref="xbee__atcmd_8c" startline="825" endline="835">xbee_cmd_query_status</referencedby>
        <referencedby refid="group__xbee__io_1gad253478285335c84b310aafb13aa1b21" compoundref="xbee__io_8c" startline="779" endline="789">xbee_io_query_status</referencedby>
      </memberdef>
      <memberdef kind="function" id="group__xbee__atcmd_1ga1cc803f821ed44e27e404d38349f53c7" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int xbee_cmd_init_device</definition>
        <argsstring>(xbee_dev_t *xbee)</argsstring>
        <name>xbee_cmd_init_device</name>
        <param>
          <type><ref refid="structxbee__dev__t" kindref="compound">xbee_dev_t</ref> *</type>
          <declname>xbee</declname>
        </param>
        <briefdescription>
<para>Initialize the AT Command layer for an XBee device. </para>        </briefdescription>
        <detaileddescription>
<para>You need to call this function before any of the other xbee_cmd_* functions.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">xbee</parametername>
</parameternamelist>
<parameterdescription>
<para>XBee device on which to enable the AT Command layer. This function will automatically call xbee_cmd_query_device if it hasn&apos;t already been called for this device.</para></parameterdescription>
</parameteritem>
</parameterlist>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>0</parametername>
</parameternamelist>
<parameterdescription>
<para>the XBee device was successfully configured to send and receive AT commands </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>-EINVAL</parametername>
</parameternamelist>
<parameterdescription>
<para>an invalid parameter was passed to the function</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="see"><para><ref refid="group__xbee__atcmd_1ga12317255ca84c2539b7d7a58816eccab" kindref="member">xbee_cmd_query_device()</ref>, <ref refid="group__xbee__atcmd_1gab73aaf873be6f9e515dcd65748a7f21c" kindref="member">xbee_cmd_create()</ref>, <ref refid="group__xbee__atcmd_1ga06181e54a87d90c30108360d6b433323" kindref="member">xbee_cmd_set_command()</ref>, <ref refid="group__xbee__atcmd_1ga0a5d2e2e87743061c46abd53e379e014" kindref="member">xbee_cmd_set_callback()</ref>, <ref refid="group__xbee__atcmd_1gae478cb2ea9bb07ade86009a65e6d121f" kindref="member">xbee_cmd_set_target()</ref>, <ref refid="group__xbee__atcmd_1ga4295dde3673b07f41e569e333abd9730" kindref="member">xbee_cmd_set_param()</ref>, <ref refid="group__xbee__atcmd_1ga6bd558a2d03eafe29b176f598d76ffd6" kindref="member">xbee_cmd_set_param_bytes()</ref>, <ref refid="group__xbee__atcmd_1ga5b69459e7c47be384c9add2921e507e0" kindref="member">xbee_cmd_set_param_str()</ref>, <ref refid="group__xbee__atcmd_1ga2c58eedef60b41dd30ae1f6b475606a8" kindref="member">xbee_cmd_send()</ref> </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/xbee/xbee_atcmd.c" line="549" column="1" bodyfile="src/xbee/xbee_atcmd.c" bodystart="549" bodyend="573"/>
        <references refid="group__hal_1ga2d1678d5a7cc8ce499643f3b8957def4" compoundref="platform_8h" startline="95">EINVAL</references>
        <references refid="group__xbee__device_1ga9ac684521a8154bddc272049a7a61b73" compoundref="device_8h" startline="418">xbee_dev_t::flags</references>
        <references refid="group__xbee__atcmd_1ga12317255ca84c2539b7d7a58816eccab" compoundref="xbee__atcmd_8c" startline="764" endline="808">xbee_cmd_query_device</references>
        <references refid="group__xbee__device_1gga80478d6b87ebdf34b5ec06e5ca6f309ea7227a8ae75aa792a17e24d20f1a5a4a8" compoundref="device_8h" startline="311">XBEE_DEV_FLAG_CMD_INIT</references>
        <references refid="group__xbee__device_1gga80478d6b87ebdf34b5ec06e5ca6f309ea28b7d1589252302b80f10a627656a6c5" compoundref="device_8h" startline="312">XBEE_DEV_FLAG_QUERY_BEGIN</references>
      </memberdef>
      <memberdef kind="function" id="group__xbee__atcmd_1gac58af8f94f76f3d3201c055aaa9a559b" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void _xbee_cmd_query_handle_eo</definition>
        <argsstring>(const xbee_cmd_response_t FAR *response, const struct xbee_atcmd_reg_t FAR *reg, void FAR *base)</argsstring>
        <name>_xbee_cmd_query_handle_eo</name>
        <param>
          <type>const <ref refid="structxbee__cmd__response__t" kindref="compound">xbee_cmd_response_t</ref> <ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref> *</type>
          <declname>response</declname>
        </param>
        <param>
          <type>const struct <ref refid="structxbee__atcmd__reg__t" kindref="compound">xbee_atcmd_reg_t</ref> <ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref> *</type>
          <declname>reg</declname>
        </param>
        <param>
          <type>void <ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref> *</type>
          <declname>base</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/xbee/xbee_atcmd.c" line="579" column="1" bodyfile="src/xbee/xbee_atcmd.c" bodystart="579" bodyend="608"/>
      </memberdef>
      <memberdef kind="function" id="group__xbee__atcmd_1ga1a1bd382a9a9f19787577bd709679f82" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void _xbee_cmd_query_handle_ai</definition>
        <argsstring>(const xbee_cmd_response_t FAR *response, const struct xbee_atcmd_reg_t FAR *reg, void FAR *base)</argsstring>
        <name>_xbee_cmd_query_handle_ai</name>
        <param>
          <type>const <ref refid="structxbee__cmd__response__t" kindref="compound">xbee_cmd_response_t</ref> <ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref> *</type>
          <declname>response</declname>
        </param>
        <param>
          <type>const struct <ref refid="structxbee__atcmd__reg__t" kindref="compound">xbee_atcmd_reg_t</ref> <ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref> *</type>
          <declname>reg</declname>
        </param>
        <param>
          <type>void <ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref> *</type>
          <declname>base</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/xbee/xbee_atcmd.c" line="611" column="1" bodyfile="src/xbee/xbee_atcmd.c" bodystart="611" bodyend="644"/>
      </memberdef>
      <memberdef kind="function" id="group__xbee__atcmd_1gafdbf73f2f7ab0efaa371e912f36ac8cb" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void _xbee_cmd_query_handle_end</definition>
        <argsstring>(const xbee_cmd_response_t FAR *response, const struct xbee_atcmd_reg_t FAR *reg, void FAR *base)</argsstring>
        <name>_xbee_cmd_query_handle_end</name>
        <param>
          <type>const <ref refid="structxbee__cmd__response__t" kindref="compound">xbee_cmd_response_t</ref> <ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref> *</type>
          <declname>response</declname>
        </param>
        <param>
          <type>const struct <ref refid="structxbee__atcmd__reg__t" kindref="compound">xbee_atcmd_reg_t</ref> <ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref> *</type>
          <declname>reg</declname>
        </param>
        <param>
          <type>void <ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref> *</type>
          <declname>base</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/xbee/xbee_atcmd.c" line="647" column="1" bodyfile="src/xbee/xbee_atcmd.c" bodystart="647" bodyend="703"/>
      </memberdef>
      <memberdef kind="function" id="group__xbee__atcmd_1ga12317255ca84c2539b7d7a58816eccab" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int xbee_cmd_query_device</definition>
        <argsstring>(xbee_dev_t *xbee, uint_fast8_t refresh)</argsstring>
        <name>xbee_cmd_query_device</name>
        <param>
          <type><ref refid="structxbee__dev__t" kindref="compound">xbee_dev_t</ref> *</type>
          <declname>xbee</declname>
        </param>
        <param>
          <type>uint_fast8_t</type>
          <declname>refresh</declname>
        </param>
        <briefdescription>
<para>Learn about the underlying device by sending a series of commands and storing the results in the <ref refid="structxbee__dev__t" kindref="compound">xbee_dev_t</ref>. </para>        </briefdescription>
        <detaileddescription>
<para>This function will likely get called by the XBee stack at some point in the startup/initialization phase.</para><para>Use <ref refid="group__xbee__atcmd_1ga83f36dfc3c3cd2c4046719ea6e9cc53c" kindref="member">xbee_cmd_query_status()</ref> to check on the progress of querying the device.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="inout">xbee</parametername>
</parameternamelist>
<parameterdescription>
<para>XBee device to query. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">refresh</parametername>
</parameternamelist>
<parameterdescription>
<para>if non-zero, just refresh the volatile values (e.g., network settings, as opposed to device serial number)</para></parameterdescription>
</parameteritem>
</parameterlist>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>0</parametername>
</parameternamelist>
<parameterdescription>
<para>Started querying device. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>-EBUSY</parametername>
</parameternamelist>
<parameterdescription>
<para>Transmit serial buffer is full, or XBee is not accepting serial data (deasserting /CTS signal).</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="see"><para><ref refid="group__xbee__atcmd_1ga1cc803f821ed44e27e404d38349f53c7" kindref="member">xbee_cmd_init_device()</ref>, <ref refid="group__xbee__atcmd_1ga83f36dfc3c3cd2c4046719ea6e9cc53c" kindref="member">xbee_cmd_query_status()</ref> </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/xbee/xbee_atcmd.c" line="764" column="1" bodyfile="src/xbee/xbee_atcmd.c" bodystart="764" bodyend="808"/>
        <references refid="group__hal_1ga2d1678d5a7cc8ce499643f3b8957def4" compoundref="platform_8h" startline="95">EINVAL</references>
        <references refid="group__xbee__device_1ga9ac684521a8154bddc272049a7a61b73" compoundref="device_8h" startline="418">xbee_dev_t::flags</references>
        <references refid="group__xbee__atcmd_1ga23209b601f70aa30a5a6997c9baf313e" compoundref="xbee__atcmd_8c" startline="737">XBEE_ATCMD_REG_REFRESH_IDX</references>
        <references refid="group__xbee__device_1gga80478d6b87ebdf34b5ec06e5ca6f309ea5f1d6c0ecfad680a292b57e8b078e357" compoundref="device_8h" startline="316">XBEE_DEV_FLAG_QUERY_INPROGRESS</references>
        <references refid="group__xbee__device_1gga80478d6b87ebdf34b5ec06e5ca6f309ea08b02fa597f36fd613370d28ab5a0e81" compoundref="device_8h" startline="315">XBEE_DEV_FLAG_QUERY_REFRESH</references>
        <referencedby refid="group__xbee__atcmd_1ga9b0ddf7aae7599dc334304f2b642f05f" compoundref="xbee__atcmd_8c" startline="1702" endline="1739">_xbee_cmd_modem_status</referencedby>
        <referencedby refid="group__xbee__atcmd_1ga1cc803f821ed44e27e404d38349f53c7" compoundref="xbee__atcmd_8c" startline="549" endline="573">xbee_cmd_init_device</referencedby>
      </memberdef>
      <memberdef kind="function" id="group__xbee__atcmd_1ga83f36dfc3c3cd2c4046719ea6e9cc53c" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int xbee_cmd_query_status</definition>
        <argsstring>(xbee_dev_t *xbee)</argsstring>
        <name>xbee_cmd_query_status</name>
        <param>
          <type><ref refid="structxbee__dev__t" kindref="compound">xbee_dev_t</ref> *</type>
          <declname>xbee</declname>
        </param>
        <briefdescription>
<para>Check the status of querying an XBee device, as initiated by <ref refid="group__xbee__atcmd_1ga12317255ca84c2539b7d7a58816eccab" kindref="member">xbee_cmd_query_device()</ref>. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">xbee</parametername>
</parameternamelist>
<parameterdescription>
<para>device to check</para></parameterdescription>
</parameteritem>
</parameterlist>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>0</parametername>
</parameternamelist>
<parameterdescription>
<para>query completed </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>-EINVAL</parametername>
</parameternamelist>
<parameterdescription>
<para><emphasis>xbee</emphasis> is NULL </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>-EBUSY</parametername>
</parameternamelist>
<parameterdescription>
<para>query underway </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>-ETIMEDOUT</parametername>
</parameternamelist>
<parameterdescription>
<para>query timed out </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>-EIO</parametername>
</parameternamelist>
<parameterdescription>
<para>halted, but query may not have completed (unexpected response) </para></parameterdescription>
</parameteritem>
</parameterlist>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/xbee/xbee_atcmd.c" line="825" column="1" bodyfile="src/xbee/xbee_atcmd.c" bodystart="825" bodyend="835"/>
        <references refid="group__hal_1ga2d1678d5a7cc8ce499643f3b8957def4" compoundref="platform_8h" startline="95">EINVAL</references>
        <references refid="group__xbee__atcmd_1gafb2d1636c675066469ee388170ea27a0" compoundref="xbee__atcmd_8c" startline="519" endline="523">xbee_cmd_list_status</references>
        <references refid="group__xbee__atcmd_1ga7ef08f6771da8c18234bbffca2be4ff3" compoundref="xbee__atcmd_8c" startline="81" endline="150">xbee_cmd_tick</references>
      </memberdef>
      <memberdef kind="function" id="group__xbee__atcmd_1gab73aaf873be6f9e515dcd65748a7f21c" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="group__hal__dos_1ga2140805d08462d474b82ddc8d1c2f3e6" kindref="member">int16_t</ref></type>
        <definition>int16_t xbee_cmd_create</definition>
        <argsstring>(xbee_dev_t *xbee, const char FAR command[3])</argsstring>
        <name>xbee_cmd_create</name>
        <param>
          <type><ref refid="structxbee__dev__t" kindref="compound">xbee_dev_t</ref> *</type>
          <declname>xbee</declname>
        </param>
        <param>
          <type>const char <ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref></type>
          <declname>command</declname>
          <array>[3]</array>
        </param>
        <briefdescription>
<para>Allocate an AT Command request. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">xbee</parametername>
</parameternamelist>
<parameterdescription>
<para>XBee device to use as the target (local) or to send through (remote). This function will automatically call xbee_cmd_init() if it hasn&apos;t already been called for this device.</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">command</parametername>
</parameternamelist>
<parameterdescription>
<para>Two-letter AT Command to send (e.g., &quot;VR&quot;, &quot;NI&quot;, etc.).</para></parameterdescription>
</parameteritem>
</parameterlist>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>&gt;0</parametername>
</parameternamelist>
<parameterdescription>
<para>a &quot;handle&quot; to a request that can be built up and sent to a local (serially-attached) or remote XBee module. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>-ENOSPC</parametername>
</parameternamelist>
<parameterdescription>
<para>the AT command table is full (increase the compile-time macro XBEE_CMD_REQUEST_TABLESIZE) </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>-EINVAL</parametername>
</parameternamelist>
<parameterdescription>
<para>an invalid parameter was passed to the function</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="see"><para><ref refid="group__xbee__atcmd_1ga1cc803f821ed44e27e404d38349f53c7" kindref="member">xbee_cmd_init_device()</ref>, <ref refid="group__xbee__atcmd_1ga12317255ca84c2539b7d7a58816eccab" kindref="member">xbee_cmd_query_device()</ref>, <ref refid="group__xbee__atcmd_1ga06181e54a87d90c30108360d6b433323" kindref="member">xbee_cmd_set_command()</ref>, <ref refid="group__xbee__atcmd_1ga0a5d2e2e87743061c46abd53e379e014" kindref="member">xbee_cmd_set_callback()</ref>, <ref refid="group__xbee__atcmd_1gae478cb2ea9bb07ade86009a65e6d121f" kindref="member">xbee_cmd_set_target()</ref>, <ref refid="group__xbee__atcmd_1ga4295dde3673b07f41e569e333abd9730" kindref="member">xbee_cmd_set_param()</ref>, <ref refid="group__xbee__atcmd_1ga6bd558a2d03eafe29b176f598d76ffd6" kindref="member">xbee_cmd_set_param_bytes()</ref>, <ref refid="group__xbee__atcmd_1ga5b69459e7c47be384c9add2921e507e0" kindref="member">xbee_cmd_set_param_str()</ref>, <ref refid="group__xbee__atcmd_1ga2c58eedef60b41dd30ae1f6b475606a8" kindref="member">xbee_cmd_send()</ref> </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/xbee/xbee_atcmd.c" line="868" column="1" bodyfile="src/xbee/xbee_atcmd.c" bodystart="868" bodyend="930"/>
        <referencedby refid="group__xbee__io_1ga6a1e9ccca3a6d97f1b583e76f1193dca" compoundref="xbee__io_8c" startline="538" endline="586">xbee_io_set_options</referencedby>
      </memberdef>
      <memberdef kind="function" id="group__xbee__atcmd_1ga899d5ef84ca5790c3c76b965f88874e0" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int _xbee_cmd_release_request</definition>
        <argsstring>(xbee_cmd_request_t FAR *request)</argsstring>
        <name>_xbee_cmd_release_request</name>
        <param>
          <type><ref refid="structxbee__cmd__request__t" kindref="compound">xbee_cmd_request_t</ref> <ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref> *</type>
          <declname>request</declname>
        </param>
        <briefdescription>
<para>Release an entry from the request table by marking it as available. </para>        </briefdescription>
        <detaileddescription>
<internal><para>For internal driver use only <ndash/> userspace code should use <ref refid="group__xbee__atcmd_1ga91641619ae34da34615193962ffd1525" kindref="member">xbee_cmd_release_handle()</ref> instead.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">request</parametername>
</parameternamelist>
<parameterdescription>
<para>Address of the table entry.</para></parameterdescription>
</parameteritem>
</parameterlist>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>0</parametername>
</parameternamelist>
<parameterdescription>
<para>request freed </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>-EINVAL</parametername>
</parameternamelist>
<parameterdescription>
<para>address (<emphasis>request</emphasis>) is not valid</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="see"><para><ref refid="group__xbee__atcmd_1gab73aaf873be6f9e515dcd65748a7f21c" kindref="member">xbee_cmd_create()</ref>, <ref refid="group__xbee__atcmd_1ga91641619ae34da34615193962ffd1525" kindref="member">xbee_cmd_release_handle()</ref></para></simplesect>
<xrefsect id="todo_1_todo000009"><xreftitle>Todo</xreftitle><xrefdescription><para>add bounds checking on request to make sure it&apos;s in the table? </para></xrefdescription></xrefsect></para></internal>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/xbee/xbee_atcmd.c" line="956" column="1" bodyfile="src/xbee/xbee_atcmd.c" bodystart="956" bodyend="967"/>
        <references refid="group__hal_1ga2d1678d5a7cc8ce499643f3b8957def4" compoundref="platform_8h" startline="95">EINVAL</references>
        <referencedby refid="group__xbee__atcmd_1ga91641619ae34da34615193962ffd1525" compoundref="xbee__atcmd_8c" startline="984" endline="989">xbee_cmd_release_handle</referencedby>
      </memberdef>
      <memberdef kind="function" id="group__xbee__atcmd_1ga91641619ae34da34615193962ffd1525" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int xbee_cmd_release_handle</definition>
        <argsstring>(int16_t handle)</argsstring>
        <name>xbee_cmd_release_handle</name>
        <param>
          <type><ref refid="group__hal__dos_1ga2140805d08462d474b82ddc8d1c2f3e6" kindref="member">int16_t</ref></type>
          <declname>handle</declname>
        </param>
        <briefdescription>
<para>Release an entry from the request table by marking it as available. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">handle</parametername>
</parameternamelist>
<parameterdescription>
<para>handle to the request (as returned by xbee_cmd_create)</para></parameterdescription>
</parameteritem>
</parameterlist>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>0</parametername>
</parameternamelist>
<parameterdescription>
<para>request freed </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>-EINVAL</parametername>
</parameternamelist>
<parameterdescription>
<para><emphasis>handle</emphasis> is not valid</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="see"><para><ref refid="group__xbee__atcmd_1gab73aaf873be6f9e515dcd65748a7f21c" kindref="member">xbee_cmd_create()</ref>, <ref refid="group__xbee__atcmd_1ga91641619ae34da34615193962ffd1525" kindref="member">xbee_cmd_release_handle()</ref> </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/xbee/xbee_atcmd.c" line="984" column="1" bodyfile="src/xbee/xbee_atcmd.c" bodystart="984" bodyend="989"/>
        <references refid="group__xbee__atcmd_1ga710b2223cda09c52a8518c964da88347" compoundref="xbee__atcmd_8c" startline="170" endline="187">_xbee_cmd_handle_to_address</references>
        <references refid="group__xbee__atcmd_1ga899d5ef84ca5790c3c76b965f88874e0" compoundref="xbee__atcmd_8c" startline="956" endline="967">_xbee_cmd_release_request</references>
      </memberdef>
      <memberdef kind="function" id="group__xbee__atcmd_1ga06181e54a87d90c30108360d6b433323" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int xbee_cmd_set_command</definition>
        <argsstring>(int16_t handle, const char FAR command[3])</argsstring>
        <name>xbee_cmd_set_command</name>
        <param>
          <type><ref refid="group__hal__dos_1ga2140805d08462d474b82ddc8d1c2f3e6" kindref="member">int16_t</ref></type>
          <declname>handle</declname>
        </param>
        <param>
          <type>const char <ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref></type>
          <declname>command</declname>
          <array>[3]</array>
        </param>
        <briefdescription>
<para>Change the command associated with a request. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">handle</parametername>
</parameternamelist>
<parameterdescription>
<para>handle to the request, as returned by <ref refid="group__xbee__atcmd_1gab73aaf873be6f9e515dcd65748a7f21c" kindref="member">xbee_cmd_create()</ref></para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">command</parametername>
</parameternamelist>
<parameterdescription>
<para>two-letter AT Command to send (e.g., &quot;VR&quot;, &quot;NI&quot;, etc.)</para></parameterdescription>
</parameteritem>
</parameterlist>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>0</parametername>
</parameternamelist>
<parameterdescription>
<para>command changed </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>-EINVAL</parametername>
</parameternamelist>
<parameterdescription>
<para><emphasis>handle</emphasis> is not valid</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="see"><para><ref refid="group__xbee__atcmd_1gab73aaf873be6f9e515dcd65748a7f21c" kindref="member">xbee_cmd_create()</ref>, <ref refid="group__xbee__atcmd_1ga0a5d2e2e87743061c46abd53e379e014" kindref="member">xbee_cmd_set_callback()</ref>, <ref refid="group__xbee__atcmd_1gae478cb2ea9bb07ade86009a65e6d121f" kindref="member">xbee_cmd_set_target()</ref>, <ref refid="group__xbee__atcmd_1ga4295dde3673b07f41e569e333abd9730" kindref="member">xbee_cmd_set_param()</ref>, <ref refid="group__xbee__atcmd_1ga6bd558a2d03eafe29b176f598d76ffd6" kindref="member">xbee_cmd_set_param_bytes()</ref>, <ref refid="group__xbee__atcmd_1ga5b69459e7c47be384c9add2921e507e0" kindref="member">xbee_cmd_set_param_str()</ref>, <ref refid="group__xbee__atcmd_1ga2c58eedef60b41dd30ae1f6b475606a8" kindref="member">xbee_cmd_send()</ref> </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/xbee/xbee_atcmd.c" line="1009" column="1" bodyfile="src/xbee/xbee_atcmd.c" bodystart="1009" bodyend="1022"/>
        <references refid="group__xbee__atcmd_1ga710b2223cda09c52a8518c964da88347" compoundref="xbee__atcmd_8c" startline="170" endline="187">_xbee_cmd_handle_to_address</references>
        <references refid="group__hal_1ga2d1678d5a7cc8ce499643f3b8957def4" compoundref="platform_8h" startline="95">EINVAL</references>
        <references refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" compoundref="platform_8h" startline="370">FAR</references>
      </memberdef>
      <memberdef kind="function" id="group__xbee__atcmd_1ga0a5d2e2e87743061c46abd53e379e014" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int xbee_cmd_set_callback</definition>
        <argsstring>(int16_t handle, xbee_cmd_callback_fn callback, void FAR *context)</argsstring>
        <name>xbee_cmd_set_callback</name>
        <param>
          <type><ref refid="group__hal__dos_1ga2140805d08462d474b82ddc8d1c2f3e6" kindref="member">int16_t</ref></type>
          <declname>handle</declname>
        </param>
        <param>
          <type><ref refid="group__xbee__atcmd_1ga113cbd0a40a638710974218de5f885fe" kindref="member">xbee_cmd_callback_fn</ref></type>
          <declname>callback</declname>
        </param>
        <param>
          <type>void <ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref> *</type>
          <declname>context</declname>
        </param>
        <briefdescription>
<para>Associate a callback with a given AT Command request. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">handle</parametername>
</parameternamelist>
<parameterdescription>
<para>Handle to the request, as returned by <ref refid="group__xbee__atcmd_1gab73aaf873be6f9e515dcd65748a7f21c" kindref="member">xbee_cmd_create()</ref>.</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">callback</parametername>
</parameternamelist>
<parameterdescription>
<para>Callback function to receive the AT Command response. This function should take a single parameter (pointer to an <ref refid="structxbee__cmd__response__t" kindref="compound">xbee_cmd_response_t</ref>) and return either <ref refid="group__xbee__atcmd_1gad51a6fee7843df5a5bfd6f3957465426" kindref="member">XBEE_ATCMD_DONE</ref> (if done with the request handle) or <ref refid="group__xbee__atcmd_1ga9a5078393806d67903c87b3c82597fb1" kindref="member">XBEE_ATCMD_REUSE</ref> (if more responses are expected, or the request handle is going to be reused). <programlisting><codeline><highlight class="normal">int<sp/>atcmd_callback(<sp/>const<sp/>xbee_cmd_response_t<sp/>FAR<sp/>*response)</highlight></codeline>
</programlisting></para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">context</parametername>
</parameternamelist>
<parameterdescription>
<para>Context (or &quot;userdata&quot;) value to pass to the callback along with the AT Command response when it arrives. Should be set to NULL if not used.</para></parameterdescription>
</parameteritem>
</parameterlist>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>0</parametername>
</parameternamelist>
<parameterdescription>
<para>callback set </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>-EINVAL</parametername>
</parameternamelist>
<parameterdescription>
<para><emphasis>handle</emphasis> is not valid</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="see"><para><ref refid="group__xbee__atcmd_1gab73aaf873be6f9e515dcd65748a7f21c" kindref="member">xbee_cmd_create()</ref>, <ref refid="group__xbee__atcmd_1ga06181e54a87d90c30108360d6b433323" kindref="member">xbee_cmd_set_command()</ref>, <ref refid="group__xbee__atcmd_1gae478cb2ea9bb07ade86009a65e6d121f" kindref="member">xbee_cmd_set_target()</ref>, <ref refid="group__xbee__atcmd_1ga4295dde3673b07f41e569e333abd9730" kindref="member">xbee_cmd_set_param()</ref>, <ref refid="group__xbee__atcmd_1ga6bd558a2d03eafe29b176f598d76ffd6" kindref="member">xbee_cmd_set_param_bytes()</ref>, <ref refid="group__xbee__atcmd_1ga5b69459e7c47be384c9add2921e507e0" kindref="member">xbee_cmd_set_param_str()</ref>, <ref refid="group__xbee__atcmd_1ga2c58eedef60b41dd30ae1f6b475606a8" kindref="member">xbee_cmd_send()</ref> </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/xbee/xbee_atcmd.c" line="1057" column="1" bodyfile="src/xbee/xbee_atcmd.c" bodystart="1057" bodyend="1072"/>
        <references refid="group__xbee__atcmd_1ga710b2223cda09c52a8518c964da88347" compoundref="xbee__atcmd_8c" startline="170" endline="187">_xbee_cmd_handle_to_address</references>
        <references refid="group__hal_1ga2d1678d5a7cc8ce499643f3b8957def4" compoundref="platform_8h" startline="95">EINVAL</references>
        <references refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" compoundref="platform_8h" startline="370">FAR</references>
      </memberdef>
      <memberdef kind="function" id="group__xbee__atcmd_1gae478cb2ea9bb07ade86009a65e6d121f" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int xbee_cmd_set_target</definition>
        <argsstring>(int16_t handle, const addr64 FAR *ieee, uint16_t network_address)</argsstring>
        <name>xbee_cmd_set_target</name>
        <param>
          <type><ref refid="group__hal__dos_1ga2140805d08462d474b82ddc8d1c2f3e6" kindref="member">int16_t</ref></type>
          <declname>handle</declname>
        </param>
        <param>
          <type>const <ref refid="unionaddr64" kindref="compound">addr64</ref> <ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref> *</type>
          <declname>ieee</declname>
        </param>
        <param>
          <type><ref refid="group__hal__dos_1ga5a8b2dc9e45a9ee81a94ef304fb62505" kindref="member">uint16_t</ref></type>
          <declname>network_address</declname>
        </param>
        <briefdescription>
<para>Associate a remote XBee device with a given AT Command request. </para>        </briefdescription>
        <detaileddescription>
<para>By default, <ref refid="group__xbee__atcmd_1gab73aaf873be6f9e515dcd65748a7f21c" kindref="member">xbee_cmd_create()</ref> configures the request as a local AT Command for the serially-attached XBee module. Use this function to send the command to a remote device.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">handle</parametername>
</parameternamelist>
<parameterdescription>
<para>Handle to the request, as returned by <ref refid="group__xbee__atcmd_1gab73aaf873be6f9e515dcd65748a7f21c" kindref="member">xbee_cmd_create()</ref>.</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">ieee</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to 64-bit IEEE hardware address of target, or NULL to switch back to the local XBee device.<itemizedlist>
<listitem><para><ref refid="group__wpan__types_1gaced36f5538c5bb2da4f60a90313f1674" kindref="member">WPAN_IEEE_ADDR_BROADCAST</ref> for broadcast.</para></listitem><listitem><para><ref refid="group__wpan__types_1ga816199ef85ef801e07ae48350664034d" kindref="member">WPAN_IEEE_ADDR_COORDINATOR</ref> for the coordinator (use <ref refid="group__wpan__types_1ga1674d7b825e528a482725d1c06b02c10" kindref="member">WPAN_NET_ADDR_UNDEFINED</ref> for the network address).</para></listitem><listitem><para><ref refid="group__wpan__types_1ga09e965ef6cfbfd48312d86bb011f125b" kindref="member">WPAN_IEEE_ADDR_UNDEFINED</ref> to use the 16-bit network address.</para></listitem></itemizedlist>
</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">network</parametername>
</parameternamelist>
<parameterdescription>
<para>16-bit network address of target.<itemizedlist>
<listitem><para><ref refid="group__wpan__types_1ga1674d7b825e528a482725d1c06b02c10" kindref="member">WPAN_NET_ADDR_UNDEFINED</ref> if the node&apos;s network address isn&apos;t known or this is a DigiMesh network.</para></listitem><listitem><para><ref refid="group__wpan__types_1ga5158cbab6c4139bd77d1d3f80d9071b2" kindref="member">WPAN_NET_ADDR_COORDINATOR</ref> for the coordinator (use the coordinator&apos;s actual IEEE address for the <emphasis>ieee</emphasis> parameter).</para></listitem><listitem><para><ref refid="group__wpan__types_1ga08ec03f67d0d74ba6f98da543baee129" kindref="member">WPAN_NET_ADDR_BCAST_NOT_ASLEEP</ref> to broadcast to all nodes that aren&apos;t sleeping.</para></listitem><listitem><para><ref refid="group__wpan__types_1gabc1252917f345a50aa97f991bb7a3685" kindref="member">WPAN_NET_ADDR_BCAST_ROUTERS</ref> to broadcast to the coordinator and all routers.</para></listitem></itemizedlist>
</para></parameterdescription>
</parameteritem>
</parameterlist>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>0</parametername>
</parameternamelist>
<parameterdescription>
<para>target set </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>-EINVAL</parametername>
</parameternamelist>
<parameterdescription>
<para><emphasis>handle</emphasis> is not valid </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>-ENOSYS</parametername>
</parameternamelist>
<parameterdescription>
<para>function not implemented (XBEE_CMD_DISABLE_REMOTE defined)</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="see"><para><ref refid="group__xbee__atcmd_1gab73aaf873be6f9e515dcd65748a7f21c" kindref="member">xbee_cmd_create()</ref>, <ref refid="group__xbee__atcmd_1ga06181e54a87d90c30108360d6b433323" kindref="member">xbee_cmd_set_command()</ref>, <ref refid="group__xbee__atcmd_1ga0a5d2e2e87743061c46abd53e379e014" kindref="member">xbee_cmd_set_callback()</ref>, <ref refid="group__xbee__atcmd_1ga4295dde3673b07f41e569e333abd9730" kindref="member">xbee_cmd_set_param()</ref>, <ref refid="group__xbee__atcmd_1ga6bd558a2d03eafe29b176f598d76ffd6" kindref="member">xbee_cmd_set_param_bytes()</ref>, <ref refid="group__xbee__atcmd_1ga5b69459e7c47be384c9add2921e507e0" kindref="member">xbee_cmd_set_param_str()</ref>, <ref refid="group__xbee__atcmd_1ga2c58eedef60b41dd30ae1f6b475606a8" kindref="member">xbee_cmd_send()</ref> </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/xbee/xbee_atcmd.c" line="1115" column="1" bodyfile="src/xbee/xbee_atcmd.c" bodystart="1115" bodyend="1143"/>
        <references refid="group__xbee__atcmd_1ga710b2223cda09c52a8518c964da88347" compoundref="xbee__atcmd_8c" startline="170" endline="187">_xbee_cmd_handle_to_address</references>
        <references refid="group__hal_1ga2d1678d5a7cc8ce499643f3b8957def4" compoundref="platform_8h" startline="95">EINVAL</references>
        <references refid="group__hal_1ga43785b9969e0bd1af532dbde06c5540b" compoundref="platform_8h" startline="131">ENOSYS</references>
        <references refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" compoundref="platform_8h" startline="370">FAR</references>
        <referencedby refid="group__xbee__io_1ga6a1e9ccca3a6d97f1b583e76f1193dca" compoundref="xbee__io_8c" startline="538" endline="586">xbee_io_set_options</referencedby>
      </memberdef>
      <memberdef kind="function" id="group__xbee__atcmd_1ga484572705b9695ab429fd51188f74238" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="group__hal__dos_1gae1affc9ca37cfb624959c866a73f83c2" kindref="member">uint8_t</ref></type>
        <definition>uint8_t _xbee_cmd_encode_param</definition>
        <argsstring>(void FAR *buffer, uint32_t value)</argsstring>
        <name>_xbee_cmd_encode_param</name>
        <param>
          <type>void <ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref> *</type>
          <declname>buffer</declname>
        </param>
        <param>
          <type><ref refid="group__hal__dos_1ga09a1e304d66d35dd47daffee9731edaa" kindref="member">uint32_t</ref></type>
          <declname>value</declname>
        </param>
        <briefdescription>
<para>Store an unsigned integer in 1, 2 or 4 bytes as a parameter to an AT command. </para>        </briefdescription>
        <detaileddescription>
<internal><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">buffer</parametername>
</parameternamelist>
<parameterdescription>
<para>buffer to store value </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">value</parametername>
</parameternamelist>
<parameterdescription>
<para>value to store</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>Number of bytes required (1, 2 or 4) to hold value. </para></simplesect>
</para></internal>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/xbee/xbee_atcmd.c" line="1147" column="1" bodyfile="src/xbee/xbee_atcmd.c" bodystart="1161" bodyend="1178"/>
        <referencedby refid="group__xbee__atcmd_1ga4295dde3673b07f41e569e333abd9730" compoundref="xbee__atcmd_8c" startline="1272" endline="1285">xbee_cmd_set_param</referencedby>
      </memberdef>
      <memberdef kind="function" id="group__xbee__atcmd_1gad2cc44803cc53ada37df4557313e120b" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int xbee_cmd_set_flags</definition>
        <argsstring>(int16_t handle, uint16_t flags)</argsstring>
        <name>xbee_cmd_set_flags</name>
        <param>
          <type><ref refid="group__hal__dos_1ga2140805d08462d474b82ddc8d1c2f3e6" kindref="member">int16_t</ref></type>
          <declname>handle</declname>
        </param>
        <param>
          <type><ref refid="group__hal__dos_1ga5a8b2dc9e45a9ee81a94ef304fb62505" kindref="member">uint16_t</ref></type>
          <declname>flags</declname>
        </param>
        <briefdescription>
<para>Set the flags for a given AT Command request. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">handle</parametername>
</parameternamelist>
<parameterdescription>
<para>Handle to the request, as returned by <ref refid="group__xbee__atcmd_1gab73aaf873be6f9e515dcd65748a7f21c" kindref="member">xbee_cmd_create()</ref>. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">flags</parametername>
</parameternamelist>
<parameterdescription>
<para>One or more of the following:<itemizedlist>
<listitem><para>XBEE_CMD_FLAG_QUEUE_CHANGE don&apos;t apply changes until ATAC or another command without this flag is sent</para></listitem></itemizedlist>
</para></parameterdescription>
</parameteritem>
</parameterlist>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>0</parametername>
</parameternamelist>
<parameterdescription>
<para>flags set </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>-EINVAL</parametername>
</parameternamelist>
<parameterdescription>
<para><emphasis>handle</emphasis> is not valid</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="see"><para><ref refid="group__xbee__atcmd_1ga0828601d6b2735ee9f2ebf408d12c05c" kindref="member">xbee_cmd_clear_flags</ref> </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/xbee/xbee_atcmd.c" line="1199" column="1" bodyfile="src/xbee/xbee_atcmd.c" bodystart="1199" bodyend="1212"/>
      </memberdef>
      <memberdef kind="function" id="group__xbee__atcmd_1ga0828601d6b2735ee9f2ebf408d12c05c" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int xbee_cmd_clear_flags</definition>
        <argsstring>(int16_t handle, uint16_t flags)</argsstring>
        <name>xbee_cmd_clear_flags</name>
        <param>
          <type><ref refid="group__hal__dos_1ga2140805d08462d474b82ddc8d1c2f3e6" kindref="member">int16_t</ref></type>
          <declname>handle</declname>
        </param>
        <param>
          <type><ref refid="group__hal__dos_1ga5a8b2dc9e45a9ee81a94ef304fb62505" kindref="member">uint16_t</ref></type>
          <declname>flags</declname>
        </param>
        <briefdescription>
<para>Clear the flags for a given AT Command request. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">handle</parametername>
</parameternamelist>
<parameterdescription>
<para>Handle to the request, as returned by <ref refid="group__xbee__atcmd_1gab73aaf873be6f9e515dcd65748a7f21c" kindref="member">xbee_cmd_create()</ref>. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">flags</parametername>
</parameternamelist>
<parameterdescription>
<para>One or more of the following:<itemizedlist>
<listitem><para>XBEE_CMD_FLAG_QUEUE_CHANGE don&apos;t apply changes until ATAC or another command without this flag is sent</para></listitem></itemizedlist>
</para></parameterdescription>
</parameteritem>
</parameterlist>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>0</parametername>
</parameternamelist>
<parameterdescription>
<para>flags cleared </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>-EINVAL</parametername>
</parameternamelist>
<parameterdescription>
<para><emphasis>handle</emphasis> is not valid</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="see"><para><ref refid="group__xbee__atcmd_1gad2cc44803cc53ada37df4557313e120b" kindref="member">xbee_cmd_set_flags</ref> </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/xbee/xbee_atcmd.c" line="1233" column="1" bodyfile="src/xbee/xbee_atcmd.c" bodystart="1233" bodyend="1246"/>
      </memberdef>
      <memberdef kind="function" id="group__xbee__atcmd_1ga4295dde3673b07f41e569e333abd9730" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int xbee_cmd_set_param</definition>
        <argsstring>(int16_t handle, uint32_t value)</argsstring>
        <name>xbee_cmd_set_param</name>
        <param>
          <type><ref refid="group__hal__dos_1ga2140805d08462d474b82ddc8d1c2f3e6" kindref="member">int16_t</ref></type>
          <declname>handle</declname>
        </param>
        <param>
          <type><ref refid="group__hal__dos_1ga09a1e304d66d35dd47daffee9731edaa" kindref="member">uint32_t</ref></type>
          <declname>value</declname>
        </param>
        <briefdescription>
<para>Set the parameter (up to 32-bits) for a given AT Command request. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">handle</parametername>
</parameternamelist>
<parameterdescription>
<para>Handle to the request, as returned by <ref refid="group__xbee__atcmd_1gab73aaf873be6f9e515dcd65748a7f21c" kindref="member">xbee_cmd_create()</ref>.</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">value</parametername>
</parameternamelist>
<parameterdescription>
<para>Value to use as the parameter to the AT Command. For negative values, or values &gt; 0xFFFFFFFF, use <ref refid="group__xbee__atcmd_1ga6bd558a2d03eafe29b176f598d76ffd6" kindref="member">xbee_cmd_set_param_bytes()</ref>. For string parameters (e.g., for the &quot;NI&quot; command), use <ref refid="group__xbee__atcmd_1ga5b69459e7c47be384c9add2921e507e0" kindref="member">xbee_cmd_set_param_str()</ref>.</para></parameterdescription>
</parameteritem>
</parameterlist>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>0</parametername>
</parameternamelist>
<parameterdescription>
<para>parameter set </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>-EINVAL</parametername>
</parameternamelist>
<parameterdescription>
<para><emphasis>handle</emphasis> is not valid</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="see"><para><ref refid="group__xbee__atcmd_1gab73aaf873be6f9e515dcd65748a7f21c" kindref="member">xbee_cmd_create()</ref>, <ref refid="group__xbee__atcmd_1ga06181e54a87d90c30108360d6b433323" kindref="member">xbee_cmd_set_command()</ref>, <ref refid="group__xbee__atcmd_1ga0a5d2e2e87743061c46abd53e379e014" kindref="member">xbee_cmd_set_callback()</ref>, <ref refid="group__xbee__atcmd_1gae478cb2ea9bb07ade86009a65e6d121f" kindref="member">xbee_cmd_set_target()</ref>, <ref refid="group__xbee__atcmd_1ga6bd558a2d03eafe29b176f598d76ffd6" kindref="member">xbee_cmd_set_param_bytes()</ref>, <ref refid="group__xbee__atcmd_1ga5b69459e7c47be384c9add2921e507e0" kindref="member">xbee_cmd_set_param_str()</ref>, <ref refid="group__xbee__atcmd_1ga2c58eedef60b41dd30ae1f6b475606a8" kindref="member">xbee_cmd_send()</ref> </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/xbee/xbee_atcmd.c" line="1272" column="1" bodyfile="src/xbee/xbee_atcmd.c" bodystart="1272" bodyend="1285"/>
        <references refid="group__xbee__atcmd_1ga484572705b9695ab429fd51188f74238" compoundref="xbee__atcmd_8c" startline="1161" endline="1178">_xbee_cmd_encode_param</references>
        <references refid="group__xbee__atcmd_1ga710b2223cda09c52a8518c964da88347" compoundref="xbee__atcmd_8c" startline="170" endline="187">_xbee_cmd_handle_to_address</references>
        <references refid="group__hal_1ga2d1678d5a7cc8ce499643f3b8957def4" compoundref="platform_8h" startline="95">EINVAL</references>
        <references refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" compoundref="platform_8h" startline="370">FAR</references>
        <referencedby refid="group__xbee__io_1ga6a1e9ccca3a6d97f1b583e76f1193dca" compoundref="xbee__io_8c" startline="538" endline="586">xbee_io_set_options</referencedby>
      </memberdef>
      <memberdef kind="function" id="group__xbee__atcmd_1ga6bd558a2d03eafe29b176f598d76ffd6" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int xbee_cmd_set_param_bytes</definition>
        <argsstring>(int16_t handle, const void FAR *data, uint8_t length)</argsstring>
        <name>xbee_cmd_set_param_bytes</name>
        <param>
          <type><ref refid="group__hal__dos_1ga2140805d08462d474b82ddc8d1c2f3e6" kindref="member">int16_t</ref></type>
          <declname>handle</declname>
        </param>
        <param>
          <type>const void <ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref> *</type>
          <declname>data</declname>
        </param>
        <param>
          <type><ref refid="group__hal__dos_1gae1affc9ca37cfb624959c866a73f83c2" kindref="member">uint8_t</ref></type>
          <declname>length</declname>
        </param>
        <briefdescription>
<para>Set the parameter for a given AT Command request to a sequence of bytes. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">handle</parametername>
</parameternamelist>
<parameterdescription>
<para>Handle to the request, as returned by <ref refid="group__xbee__atcmd_1gab73aaf873be6f9e515dcd65748a7f21c" kindref="member">xbee_cmd_create()</ref>.</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">data</parametername>
</parameternamelist>
<parameterdescription>
<para>Pointer to bytes (MSB-first) to copy into request.</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">length</parametername>
</parameternamelist>
<parameterdescription>
<para>Number of bytes to copy. 0 &lt; <emphasis>length</emphasis> &lt;= <ref refid="group__xbee__atcmd_1ga9b1046f9c200c1bb0a9b57cb0ec474df" kindref="member">XBEE_CMD_MAX_PARAM_LENGTH</ref></para></parameterdescription>
</parameteritem>
</parameterlist>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>0</parametername>
</parameternamelist>
<parameterdescription>
<para>parameter set </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>-EINVAL</parametername>
</parameternamelist>
<parameterdescription>
<para><emphasis>handle</emphasis> or <emphasis>length</emphasis> is not valid </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>-EMSGSIZE</parametername>
</parameternamelist>
<parameterdescription>
<para><emphasis>length</emphasis> is greater than <ref refid="group__xbee__atcmd_1ga9b1046f9c200c1bb0a9b57cb0ec474df" kindref="member">XBEE_CMD_MAX_PARAM_LENGTH</ref></para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="see"><para><ref refid="group__xbee__atcmd_1gab73aaf873be6f9e515dcd65748a7f21c" kindref="member">xbee_cmd_create()</ref>, <ref refid="group__xbee__atcmd_1ga06181e54a87d90c30108360d6b433323" kindref="member">xbee_cmd_set_command()</ref>, <ref refid="group__xbee__atcmd_1ga0a5d2e2e87743061c46abd53e379e014" kindref="member">xbee_cmd_set_callback()</ref>, <ref refid="group__xbee__atcmd_1gae478cb2ea9bb07ade86009a65e6d121f" kindref="member">xbee_cmd_set_target()</ref>, <ref refid="group__xbee__atcmd_1ga4295dde3673b07f41e569e333abd9730" kindref="member">xbee_cmd_set_param()</ref>, <ref refid="group__xbee__atcmd_1ga5b69459e7c47be384c9add2921e507e0" kindref="member">xbee_cmd_set_param_str()</ref>, <ref refid="group__xbee__atcmd_1ga2c58eedef60b41dd30ae1f6b475606a8" kindref="member">xbee_cmd_send()</ref> </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/xbee/xbee_atcmd.c" line="1310" column="1" bodyfile="src/xbee/xbee_atcmd.c" bodystart="1310" bodyend="1341"/>
        <references refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" compoundref="platform_8h" startline="370">FAR</references>
        <references refid="group__xbee__atcmd_1ga9b1046f9c200c1bb0a9b57cb0ec474df" compoundref="atcmd_8h" startline="38">XBEE_CMD_MAX_PARAM_LENGTH</references>
        <referencedby refid="group__xbee__atcmd_1ga5b69459e7c47be384c9add2921e507e0" compoundref="xbee__atcmd_8c" startline="1367" endline="1380">xbee_cmd_set_param_str</referencedby>
      </memberdef>
      <memberdef kind="function" id="group__xbee__atcmd_1ga5b69459e7c47be384c9add2921e507e0" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int xbee_cmd_set_param_str</definition>
        <argsstring>(int16_t handle, const char FAR *str)</argsstring>
        <name>xbee_cmd_set_param_str</name>
        <param>
          <type><ref refid="group__hal__dos_1ga2140805d08462d474b82ddc8d1c2f3e6" kindref="member">int16_t</ref></type>
          <declname>handle</declname>
        </param>
        <param>
          <type>const char <ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref> *</type>
          <declname>str</declname>
        </param>
        <briefdescription>
<para>Set a string parameter for a given AT Command request (e.g., the &quot;NI&quot; node identifier command). </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">handle</parametername>
</parameternamelist>
<parameterdescription>
<para>Handle to the request, as returned by <ref refid="group__xbee__atcmd_1gab73aaf873be6f9e515dcd65748a7f21c" kindref="member">xbee_cmd_create()</ref>.</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">str</parametername>
</parameternamelist>
<parameterdescription>
<para>String to use as the parameter. Must be less than <ref refid="group__xbee__atcmd_1ga9b1046f9c200c1bb0a9b57cb0ec474df" kindref="member">XBEE_CMD_MAX_PARAM_LENGTH</ref> characters long.</para></parameterdescription>
</parameteritem>
</parameterlist>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>0</parametername>
</parameternamelist>
<parameterdescription>
<para>parameter set </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>-EINVAL</parametername>
</parameternamelist>
<parameterdescription>
<para><emphasis>handle</emphasis> is not valid </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>-EMSGSIZE</parametername>
</parameternamelist>
<parameterdescription>
<para><emphasis>str</emphasis> is more than <ref refid="group__xbee__atcmd_1ga9b1046f9c200c1bb0a9b57cb0ec474df" kindref="member">XBEE_CMD_MAX_PARAM_LENGTH</ref> characters.</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="see"><para><ref refid="group__xbee__atcmd_1gab73aaf873be6f9e515dcd65748a7f21c" kindref="member">xbee_cmd_create()</ref>, <ref refid="group__xbee__atcmd_1ga06181e54a87d90c30108360d6b433323" kindref="member">xbee_cmd_set_command()</ref>, <ref refid="group__xbee__atcmd_1ga0a5d2e2e87743061c46abd53e379e014" kindref="member">xbee_cmd_set_callback()</ref>, <ref refid="group__xbee__atcmd_1gae478cb2ea9bb07ade86009a65e6d121f" kindref="member">xbee_cmd_set_target()</ref>, <ref refid="group__xbee__atcmd_1ga4295dde3673b07f41e569e333abd9730" kindref="member">xbee_cmd_set_param()</ref>, <ref refid="group__xbee__atcmd_1ga6bd558a2d03eafe29b176f598d76ffd6" kindref="member">xbee_cmd_set_param_bytes()</ref>, <ref refid="group__xbee__atcmd_1ga2c58eedef60b41dd30ae1f6b475606a8" kindref="member">xbee_cmd_send()</ref> </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/xbee/xbee_atcmd.c" line="1367" column="1" bodyfile="src/xbee/xbee_atcmd.c" bodystart="1367" bodyend="1380"/>
        <references refid="group__hal_1gae37becfaa095a9df5c5c788bce5aa06f" compoundref="platform_8h" startline="140">EMSGSIZE</references>
        <references refid="group__zdo_1gab2b3adeb2a67e656ff030b56727fd0ac" compoundref="zdo_8h" startline="410">length</references>
        <references refid="group__xbee__atcmd_1ga9b1046f9c200c1bb0a9b57cb0ec474df" compoundref="atcmd_8h" startline="38">XBEE_CMD_MAX_PARAM_LENGTH</references>
        <references refid="group__xbee__atcmd_1ga6bd558a2d03eafe29b176f598d76ffd6" compoundref="xbee__atcmd_8c" startline="1310" endline="1341">xbee_cmd_set_param_bytes</references>
      </memberdef>
      <memberdef kind="function" id="group__xbee__atcmd_1ga2c58eedef60b41dd30ae1f6b475606a8" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int xbee_cmd_send</definition>
        <argsstring>(int16_t handle)</argsstring>
        <name>xbee_cmd_send</name>
        <param>
          <type><ref refid="group__hal__dos_1ga2140805d08462d474b82ddc8d1c2f3e6" kindref="member">int16_t</ref></type>
          <declname>handle</declname>
        </param>
        <briefdescription>
<para>Send an AT Command to a local or remote XBee device. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">handle</parametername>
</parameternamelist>
<parameterdescription>
<para>Handle to the request, as returned by <ref refid="group__xbee__atcmd_1gab73aaf873be6f9e515dcd65748a7f21c" kindref="member">xbee_cmd_create()</ref>.</para></parameterdescription>
</parameteritem>
</parameterlist>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>0</parametername>
</parameternamelist>
<parameterdescription>
<para>frame sent </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>-EINVAL</parametername>
</parameternamelist>
<parameterdescription>
<para>handle is not valid </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>-EBUSY</parametername>
</parameternamelist>
<parameterdescription>
<para>transmit serial buffer is full, or XBee is not accepting serial data (deasserting /CTS signal).</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="note"><para>If the request does not have a callback set, it will be automatically released if <ref refid="group__xbee__atcmd_1ga2c58eedef60b41dd30ae1f6b475606a8" kindref="member">xbee_cmd_send()</ref> returns 0.</para></simplesect>
<simplesect kind="see"><para><ref refid="group__xbee__atcmd_1gab73aaf873be6f9e515dcd65748a7f21c" kindref="member">xbee_cmd_create()</ref>, <ref refid="group__xbee__atcmd_1ga06181e54a87d90c30108360d6b433323" kindref="member">xbee_cmd_set_command()</ref>, <ref refid="group__xbee__atcmd_1ga0a5d2e2e87743061c46abd53e379e014" kindref="member">xbee_cmd_set_callback()</ref>, <ref refid="group__xbee__atcmd_1gae478cb2ea9bb07ade86009a65e6d121f" kindref="member">xbee_cmd_set_target()</ref>, <ref refid="group__xbee__atcmd_1ga4295dde3673b07f41e569e333abd9730" kindref="member">xbee_cmd_set_param()</ref>, <ref refid="group__xbee__atcmd_1ga6bd558a2d03eafe29b176f598d76ffd6" kindref="member">xbee_cmd_set_param_bytes()</ref>, <ref refid="group__xbee__atcmd_1ga5b69459e7c47be384c9add2921e507e0" kindref="member">xbee_cmd_set_param_str()</ref> </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/xbee/xbee_atcmd.c" line="1404" column="1" bodyfile="src/xbee/xbee_atcmd.c" bodystart="1404" bodyend="1485"/>
        <references refid="group__xbee__atcmd_1ga710b2223cda09c52a8518c964da88347" compoundref="xbee__atcmd_8c" startline="170" endline="187">_xbee_cmd_handle_to_address</references>
        <references refid="group__hal_1ga2d1678d5a7cc8ce499643f3b8957def4" compoundref="platform_8h" startline="95">EINVAL</references>
        <references refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" compoundref="platform_8h" startline="370">FAR</references>
        <references refid="unionxbee__header__at__request__t_1afa34d393db5fa915716b483011415ddc" compoundref="atcmd_8h" startline="283">xbee_header_at_request_t::frame_type</references>
        <references refid="group__util__byteorder_1ga4b9167199621b390f82c3e5361ba6df6" compoundref="byteorder_8h" startline="127">htobe16</references>
        <references refid="unionxbee__header__at__request__t_1afaac4d50b8627529565a1d55950c44f6" compoundref="atcmd_8h" startline="290">xbee_header_at_request_t::remote</references>
        <references refid="atcmd_8h_1a5eaa2d8338dc2a6573754f6726f54e86" compoundref="atcmd_8h" startline="194">XBEE_CMD_FLAG_QUEUE_CHANGE</references>
        <references refid="atcmd_8h_1a47b4e0186b3bf4fba506d58e5e7ebbe4" compoundref="atcmd_8h" startline="191">XBEE_CMD_FLAG_REMOTE</references>
        <references refid="group__xbee__device_1gga7753bbebaf00d6d64942f64b6ae9b7b9a44cc0afd79605edfc1f4d5cbb7ed62a2" compoundref="device_8h" startline="68">XBEE_FRAME_REMOTE_AT_CMD</references>
        <references refid="group__xbee__device_1ga9faca10d7a960dcd3c0c3ad9c0d59cab" compoundref="xbee__device_8c" startline="61" endline="75">xbee_next_frame_id</references>
        <references refid="group__xbee__atcmd_1ga61c52828070a499e9fbfc4e6edef158b" compoundref="atcmd_8h" startline="274">XBEE_REMOTE_AT_OPT_IMMEDIATE</references>
        <references refid="group__xbee__atcmd_1ga3ca0a18e4e629050e8f1387f72638f69" compoundref="atcmd_8h" startline="271">XBEE_REMOTE_AT_OPT_QUEUE</references>
        <referencedby refid="group__xbee__io_1ga6a1e9ccca3a6d97f1b583e76f1193dca" compoundref="xbee__io_8c" startline="538" endline="586">xbee_io_set_options</referencedby>
      </memberdef>
      <memberdef kind="function" id="group__xbee__atcmd_1ga3b4559f4e729b1c96f5c0d9e4476aa7d" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int _xbee_cmd_handle_response</definition>
        <argsstring>(xbee_dev_t *xbee, const void FAR *rawframe, uint16_t length, void FAR *context)</argsstring>
        <name>_xbee_cmd_handle_response</name>
        <param>
          <type><ref refid="structxbee__dev__t" kindref="compound">xbee_dev_t</ref> *</type>
          <declname>xbee</declname>
        </param>
        <param>
          <type>const void <ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref> *</type>
          <declname>rawframe</declname>
        </param>
        <param>
          <type><ref refid="group__hal__dos_1ga5a8b2dc9e45a9ee81a94ef304fb62505" kindref="member">uint16_t</ref></type>
          <declname>length</declname>
        </param>
        <param>
          <type>void <ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref> *</type>
          <declname>context</declname>
        </param>
        <briefdescription>
<para>Callback handler registered for frame types <ref refid="group__xbee__device_1gga7753bbebaf00d6d64942f64b6ae9b7b9ae66771334070219cd098c8201936cf4a" kindref="member">XBEE_FRAME_LOCAL_AT_RESPONSE</ref> (0x88) and <ref refid="group__xbee__device_1gga7753bbebaf00d6d64942f64b6ae9b7b9a3cd726459592fab4cdc9b5e6bbecb79f" kindref="member">XBEE_FRAME_REMOTE_AT_RESPONSE</ref> (0x97). </para>        </briefdescription>
        <detaileddescription>
<internal><para>Should only be called by the frame dispatcher and unit tests.</para><para>See the function help for <ref refid="group__xbee__device_1ga3e6f2b540e8cec7a69ef0b0166da14ff" kindref="member">xbee_frame_handler_fn()</ref> for full documentation on this function&apos;s API. </para></internal>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/xbee/xbee_atcmd.c" line="1505" column="1" bodyfile="src/xbee/xbee_atcmd.c" bodystart="1505" bodyend="1686"/>
        <references refid="group__xbee__atcmd_1ga1a5aaa930940857f68f245eeb89506b5" compoundref="atcmd_8h" startline="246">command</references>
        <references refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" compoundref="platform_8h" startline="370">FAR</references>
        <references refid="group__xbee__atcmd_1ga03c1016ac46b9df250b994f242cf956a" compoundref="atcmd_8h" startline="243">frame_id</references>
        <references refid="group__xbee__atcmd_1gade818037fd6c985038ff29656089758d" compoundref="atcmd_8h" startline="328">status</references>
        <references refid="group__xbee__atcmd_1ga5bf2410fa8ec37f47f8afeba8dcc7f1b" compoundref="atcmd_8h" startline="360">value</references>
      </memberdef>
      <memberdef kind="function" id="group__xbee__atcmd_1ga9b0ddf7aae7599dc334304f2b642f05f" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int _xbee_cmd_modem_status</definition>
        <argsstring>(xbee_dev_t *xbee, const void FAR *payload, uint16_t length, void FAR *context)</argsstring>
        <name>_xbee_cmd_modem_status</name>
        <param>
          <type><ref refid="structxbee__dev__t" kindref="compound">xbee_dev_t</ref> *</type>
          <declname>xbee</declname>
        </param>
        <param>
          <type>const void <ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref> *</type>
          <declname>payload</declname>
        </param>
        <param>
          <type><ref refid="group__hal__dos_1ga5a8b2dc9e45a9ee81a94ef304fb62505" kindref="member">uint16_t</ref></type>
          <declname>length</declname>
        </param>
        <param>
          <type>void <ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref> *</type>
          <declname>context</declname>
        </param>
        <briefdescription>
<para>Receive modem status frames and update our network address (and payload size) on state changes. </para>        </briefdescription>
        <detaileddescription>
<internal><para><simplesect kind="see"><para><ref refid="group__xbee__device_1ga3e6f2b540e8cec7a69ef0b0166da14ff" kindref="member">xbee_frame_handler_fn()</ref> </para></simplesect>
</para></internal>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/xbee/xbee_atcmd.c" line="1702" column="1" bodyfile="src/xbee/xbee_atcmd.c" bodystart="1702" bodyend="1739"/>
        <references refid="group__hal_1ga2d1678d5a7cc8ce499643f3b8957def4" compoundref="platform_8h" startline="95">EINVAL</references>
        <references refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" compoundref="platform_8h" startline="370">FAR</references>
        <references refid="group__xbee__atcmd_1gade818037fd6c985038ff29656089758d" compoundref="atcmd_8h" startline="328">status</references>
        <references refid="group__xbee__atcmd_1ga12317255ca84c2539b7d7a58816eccab" compoundref="xbee__atcmd_8c" startline="764" endline="808">xbee_cmd_query_device</references>
        <references refid="group__xbee__device_1ga057ed15b292ea3e48a138c6737fb0339" compoundref="device_8h" startline="543">XBEE_MODEM_STATUS_COORD_START</references>
        <references refid="group__xbee__device_1ga2e3f5ffd01da92dd4a25257d8bc005bc" compoundref="device_8h" startline="537">XBEE_MODEM_STATUS_JOINED</references>
        <references refid="group__xbee__device_1ga190661653f541a9b694103dbd27fd284" compoundref="device_8h" startline="557">XBEE_MODEM_STATUS_KEY_ESTABLISHED</references>
        <references refid="group__hal_1gacddb73dac3fd1bdec26cd7dc0a652c00" compoundref="platform_8h" startline="399">XBEE_UNUSED_PARAMETER</references>
      </memberdef>
      <memberdef kind="function" id="group__xbee__atcmd_1ga6b157fe048c0082253056a7bda0ba9bb" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int xbee_cmd_simple</definition>
        <argsstring>(xbee_dev_t *xbee, const char FAR command[3], uint32_t value)</argsstring>
        <name>xbee_cmd_simple</name>
        <param>
          <type><ref refid="structxbee__dev__t" kindref="compound">xbee_dev_t</ref> *</type>
          <declname>xbee</declname>
        </param>
        <param>
          <type>const char <ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref></type>
          <declname>command</declname>
          <array>[3]</array>
        </param>
        <param>
          <type><ref refid="group__hal__dos_1ga09a1e304d66d35dd47daffee9731edaa" kindref="member">uint32_t</ref></type>
          <declname>value</declname>
        </param>
        <briefdescription>
<para>Simple interface for sending a command with a parameter to the local XBee without checking for a response. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">xbee</parametername>
</parameternamelist>
<parameterdescription>
<para>XBee device to use as the target.</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">command</parametername>
</parameternamelist>
<parameterdescription>
<para>Two-letter AT Command to send (e.g., &quot;ID&quot;, &quot;CH&quot;, etc.).</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">value</parametername>
</parameternamelist>
<parameterdescription>
<para>Value to use as the parameter to the AT Command.</para></parameterdescription>
</parameteritem>
</parameterlist>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>0</parametername>
</parameternamelist>
<parameterdescription>
<para>command sent </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>-EINVAL</parametername>
</parameternamelist>
<parameterdescription>
<para>an invalid parameter was passed to the function </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>-EBUSY</parametername>
</parameternamelist>
<parameterdescription>
<para>transmit serial buffer is full, or XBee is not accepting serial data (deasserting /CTS signal).</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="see"><para><ref refid="group__xbee__atcmd_1gab73aaf873be6f9e515dcd65748a7f21c" kindref="member">xbee_cmd_create()</ref>, <ref refid="group__xbee__atcmd_1ga06181e54a87d90c30108360d6b433323" kindref="member">xbee_cmd_set_command()</ref>, <ref refid="group__xbee__atcmd_1ga0a5d2e2e87743061c46abd53e379e014" kindref="member">xbee_cmd_set_callback()</ref>, <ref refid="group__xbee__atcmd_1gae478cb2ea9bb07ade86009a65e6d121f" kindref="member">xbee_cmd_set_target()</ref>, <ref refid="group__xbee__atcmd_1ga4295dde3673b07f41e569e333abd9730" kindref="member">xbee_cmd_set_param()</ref>, <ref refid="group__xbee__atcmd_1ga6bd558a2d03eafe29b176f598d76ffd6" kindref="member">xbee_cmd_set_param_bytes()</ref>, <ref refid="group__xbee__atcmd_1ga5b69459e7c47be384c9add2921e507e0" kindref="member">xbee_cmd_set_param_str()</ref>, <ref refid="group__xbee__atcmd_1ga19d16fbaf1da1cc581fbedcb36f7263f" kindref="member">xbee_cmd_execute()</ref> </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/xbee/xbee_atcmd.c" line="1767" column="1" bodyfile="src/xbee/xbee_atcmd.c" bodystart="1767" bodyend="1790"/>
        <references refid="group___s_x_a_1ga4233297bd31be5c273d4fb0758cc54d7" compoundref="sxa_8h" startline="70">PACKED_STRUCT</references>
      </memberdef>
      <memberdef kind="function" id="group__xbee__atcmd_1ga19d16fbaf1da1cc581fbedcb36f7263f" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int xbee_cmd_execute</definition>
        <argsstring>(xbee_dev_t *xbee, const char FAR command[3], const void FAR *data, uint8_t length)</argsstring>
        <name>xbee_cmd_execute</name>
        <param>
          <type><ref refid="structxbee__dev__t" kindref="compound">xbee_dev_t</ref> *</type>
          <declname>xbee</declname>
        </param>
        <param>
          <type>const char <ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref></type>
          <declname>command</declname>
          <array>[3]</array>
        </param>
        <param>
          <type>const void <ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref> *</type>
          <declname>data</declname>
        </param>
        <param>
          <type><ref refid="group__hal__dos_1gae1affc9ca37cfb624959c866a73f83c2" kindref="member">uint8_t</ref></type>
          <declname>length</declname>
        </param>
        <briefdescription>
<para>Simple interface for sending a command with an optional parameter to the local XBee without checking for a response. </para>        </briefdescription>
        <detaileddescription>
<para>For an asynchronous method of sending AT commands and getting the response, see xbee_cmd_create, the xbee_cmd_set_* functions and xbee_cmd_send.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">xbee</parametername>
</parameternamelist>
<parameterdescription>
<para>XBee device to use as the target.</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">command</parametername>
</parameternamelist>
<parameterdescription>
<para>Two-letter AT Command to send (e.g., &quot;ID&quot;, &quot;CH&quot;, etc.).</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">data</parametername>
</parameternamelist>
<parameterdescription>
<para>Optional big-endian (MSB-first) value to assign to <emphasis>command</emphasis>. Use NULL if <emphasis>command</emphasis> doesn&apos;t take a parameter.</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">length</parametername>
</parameternamelist>
<parameterdescription>
<para>Number of bytes in <emphasis>data</emphasis>; ignored if <emphasis>data</emphasis> is NULL.</para></parameterdescription>
</parameteritem>
</parameterlist>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>0</parametername>
</parameternamelist>
<parameterdescription>
<para>command sent </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>-EINVAL</parametername>
</parameternamelist>
<parameterdescription>
<para>an invalid parameter was passed to the function </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>-EBUSY</parametername>
</parameternamelist>
<parameterdescription>
<para>transmit serial buffer is full, or XBee is not accepting serial data (deasserting /CTS signal).</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="see"><para><ref refid="group__xbee__atcmd_1gab73aaf873be6f9e515dcd65748a7f21c" kindref="member">xbee_cmd_create()</ref>, <ref refid="group__xbee__atcmd_1ga06181e54a87d90c30108360d6b433323" kindref="member">xbee_cmd_set_command()</ref>, <ref refid="group__xbee__atcmd_1ga0a5d2e2e87743061c46abd53e379e014" kindref="member">xbee_cmd_set_callback()</ref>, <ref refid="group__xbee__atcmd_1gae478cb2ea9bb07ade86009a65e6d121f" kindref="member">xbee_cmd_set_target()</ref>, <ref refid="group__xbee__atcmd_1ga4295dde3673b07f41e569e333abd9730" kindref="member">xbee_cmd_set_param()</ref>, <ref refid="group__xbee__atcmd_1ga6bd558a2d03eafe29b176f598d76ffd6" kindref="member">xbee_cmd_set_param_bytes()</ref>, <ref refid="group__xbee__atcmd_1ga5b69459e7c47be384c9add2921e507e0" kindref="member">xbee_cmd_set_param_str()</ref>, <ref refid="group__xbee__atcmd_1ga6b157fe048c0082253056a7bda0ba9bb" kindref="member">xbee_cmd_simple()</ref> </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/xbee/xbee_atcmd.c" line="1825" column="1" bodyfile="src/xbee/xbee_atcmd.c" bodystart="1825" bodyend="1842"/>
        <referencedby refid="group__xbee__discovery_1ga12d6a10c8348cf5eb9636bbf02420dd3" compoundref="xbee__discovery_8c" startline="271" endline="283">xbee_disc_discover_nodes</referencedby>
      </memberdef>
      <memberdef kind="function" id="group__xbee__atcmd_1ga42768d8f8aa841ed4f42396cff2815aa" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void xbee_identify</definition>
        <argsstring>(xbee_dev_t *xbee, bool_t identify)</argsstring>
        <name>xbee_identify</name>
        <param>
          <type><ref refid="structxbee__dev__t" kindref="compound">xbee_dev_t</ref> *</type>
          <declname>xbee</declname>
        </param>
        <param>
          <type><ref refid="group__hal__dos_1ga04dd5074964518403bf944f2b240a5f8" kindref="member">bool_t</ref></type>
          <declname>identify</declname>
        </param>
        <briefdescription>
<para>Programs with the ZCL Identify Server Cluster can call this function in their main loop to have the XBee module&apos;s association LED flash fast (100ms cycle) when in Identify Mode. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">xbee</parametername>
</parameternamelist>
<parameterdescription>
<para>device to identify </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">identify</parametername>
</parameternamelist>
<parameterdescription>
<para>TRUE if XBee should be in identify mode</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="see"><para><ref refid="group__xbee__device_1gaece12bbe1dd3135e51f714b485ed0cf2" kindref="member">xbee_zcl_identify</ref>, <ref refid="group__zcl__identify_1ga95b00d55b861c1ea6033c16794ae818d" kindref="member">zcl_identify_isactive</ref>, <ref refid="group__zcl__identify_1gaeae5b3a460629b095247d160235ec586" kindref="member">ZCL_CLUST_ENTRY_IDENTIFY_SERVER</ref> </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/xbee/xbee_atcmd.c" line="1847" column="1" bodyfile="src/xbee/xbee_atcmd.c" bodystart="1847" bodyend="1857"/>
      </memberdef>
      </sectiondef>
    <briefdescription>
<para>Code related to sending AT command requests and processing the responses. </para>    </briefdescription>
    <detaileddescription>
<para><xrefsect id="todo_1_todo000006"><xreftitle>Todo</xreftitle><xrefdescription><para>move xbee_cmd_simple and xbee_identify into xbee_device layer?</para></xrefdescription></xrefsect></para><para><xrefsect id="todo_1_todo000007"><xreftitle>Todo</xreftitle><xrefdescription><para>Add code to return an error (and disable the stack) if the XBee responds with an IEEE address not in Digi&apos;s allocation?</para></xrefdescription></xrefsect></para><para><xrefsect id="todo_1_todo000008"><xreftitle>Todo</xreftitle><xrefdescription><para>review todo list at the top of the file <ndash/> lots to do</para></xrefdescription></xrefsect></para><para><itemizedlist>
<listitem><para>Need different levels of VERBOSE output.<itemizedlist>
<listitem><para>Errors only</para></listitem><listitem><para>Errors + program flow?</para></listitem><listitem><para>Lots of details</para></listitem><listitem><para>Everything including packet dumps?</para></listitem></itemizedlist>
</para></listitem><listitem><para>Add flag for &quot;multiple responses expected&quot; <ndash/> taken care of by callback returning 1?</para></listitem><listitem><para>Add a function to change the timeout for a request (ATND, ATIS?).</para></listitem><listitem><para>Create unit tests<itemizedlist>
<listitem><para>error on full table, insert dupe into table, purge expired entries from table, dispatcher purges entry on 0 return, dispatcher keeps entry on -1 return </para></listitem></itemizedlist>
</para></listitem></itemizedlist>
</para>    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="comment">/*</highlight></codeline>
<codeline lineno="2"><highlight class="comment"><sp/>*<sp/>Copyright<sp/>(c)<sp/>2009-2013<sp/>Digi<sp/>International<sp/>Inc.,</highlight></codeline>
<codeline lineno="3"><highlight class="comment"><sp/>*<sp/>All<sp/>rights<sp/>not<sp/>expressly<sp/>granted<sp/>are<sp/>reserved.</highlight></codeline>
<codeline lineno="4"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="5"><highlight class="comment"><sp/>*<sp/>This<sp/>Source<sp/>Code<sp/>Form<sp/>is<sp/>subject<sp/>to<sp/>the<sp/>terms<sp/>of<sp/>the<sp/>Mozilla<sp/>Public</highlight></codeline>
<codeline lineno="6"><highlight class="comment"><sp/>*<sp/>License,<sp/>v.<sp/>2.0.<sp/>If<sp/>a<sp/>copy<sp/>of<sp/>the<sp/>MPL<sp/>was<sp/>not<sp/>distributed<sp/>with<sp/>this<sp/>file,</highlight></codeline>
<codeline lineno="7"><highlight class="comment"><sp/>*<sp/>You<sp/>can<sp/>obtain<sp/>one<sp/>at<sp/>http://mozilla.org/MPL/2.0/.</highlight></codeline>
<codeline lineno="8"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="9"><highlight class="comment"><sp/>*<sp/>Digi<sp/>International<sp/>Inc.<sp/>11001<sp/>Bren<sp/>Road<sp/>East,<sp/>Minnetonka,<sp/>MN<sp/>55343</highlight></codeline>
<codeline lineno="10"><highlight class="comment"><sp/>*<sp/>=======================================================================</highlight></codeline>
<codeline lineno="11"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="12"><highlight class="normal"></highlight></codeline>
<codeline lineno="43"><highlight class="comment">/***<sp/>BeginHeader<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="44"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;errno.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="45"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;stddef.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="46"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;stdio.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="47"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;string.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="48"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;time.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="49"><highlight class="normal"></highlight></codeline>
<codeline lineno="50"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="platform_8h" kindref="compound">xbee/platform.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="51"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="byteorder_8h" kindref="compound">xbee/byteorder.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="52"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="atcmd_8h" kindref="compound">xbee/atcmd.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="53"><highlight class="normal"></highlight></codeline>
<codeline lineno="54"><highlight class="normal"></highlight><highlight class="preprocessor">#ifndef<sp/>__DC__</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="55"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/>#define<sp/>_xbee_atcmd_debug</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="56"><highlight class="normal"></highlight><highlight class="preprocessor">#elif<sp/>defined<sp/>XBEE_ATCMD_DEBUG</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="57"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/>#define<sp/>_xbee_atcmd_debug<sp/><sp/>__debug</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="58"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="59"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/>#define<sp/>_xbee_atcmd_debug<sp/><sp/>__nodebug</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="60"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="61"><highlight class="normal"></highlight><highlight class="comment">/***<sp/>EndHeader<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="62"><highlight class="normal"></highlight></codeline>
<codeline lineno="63"><highlight class="normal"></highlight></codeline>
<codeline lineno="64"><highlight class="normal"></highlight><highlight class="comment">/***<sp/>BeginHeader<sp/>xbee_cmd_request_table<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="65"><highlight class="normal"></highlight><highlight class="comment">/***<sp/>EndHeader<sp/>*/</highlight></codeline>
<codeline lineno="67" refid="group__xbee__atcmd_1ga551531248de3d539dfb15bd89cf4734b" refkind="member"><highlight class="normal"><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/><ref refid="structxbee__cmd__request__t" kindref="compound">xbee_cmd_request_t</ref><sp/><ref refid="group__xbee__atcmd_1ga551531248de3d539dfb15bd89cf4734b" kindref="member">xbee_cmd_request_table</ref>[<ref refid="group__xbee__atcmd_1gaf992e9b985e2b1eb185ef3d2d38a01c0" kindref="member">XBEE_CMD_REQUEST_TABLESIZE</ref>];</highlight></codeline>
<codeline lineno="68"><highlight class="normal"></highlight></codeline>
<codeline lineno="69"><highlight class="normal"></highlight></codeline>
<codeline lineno="70"><highlight class="normal"></highlight><highlight class="comment">/***<sp/>BeginHeader<sp/>xbee_cmd_tick<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="71"><highlight class="normal"></highlight><highlight class="comment">/***<sp/>EndHeader<sp/>*/</highlight></codeline>
<codeline lineno="80"><highlight class="normal">_xbee_atcmd_debug</highlight></codeline>
<codeline lineno="81" refid="group__xbee__atcmd_1ga7ef08f6771da8c18234bbffca2be4ff3" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group__xbee__atcmd_1ga7ef08f6771da8c18234bbffca2be4ff3" kindref="member">xbee_cmd_tick</ref>(<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="82"><highlight class="normal">{</highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="group__hal__dos_1gae1affc9ca37cfb624959c866a73f83c2" kindref="member">uint8_t</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>last_time;</highlight></codeline>
<codeline lineno="84"><highlight class="normal"><sp/><sp/><sp/><ref refid="group__hal__dos_1gae1affc9ca37cfb624959c866a73f83c2" kindref="member">uint8_t</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>now;</highlight></codeline>
<codeline lineno="85"><highlight class="normal"><sp/><sp/><sp/>uint_fast8_t<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>i;</highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>reuse;</highlight></codeline>
<codeline lineno="87"><highlight class="normal"><sp/><sp/><sp/><ref refid="structxbee__cmd__request__t" kindref="compound">xbee_cmd_request_t</ref><sp/><sp/><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/>*request;</highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/><sp/><sp/><ref refid="structxbee__cmd__response__t" kindref="compound">xbee_cmd_response_t</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>expired;</highlight></codeline>
<codeline lineno="89"><highlight class="normal"><sp/><sp/><sp/><ref refid="structxbee__dev__t" kindref="compound">xbee_dev_t</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*device;</highlight></codeline>
<codeline lineno="90"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>count<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="91"><highlight class="normal"></highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>only<sp/>process<sp/>expirations<sp/>once<sp/>per<sp/>second</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/><sp/><sp/>now<sp/>=<sp/>(<ref refid="group__hal__dos_1gae1affc9ca37cfb624959c866a73f83c2" kindref="member">uint8_t</ref>)<sp/>xbee_seconds_timer();</highlight></codeline>
<codeline lineno="94"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(last_time<sp/>==<sp/>now)</highlight></codeline>
<codeline lineno="95"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="96"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="98"><highlight class="normal"><sp/><sp/><sp/>last_time<sp/>=<sp/>now;</highlight></codeline>
<codeline lineno="99"><highlight class="normal"></highlight></codeline>
<codeline lineno="100"><highlight class="normal"><sp/><sp/><sp/>memset(<sp/>&amp;expired,<sp/>0,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal"><sp/>expired);</highlight></codeline>
<codeline lineno="101"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>set<sp/>the<sp/>timeout<sp/>flag,<sp/>but<sp/>also<sp/>make<sp/>sure<sp/>STATUS<sp/>is<sp/>invalid</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="102"><highlight class="normal"><sp/><sp/><sp/>expired.<ref refid="structxbee__cmd__response__t_1a1e87af3c18a2fd36c61faf89949bdc3f" kindref="member">flags</ref><sp/>=<sp/>XBEE_CMD_RESP_FLAG_TIMEOUT<sp/>|<sp/>XBEE_CMD_RESP_MASK_STATUS;</highlight></codeline>
<codeline lineno="103"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>walk<sp/>through<sp/>the<sp/>table<sp/>of<sp/>requests,<sp/>looking<sp/>for<sp/>expired<sp/>entries</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(request<sp/>=<sp/><ref refid="group__xbee__atcmd_1ga551531248de3d539dfb15bd89cf4734b" kindref="member">xbee_cmd_request_table</ref>,<sp/>i<sp/>=<sp/><ref refid="group__xbee__atcmd_1gaf992e9b985e2b1eb185ef3d2d38a01c0" kindref="member">XBEE_CMD_REQUEST_TABLESIZE</ref>;</highlight></codeline>
<codeline lineno="105"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>i;<sp/>++request,<sp/>--i)</highlight></codeline>
<codeline lineno="106"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(request-&gt;device<sp/>&amp;&amp;<sp/><ref refid="group__hal_1ga858c3c1caa899efd6af9ee8a0fe09246" kindref="member">XBEE_CHECK_TIMEOUT_SEC</ref>(request-&gt;timeout))</highlight></codeline>
<codeline lineno="108"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="109"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>++count;</highlight></codeline>
<codeline lineno="110"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>expired.<ref refid="structxbee__cmd__response__t_1a1542542d7a68344e5d31df924a254df4" kindref="member">handle</ref><sp/>=</highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>((<ref refid="group__xbee__atcmd_1gaf992e9b985e2b1eb185ef3d2d38a01c0" kindref="member">XBEE_CMD_REQUEST_TABLESIZE</ref><sp/>-<sp/>i)<sp/>&lt;&lt;<sp/>8)<sp/>|<sp/>request-&gt;sequence;</highlight></codeline>
<codeline lineno="112"><highlight class="normal"></highlight></codeline>
<codeline lineno="113"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#ifdef<sp/>XBEE_ATCMD_VERBOSE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="114"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(<sp/></highlight><highlight class="stringliteral">&quot;%s:<sp/>request<sp/>0x%04x<sp/>timed<sp/>out\n&quot;</highlight><highlight class="normal">,<sp/>__FUNCTION__,</highlight></codeline>
<codeline lineno="115"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>expired.<ref refid="structxbee__cmd__response__t_1a1542542d7a68344e5d31df924a254df4" kindref="member">handle</ref>);</highlight></codeline>
<codeline lineno="116"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>reuse<sp/>=<sp/><ref refid="group__xbee__atcmd_1gad51a6fee7843df5a5bfd6f3957465426" kindref="member">XBEE_ATCMD_DONE</ref>;</highlight></codeline>
<codeline lineno="118"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(request-&gt;callback)</highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>expired.<ref refid="structxbee__cmd__response__t_1ac780e07a2b2cd8df18f56240588090c5" kindref="member">device</ref><sp/>=<sp/>request-&gt;device;</highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>expired.<ref refid="structxbee__cmd__response__t_1aa91f8e864e06077c354e5f5216547758" kindref="member">context</ref><sp/>=<sp/>request-&gt;context;</highlight></codeline>
<codeline lineno="122"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>expired.<ref refid="structxbee__cmd__response__t_1aa1e66c60bb56acaced6ca2646fd44616" kindref="member">command</ref>.w<sp/>=<sp/>request-&gt;command.w;</highlight></codeline>
<codeline lineno="123"><highlight class="normal"></highlight></codeline>
<codeline lineno="124"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#ifdef<sp/>XBEE_ATCMD_VERBOSE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(<sp/></highlight><highlight class="stringliteral">&quot;%s:<sp/>dispatch<sp/>to<sp/>handler<sp/>@%p<sp/>w/context<sp/>%&quot;</highlight><highlight class="normal"><sp/><ref refid="group__hal_1ga8429a3beb3448b89cb7c3877b8909369" kindref="member">PRIpFAR</ref><sp/></highlight><highlight class="stringliteral">&quot;\n&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>__FUNCTION__,<sp/>request-&gt;callback,<sp/>expired.<ref refid="structxbee__cmd__response__t_1aa91f8e864e06077c354e5f5216547758" kindref="member">context</ref>);</highlight></codeline>
<codeline lineno="127"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>reuse<sp/>=<sp/>request-&gt;callback(<sp/>&amp;expired);</highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(reuse<sp/>!=<sp/><ref refid="group__xbee__atcmd_1ga9a5078393806d67903c87b3c82597fb1" kindref="member">XBEE_ATCMD_REUSE</ref>)</highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="132"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#ifdef<sp/>XBEE_ATCMD_VERBOSE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="133"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(<sp/></highlight><highlight class="stringliteral">&quot;%s:<sp/>releasing<sp/>expired<sp/>request<sp/>0x%04x\n&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>__FUNCTION__,<sp/>expired.<ref refid="structxbee__cmd__response__t_1a1542542d7a68344e5d31df924a254df4" kindref="member">handle</ref>);</highlight></codeline>
<codeline lineno="135"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="136"><highlight class="normal"></highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>device<sp/>=<sp/>request-&gt;device;</highlight></codeline>
<codeline lineno="138"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__xbee__atcmd_1ga899d5ef84ca5790c3c76b965f88874e0" kindref="member">_xbee_cmd_release_request</ref>(<sp/>request);</highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(device-&gt;<ref refid="group__xbee__device_1ga9ac684521a8154bddc272049a7a61b73" kindref="member">flags</ref><sp/>&amp;<sp/><ref refid="group__xbee__device_1gga80478d6b87ebdf34b5ec06e5ca6f309ea08b02fa597f36fd613370d28ab5a0e81" kindref="member">XBEE_DEV_FLAG_QUERY_REFRESH</ref>)</highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>If<sp/>we&apos;re<sp/>waiting<sp/>to<sp/>refresh<sp/>network<sp/>settings<sp/>due<sp/>to<sp/>a<sp/>full</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>command<sp/>table,<sp/>now&apos;s<sp/>our<sp/>chance<sp/>since<sp/>we<sp/>just<sp/>opened<sp/>a<sp/>slot.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="143"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__xbee__atcmd_1ga12317255ca84c2539b7d7a58816eccab" kindref="member">xbee_cmd_query_device</ref>(<sp/>device,<sp/>1);</highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="147"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="148"><highlight class="normal"></highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>count;</highlight></codeline>
<codeline lineno="150"><highlight class="normal">}</highlight></codeline>
<codeline lineno="151"><highlight class="normal"></highlight></codeline>
<codeline lineno="152"><highlight class="normal"></highlight><highlight class="comment">/***<sp/>BeginHeader<sp/>_xbee_cmd_handle_to_address<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="153"><highlight class="normal"><ref refid="structxbee__cmd__request__t" kindref="compound">xbee_cmd_request_t</ref><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/>*<ref refid="group__xbee__atcmd_1ga710b2223cda09c52a8518c964da88347" kindref="member">_xbee_cmd_handle_to_address</ref>(<sp/><ref refid="group__hal__dos_1ga2140805d08462d474b82ddc8d1c2f3e6" kindref="member">int16_t</ref><sp/>handle);</highlight></codeline>
<codeline lineno="154"><highlight class="normal"></highlight><highlight class="comment">/***<sp/>EndHeader<sp/>*/</highlight></codeline>
<codeline lineno="169"><highlight class="normal">_xbee_atcmd_debug</highlight></codeline>
<codeline lineno="170" refid="group__xbee__atcmd_1ga710b2223cda09c52a8518c964da88347" refkind="member"><highlight class="normal"><ref refid="structxbee__cmd__request__t" kindref="compound">xbee_cmd_request_t</ref><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/>*<ref refid="group__xbee__atcmd_1ga710b2223cda09c52a8518c964da88347" kindref="member">_xbee_cmd_handle_to_address</ref>(<sp/><ref refid="group__hal__dos_1ga2140805d08462d474b82ddc8d1c2f3e6" kindref="member">int16_t</ref><sp/>handle)</highlight></codeline>
<codeline lineno="171"><highlight class="normal">{</highlight></codeline>
<codeline lineno="172"><highlight class="normal"><sp/><sp/><sp/><ref refid="structxbee__cmd__request__t" kindref="compound">xbee_cmd_request_t</ref><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/>*request;</highlight></codeline>
<codeline lineno="173"><highlight class="normal"></highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(handle<sp/>&lt;<sp/>0<sp/>||<sp/>handle<sp/>&gt;=<sp/>(<ref refid="group__xbee__atcmd_1gaf992e9b985e2b1eb185ef3d2d38a01c0" kindref="member">XBEE_CMD_REQUEST_TABLESIZE</ref><sp/>&lt;&lt;<sp/>8))</highlight></codeline>
<codeline lineno="175"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="176"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>NULL;</highlight></codeline>
<codeline lineno="177"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="178"><highlight class="normal"></highlight></codeline>
<codeline lineno="179"><highlight class="normal"><sp/><sp/><sp/>request<sp/>=<sp/>&amp;<ref refid="group__xbee__atcmd_1ga551531248de3d539dfb15bd89cf4734b" kindref="member">xbee_cmd_request_table</ref>[handle<sp/>&gt;&gt;<sp/>8];</highlight></codeline>
<codeline lineno="180"><highlight class="normal"></highlight></codeline>
<codeline lineno="181"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(request-&gt;sequence<sp/>!=<sp/>(handle<sp/>&amp;<sp/>0x00FF))</highlight></codeline>
<codeline lineno="182"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="183"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>NULL;</highlight></codeline>
<codeline lineno="184"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="185"><highlight class="normal"></highlight></codeline>
<codeline lineno="186"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>request;</highlight></codeline>
<codeline lineno="187"><highlight class="normal">}</highlight></codeline>
<codeline lineno="188"><highlight class="normal"></highlight></codeline>
<codeline lineno="189"><highlight class="normal"></highlight></codeline>
<codeline lineno="190"><highlight class="normal"></highlight></codeline>
<codeline lineno="191"><highlight class="normal"></highlight><highlight class="comment">/***<sp/>BeginHeader<sp/>xbee_cmd_list_execute<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="192"><highlight class="normal"></highlight><highlight class="comment">/***<sp/>EndHeader<sp/>*/</highlight></codeline>
<codeline lineno="196"><highlight class="normal">_xbee_atcmd_debug</highlight></codeline>
<codeline lineno="197" refid="group__xbee__atcmd_1ga4931ffe3ba31eaf16eee72ac0a95015b" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group__xbee__atcmd_1ga4931ffe3ba31eaf16eee72ac0a95015b" kindref="member">_xbee_cmd_issue_list</ref>(<sp/><ref refid="structxbee__dev__t" kindref="compound">xbee_dev_t</ref><sp/>*xbee,</highlight></codeline>
<codeline lineno="198"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="structxbee__command__list__context__t" kindref="compound">xbee_command_list_context_t</ref><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/>*clc,</highlight></codeline>
<codeline lineno="199"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structxbee__cmd__response__t" kindref="compound">xbee_cmd_response_t</ref><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/>*response</highlight></codeline>
<codeline lineno="200"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="201"><highlight class="normal">{</highlight></codeline>
<codeline lineno="202"><highlight class="normal"><sp/><sp/><sp/><ref refid="group__hal__dos_1gae1affc9ca37cfb624959c866a73f83c2" kindref="member">uint8_t</ref><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/><sp/><sp/><sp/>*devptr;</highlight></codeline>
<codeline lineno="203"><highlight class="normal"><sp/><sp/><sp/><ref refid="group__hal__dos_1ga2140805d08462d474b82ddc8d1c2f3e6" kindref="member">int16_t</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>request;</highlight></codeline>
<codeline lineno="204"><highlight class="normal"><sp/><sp/><sp/><ref refid="group__hal__dos_1ga09a1e304d66d35dd47daffee9731edaa" kindref="member">uint32_t</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/>param;</highlight></codeline>
<codeline lineno="205"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structxbee__atcmd__reg__t" kindref="compound">xbee_atcmd_reg_t</ref><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/>*reg<sp/>=<sp/>clc-&gt;list<sp/>+<sp/>clc-&gt;index;</highlight></codeline>
<codeline lineno="206"><highlight class="normal"></highlight></codeline>
<codeline lineno="207"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>XBEE_ATCMD_VERBOSE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="208"><highlight class="normal"><sp/><sp/><sp/>printf(<sp/></highlight><highlight class="stringliteral">&quot;%s:<sp/>next<sp/>command<sp/>AT%c%c\n&quot;</highlight><highlight class="normal">,<sp/>__FUNCTION__,</highlight></codeline>
<codeline lineno="209"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>reg-&gt;command.str[0],<sp/>reg-&gt;command.str[1]);</highlight></codeline>
<codeline lineno="210"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="211"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(response)</highlight></codeline>
<codeline lineno="212"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="213"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>request<sp/>=<sp/>response-&gt;handle;</highlight></codeline>
<codeline lineno="214"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="215"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="216"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="217"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>request<sp/>=<sp/><ref refid="group__xbee__atcmd_1gab73aaf873be6f9e515dcd65748a7f21c" kindref="member">xbee_cmd_create</ref>(<sp/>xbee,<sp/>clc-&gt;list-&gt;command.str);</highlight></codeline>
<codeline lineno="218"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(request<sp/>&lt;<sp/>0)</highlight></codeline>
<codeline lineno="219"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="220"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>XBEE_ATCMD_VERBOSE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="221"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(<sp/></highlight><highlight class="stringliteral">&quot;%s:<sp/>can&apos;t<sp/>create<sp/>request<sp/>(%d)\n&quot;</highlight><highlight class="normal">,<sp/>__FUNCTION__,</highlight></codeline>
<codeline lineno="222"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>request);</highlight></codeline>
<codeline lineno="223"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="224"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>request;</highlight></codeline>
<codeline lineno="225"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="226"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="227"><highlight class="normal"></highlight></codeline>
<codeline lineno="228"><highlight class="normal"><sp/><sp/><sp/><ref refid="group__xbee__atcmd_1ga06181e54a87d90c30108360d6b433323" kindref="member">xbee_cmd_set_command</ref>(<sp/>request,<sp/>reg-&gt;command.str);</highlight></codeline>
<codeline lineno="229"><highlight class="normal"><sp/><sp/><sp/>devptr<sp/>=<sp/>(<ref refid="group__hal__dos_1gae1affc9ca37cfb624959c866a73f83c2" kindref="member">uint8_t</ref><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/>*)clc-&gt;base<sp/>+<sp/>reg-&gt;offset;</highlight></codeline>
<codeline lineno="230"><highlight class="normal"><sp/><sp/><sp/>switch<sp/>(reg-&gt;type)</highlight></codeline>
<codeline lineno="231"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="232"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="233"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>This<sp/>is<sp/>not<sp/>a<sp/>setting<sp/>command,<sp/>clear<sp/>the<sp/>parameter.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="234"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__xbee__atcmd_1ga6bd558a2d03eafe29b176f598d76ffd6" kindref="member">xbee_cmd_set_param_bytes</ref>(<sp/>request,<sp/>NULL,<sp/>0);</highlight></codeline>
<codeline lineno="235"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="236"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__xbee__atcmd_1gga1bd8ecd38c107579d20ded3c79a7d70ba0eb2ffa9c761ab74335695f818ce8410" kindref="member">XBEE_CLT_SET_8</ref>:</highlight></codeline>
<codeline lineno="237"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__xbee__atcmd_1ga4295dde3673b07f41e569e333abd9730" kindref="member">xbee_cmd_set_param</ref>(<sp/>request,<sp/>reg-&gt;bytes);</highlight></codeline>
<codeline lineno="238"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="239"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__xbee__atcmd_1gga1bd8ecd38c107579d20ded3c79a7d70babea87822fa7171a077a3c1c88e3fa7dc" kindref="member">XBEE_CLT_SET</ref>:</highlight></codeline>
<codeline lineno="240"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__xbee__atcmd_1ga6bd558a2d03eafe29b176f598d76ffd6" kindref="member">xbee_cmd_set_param_bytes</ref>(<sp/>request,<sp/>devptr,<sp/>reg-&gt;bytes);</highlight></codeline>
<codeline lineno="241"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="242"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__xbee__atcmd_1gga1bd8ecd38c107579d20ded3c79a7d70baef4f9c1bf1001814d8b9e44c08c91c38" kindref="member">XBEE_CLT_SET_STR</ref>:</highlight></codeline>
<codeline lineno="243"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__xbee__atcmd_1ga5b69459e7c47be384c9add2921e507e0" kindref="member">xbee_cmd_set_param_str</ref>(<sp/>request,<sp/>(</highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/>*)devptr);</highlight></codeline>
<codeline lineno="244"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="245"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__xbee__atcmd_1gga1bd8ecd38c107579d20ded3c79a7d70ba32b0b8fbea9aa5c2d6a8886ccbdbf609" kindref="member">XBEE_CLT_SET_BE</ref>:</highlight></codeline>
<codeline lineno="246"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(reg-&gt;bytes)</highlight></codeline>
<codeline lineno="247"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="248"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="249"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>1:</highlight></codeline>
<codeline lineno="250"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>param<sp/>=<sp/>*(<ref refid="group__hal__dos_1gae1affc9ca37cfb624959c866a73f83c2" kindref="member">uint8_t</ref><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/>*)devptr;</highlight></codeline>
<codeline lineno="251"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="252"><highlight class="normal"></highlight></codeline>
<codeline lineno="253"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>2:</highlight></codeline>
<codeline lineno="254"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>param<sp/>=<sp/>xbee_get_unaligned16(<sp/>devptr);</highlight></codeline>
<codeline lineno="255"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="256"><highlight class="normal"></highlight></codeline>
<codeline lineno="257"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>4:</highlight></codeline>
<codeline lineno="258"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>param<sp/>=<sp/>xbee_get_unaligned32(<sp/>devptr);</highlight></codeline>
<codeline lineno="259"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="260"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="261"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__xbee__atcmd_1ga4295dde3673b07f41e569e333abd9730" kindref="member">xbee_cmd_set_param</ref>(<sp/>request,<sp/>param);</highlight></codeline>
<codeline lineno="262"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="263"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="264"><highlight class="normal"></highlight></codeline>
<codeline lineno="265"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>request;</highlight></codeline>
<codeline lineno="266"><highlight class="normal">}</highlight></codeline>
<codeline lineno="267"><highlight class="normal"></highlight></codeline>
<codeline lineno="278"><highlight class="comment">/*</highlight></codeline>
<codeline lineno="279"><highlight class="comment"><sp/><sp/><sp/>@todo<sp/>Figure<sp/>out<sp/>timeouts<sp/>for<sp/>this<sp/>table.</highlight></codeline>
<codeline lineno="280"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>What<sp/>if<sp/>there&apos;s<sp/>a<sp/>timeout?<sp/><sp/>Should<sp/>we<sp/>resend<sp/>or<sp/>move<sp/>on<sp/>to<sp/>the</highlight></codeline>
<codeline lineno="281"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>next<sp/>register<sp/>to<sp/>query?<sp/>Currently,<sp/>it<sp/>halts<sp/>the<sp/>entire<sp/>list.</highlight></codeline>
<codeline lineno="282"><highlight class="comment">*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="283"><highlight class="normal">_xbee_atcmd_debug</highlight></codeline>
<codeline lineno="284" refid="group__xbee__atcmd_1ga9f1bad1621dfd1d13b6f1102fc592d13" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group__xbee__atcmd_1ga9f1bad1621dfd1d13b6f1102fc592d13" kindref="member">_xbee_cmd_list_callback</ref>(<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structxbee__cmd__response__t" kindref="compound">xbee_cmd_response_t</ref><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/>*response)</highlight></codeline>
<codeline lineno="285"><highlight class="normal">{</highlight></codeline>
<codeline lineno="286"><highlight class="normal"><sp/><sp/><sp/><ref refid="structxbee__dev__t" kindref="compound">xbee_dev_t</ref><sp/>*xbee;</highlight></codeline>
<codeline lineno="287"><highlight class="normal"><sp/><sp/><sp/><ref refid="group__hal__dos_1gae1affc9ca37cfb624959c866a73f83c2" kindref="member">uint8_t</ref><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/>*devptr;</highlight></codeline>
<codeline lineno="288"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structxbee__atcmd__reg__t" kindref="compound">xbee_atcmd_reg_t</ref><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/>*reg;</highlight></codeline>
<codeline lineno="289"><highlight class="normal"><sp/><sp/><sp/><ref refid="structxbee__command__list__context__t" kindref="compound">xbee_command_list_context_t</ref><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/>*clc<sp/>=<sp/>response-&gt;context;</highlight></codeline>
<codeline lineno="290"><highlight class="normal"></highlight></codeline>
<codeline lineno="291"><highlight class="normal"><sp/><sp/><sp/><ref refid="group__hal__dos_1ga2140805d08462d474b82ddc8d1c2f3e6" kindref="member">int16_t</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>request;</highlight></codeline>
<codeline lineno="292"><highlight class="normal"><sp/><sp/><sp/><ref refid="group__hal__dos_1ga5a8b2dc9e45a9ee81a94ef304fb62505" kindref="member">uint16_t</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__xbee__atcmd_1ga1a5aaa930940857f68f245eeb89506b5" kindref="member">command</ref>;</highlight></codeline>
<codeline lineno="293"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>count,<sp/>offset;</highlight></codeline>
<codeline lineno="294"><highlight class="normal"></highlight></codeline>
<codeline lineno="295"><highlight class="normal"><sp/><sp/><sp/>xbee<sp/>=<sp/>response-&gt;device;</highlight></codeline>
<codeline lineno="296"><highlight class="normal"></highlight></codeline>
<codeline lineno="297"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(response-&gt;flags<sp/>&amp;<sp/>XBEE_CMD_RESP_FLAG_TIMEOUT)</highlight></codeline>
<codeline lineno="298"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="299"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>XBEE_ATCMD_VERBOSE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="300"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(<sp/></highlight><highlight class="stringliteral">&quot;%s:<sp/>timed<sp/>out\n&quot;</highlight><highlight class="normal">,<sp/>__FUNCTION__);</highlight></codeline>
<codeline lineno="301"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="302"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>clc-&gt;status<sp/>=<sp/>XBEE_COMMAND_LIST_TIMEOUT;</highlight></codeline>
<codeline lineno="303"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Find<sp/>&apos;end<sp/>handler&apos;<sp/>callback...</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="304"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(reg<sp/>=<sp/>clc-&gt;list;<sp/>XBEE_ATCMD_REG_VALID(reg);<sp/>++reg);</highlight></codeline>
<codeline lineno="305"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(reg-&gt;callback)</highlight></codeline>
<codeline lineno="306"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="307"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>A<sp/>final<sp/>callback<sp/>was<sp/>specified<sp/>(via<sp/>XBEE_ATCMD_REG_END_CB)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="308"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>XBEE_ATCMD_VERBOSE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="309"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(<sp/></highlight><highlight class="stringliteral">&quot;%s:<sp/>found<sp/>final<sp/>callback\n&quot;</highlight><highlight class="normal">,<sp/>__FUNCTION__);</highlight></codeline>
<codeline lineno="310"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="311"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>reg-&gt;callback(response,<sp/>reg,<sp/>clc-&gt;base);</highlight></codeline>
<codeline lineno="312"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="313"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__xbee__atcmd_1gad51a6fee7843df5a5bfd6f3957465426" kindref="member">XBEE_ATCMD_DONE</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>give<sp/>up</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="314"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="315"><highlight class="normal"></highlight></codeline>
<codeline lineno="316"><highlight class="normal"><sp/><sp/><sp/>request<sp/>=<sp/>response-&gt;handle;</highlight></codeline>
<codeline lineno="317"><highlight class="normal"><sp/><sp/><sp/>command<sp/>=<sp/>response-&gt;command.w;</highlight></codeline>
<codeline lineno="318"><highlight class="normal"></highlight></codeline>
<codeline lineno="319"><highlight class="normal"><sp/><sp/><sp/>reg<sp/>=<sp/>clc-&gt;list<sp/>+<sp/>clc-&gt;index;</highlight></codeline>
<codeline lineno="320"><highlight class="normal"></highlight></codeline>
<codeline lineno="321"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Basic<sp/>sanity<sp/>check<sp/>that<sp/>response<sp/>was<sp/>for<sp/>the<sp/>command<sp/>we<sp/>last<sp/>issued</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="322"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(command<sp/>==<sp/>reg-&gt;command.w)</highlight></codeline>
<codeline lineno="323"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="324"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>XBEE_ATCMD_VERBOSE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="325"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>printf(<sp/></highlight><highlight class="stringliteral">&quot;%s:<sp/>matched<sp/>command<sp/>result<sp/>AT%c%c\n&quot;</highlight><highlight class="normal">,<sp/>__FUNCTION__,</highlight></codeline>
<codeline lineno="326"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>reg-&gt;command.str[0],reg-&gt;command.str[1]);</highlight></codeline>
<codeline lineno="327"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="328"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>found<sp/>it<sp/>in<sp/>the<sp/>list,<sp/>copy<sp/>the<sp/>response<sp/>if<sp/>status<sp/>is<sp/>success</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="329"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((response-&gt;flags<sp/>&amp;<sp/>XBEE_CMD_RESP_MASK_STATUS)</highlight></codeline>
<codeline lineno="330"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>==<sp/>XBEE_AT_RESP_SUCCESS)</highlight></codeline>
<codeline lineno="331"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="332"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>First<sp/>do<sp/>&apos;copy&apos;<sp/>action<sp/>if<sp/>specified,<sp/>then<sp/>do<sp/>callback.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="333"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>devptr<sp/>=<sp/>(<ref refid="group__hal__dos_1gae1affc9ca37cfb624959c866a73f83c2" kindref="member">uint8_t</ref><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/>*)clc-&gt;base<sp/>+<sp/>reg-&gt;offset;</highlight></codeline>
<codeline lineno="334"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>switch<sp/>(reg-&gt;type)</highlight></codeline>
<codeline lineno="335"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="336"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="337"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Was<sp/>not<sp/>a<sp/>copy<sp/>command.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="338"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="339"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__xbee__atcmd_1gga1bd8ecd38c107579d20ded3c79a7d70baef8d715c8725d801676943b868508633" kindref="member">XBEE_CLT_COPY</ref>:</highlight></codeline>
<codeline lineno="340"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__xbee__atcmd_1gga1bd8ecd38c107579d20ded3c79a7d70ba5450809b1aae150ec7dfb4c8faa8161a" kindref="member">XBEE_CLT_COPY_PAD_LEFT</ref>:</highlight></codeline>
<codeline lineno="341"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Zero<sp/>out<sp/>the<sp/>field</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="342"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_f_memset(<sp/>devptr,<sp/>0,<sp/>reg-&gt;bytes);</highlight></codeline>
<codeline lineno="343"><highlight class="normal"></highlight></codeline>
<codeline lineno="344"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Copy<sp/>minimum<sp/>of<sp/>response<sp/>length<sp/>and<sp/>receiving<sp/>field<sp/>length</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="345"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>count<sp/>=<sp/>response-&gt;value_length<sp/>&lt;<sp/>reg-&gt;bytes<sp/>?</highlight></codeline>
<codeline lineno="346"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>response-&gt;value_length<sp/>:<sp/>reg-&gt;bytes;</highlight></codeline>
<codeline lineno="347"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>copy<sp/>to<sp/>start<sp/>of<sp/>devptr<sp/>(XBEE_CLT_COPY)<sp/>or<sp/>end</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="348"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>(XBEE_CLT_COPY_PAD_LEFT)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="349"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>offset<sp/>=<sp/>reg-&gt;type<sp/>==<sp/><ref refid="group__xbee__atcmd_1gga1bd8ecd38c107579d20ded3c79a7d70baef8d715c8725d801676943b868508633" kindref="member">XBEE_CLT_COPY</ref><sp/>?<sp/>0<sp/>:<sp/>(reg-&gt;bytes<sp/>-<sp/>count);</highlight></codeline>
<codeline lineno="350"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_f_memcpy(<sp/>devptr<sp/>+<sp/>offset,<sp/>response-&gt;value_bytes,<sp/>count);</highlight></codeline>
<codeline lineno="351"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="352"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__xbee__atcmd_1gga1bd8ecd38c107579d20ded3c79a7d70ba0be0c682bc30049849b0c169b661c537" kindref="member">XBEE_CLT_COPY_BE</ref>:</highlight></codeline>
<codeline lineno="353"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(reg-&gt;bytes)</highlight></codeline>
<codeline lineno="354"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="355"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>1:</highlight></codeline>
<codeline lineno="356"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Even<sp/>though<sp/>one<sp/>byte<sp/>doesn&apos;t<sp/>technically<sp/>need<sp/>a</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="357"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>swap,<sp/>support<sp/>it<sp/>here<sp/>for<sp/>convenience<sp/>of<sp/>truncating</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="358"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>a<sp/>longer<sp/>response<sp/>value.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="359"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*(<ref refid="group__hal__dos_1gae1affc9ca37cfb624959c866a73f83c2" kindref="member">uint8_t</ref><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/>*)devptr<sp/>=<sp/>(<ref refid="group__hal__dos_1gae1affc9ca37cfb624959c866a73f83c2" kindref="member">uint8_t</ref>)<sp/>response-&gt;value;</highlight></codeline>
<codeline lineno="360"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="361"><highlight class="normal"></highlight></codeline>
<codeline lineno="362"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>2:</highlight></codeline>
<codeline lineno="363"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>xbee_set_unaligned16(<sp/>devptr,<sp/>(<ref refid="group__hal__dos_1ga5a8b2dc9e45a9ee81a94ef304fb62505" kindref="member">uint16_t</ref>)<sp/>response-&gt;value);</highlight></codeline>
<codeline lineno="364"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="365"><highlight class="normal"></highlight></codeline>
<codeline lineno="366"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>4:</highlight></codeline>
<codeline lineno="367"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>xbee_set_unaligned32(<sp/>devptr,<sp/>(<ref refid="group__hal__dos_1ga09a1e304d66d35dd47daffee9731edaa" kindref="member">uint32_t</ref>)<sp/>response-&gt;value);</highlight></codeline>
<codeline lineno="368"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="369"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="370"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="371"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="372"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="373"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(reg-&gt;callback)</highlight></codeline>
<codeline lineno="374"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="375"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>reg-&gt;callback(response,<sp/>reg,<sp/>clc-&gt;base);</highlight></codeline>
<codeline lineno="376"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="377"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="378"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="379"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="380"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Command<sp/>did<sp/>not<sp/>match</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="381"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>clc-&gt;status<sp/>=<sp/>XBEE_COMMAND_LIST_ERROR;</highlight></codeline>
<codeline lineno="382"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(reg-&gt;callback)</highlight></codeline>
<codeline lineno="383"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="384"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>A<sp/>final<sp/>callback<sp/>was<sp/>specified<sp/>(via<sp/>XBEE_ATCMD_REG_END_CB)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="385"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Call<sp/>with<sp/>NULL<sp/>reg,<sp/>since<sp/>this<sp/>is<sp/>an<sp/>error<sp/>and<sp/>doesn&apos;t</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="386"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>correspond<sp/>to<sp/>any<sp/>list<sp/>entry.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="387"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>XBEE_ATCMD_VERBOSE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="388"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(<sp/></highlight><highlight class="stringliteral">&quot;%s:<sp/>final<sp/>callback<sp/>(error<sp/>proc)\n&quot;</highlight><highlight class="normal">,<sp/>__FUNCTION__);</highlight></codeline>
<codeline lineno="389"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="390"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>reg-&gt;callback(response,<sp/>NULL,<sp/>clc-&gt;base);</highlight></codeline>
<codeline lineno="391"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="392"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/>#ifdef<sp/>XBEE_ATCMD_VERBOSE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="393"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(response-&gt;value_length<sp/>&lt;=<sp/>4)</highlight></codeline>
<codeline lineno="394"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="395"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(<sp/></highlight><highlight class="stringliteral">&quot;%s:<sp/>Unexpected<sp/>response<sp/>AT%.*&quot;</highlight><highlight class="normal"><sp/><ref refid="group__hal_1ga379022d2cd3136d8f3500c88658056b7" kindref="member">PRIsFAR</ref><sp/>\</highlight></codeline>
<codeline lineno="396"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;<sp/>=<sp/>0x%0*&quot;</highlight><highlight class="normal"><sp/><ref refid="group__hal_1ga32b0c8a04aae5d4454d15e6cbe109f64" kindref="member">PRIX32</ref><sp/></highlight><highlight class="stringliteral">&quot;\n&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="397"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>__FUNCTION__,<sp/>2,<sp/>response-&gt;command.str,</highlight></codeline>
<codeline lineno="398"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>response-&gt;value_length<sp/>*<sp/>2,<sp/>response-&gt;value);</highlight></codeline>
<codeline lineno="399"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="400"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="401"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="402"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(<sp/></highlight><highlight class="stringliteral">&quot;%s:<sp/>Unexpected<sp/>%d-byte<sp/>response<sp/>to<sp/>AT%.*&quot;</highlight><highlight class="normal"><sp/><ref refid="group__hal_1ga379022d2cd3136d8f3500c88658056b7" kindref="member">PRIsFAR</ref><sp/></highlight><highlight class="stringliteral">&quot;\n&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="403"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>__FUNCTION__,<sp/>response-&gt;value_length,<sp/>2,<sp/>response-&gt;command.str);</highlight></codeline>
<codeline lineno="404"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="405"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/>#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="406"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Give<sp/>up</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="407"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__xbee__atcmd_1gad51a6fee7843df5a5bfd6f3957465426" kindref="member">XBEE_ATCMD_DONE</ref>;</highlight></codeline>
<codeline lineno="408"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="409"><highlight class="normal"></highlight></codeline>
<codeline lineno="410"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Try<sp/>next<sp/>list<sp/>entry</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="411"><highlight class="normal"><sp/><sp/><sp/>++clc-&gt;index;</highlight></codeline>
<codeline lineno="412"><highlight class="normal"><sp/><sp/><sp/>reg<sp/>=<sp/>clc-&gt;list<sp/>+<sp/>clc-&gt;index;</highlight></codeline>
<codeline lineno="413"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(XBEE_ATCMD_REG_VALID(reg))</highlight></codeline>
<codeline lineno="414"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="415"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>request<sp/>=<sp/><ref refid="group__xbee__atcmd_1ga4931ffe3ba31eaf16eee72ac0a95015b" kindref="member">_xbee_cmd_issue_list</ref>(<sp/>xbee,<sp/>clc,<sp/>response);</highlight></codeline>
<codeline lineno="416"><highlight class="normal"></highlight></codeline>
<codeline lineno="417"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__xbee__atcmd_1ga2c58eedef60b41dd30ae1f6b475606a8" kindref="member">xbee_cmd_send</ref>(<sp/>request);</highlight></codeline>
<codeline lineno="418"><highlight class="normal"></highlight></codeline>
<codeline lineno="419"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(reg-&gt;type<sp/>==<sp/><ref refid="group__xbee__atcmd_1gga1bd8ecd38c107579d20ded3c79a7d70ba6e78c45780bccbc7226af34868dc567f" kindref="member">XBEE_CLT_LAST</ref>)</highlight></codeline>
<codeline lineno="420"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="421"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Last<sp/>command,<sp/>with<sp/>no<sp/>response<sp/>processing,<sp/>so<sp/>release</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="422"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>handle<sp/>after<sp/>sending.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="423"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__xbee__atcmd_1ga91641619ae34da34615193962ffd1525" kindref="member">xbee_cmd_release_handle</ref>(<sp/>request);</highlight></codeline>
<codeline lineno="424"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="425"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="426"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="427"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__xbee__atcmd_1ga9a5078393806d67903c87b3c82597fb1" kindref="member">XBEE_ATCMD_REUSE</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>keep<sp/>this<sp/>request<sp/>alive</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="428"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="429"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="430"><highlight class="normal"></highlight></codeline>
<codeline lineno="431"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Got<sp/>through<sp/>to<sp/>end<sp/>of<sp/>list.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="432"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>XBEE_ATCMD_VERBOSE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="433"><highlight class="normal"><sp/><sp/><sp/>printf(<sp/></highlight><highlight class="stringliteral">&quot;%s:<sp/>done\n&quot;</highlight><highlight class="normal">,<sp/>__FUNCTION__);</highlight></codeline>
<codeline lineno="434"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="435"><highlight class="normal"><sp/><sp/><sp/>clc-&gt;status<sp/>=<sp/>XBEE_COMMAND_LIST_DONE;</highlight></codeline>
<codeline lineno="436"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(reg-&gt;callback)</highlight></codeline>
<codeline lineno="437"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="438"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>A<sp/>final<sp/>callback<sp/>was<sp/>specified<sp/>(via<sp/>XBEE_ATCMD_REG_END_CB)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="439"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>XBEE_ATCMD_VERBOSE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="440"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>printf(<sp/></highlight><highlight class="stringliteral">&quot;%s:<sp/>final<sp/>callback\n&quot;</highlight><highlight class="normal">,<sp/>__FUNCTION__);</highlight></codeline>
<codeline lineno="441"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="442"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>reg-&gt;callback(response,<sp/>reg,<sp/>clc-&gt;base);</highlight></codeline>
<codeline lineno="443"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="444"><highlight class="normal"></highlight></codeline>
<codeline lineno="445"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Finished<sp/>last<sp/>command,<sp/>tell<sp/>dispatcher<sp/>that<sp/>we&apos;re<sp/>done<sp/>and<sp/>it<sp/>can<sp/>delete</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="446"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>the<sp/>request<sp/>entry.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="447"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__xbee__atcmd_1gad51a6fee7843df5a5bfd6f3957465426" kindref="member">XBEE_ATCMD_DONE</ref>;</highlight></codeline>
<codeline lineno="448"><highlight class="normal">}</highlight></codeline>
<codeline lineno="449"><highlight class="normal"></highlight></codeline>
<codeline lineno="450"><highlight class="normal"></highlight></codeline>
<codeline lineno="473"><highlight class="normal">_xbee_atcmd_debug</highlight></codeline>
<codeline lineno="474" refid="group__xbee__atcmd_1gab9fb2f15b9134bd32d937a51e4c68014" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group__xbee__atcmd_1gab9fb2f15b9134bd32d937a51e4c68014" kindref="member">xbee_cmd_list_execute</ref>(</highlight></codeline>
<codeline lineno="475"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="structxbee__dev__t" kindref="compound">xbee_dev_t</ref><sp/>*xbee,</highlight></codeline>
<codeline lineno="476"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="structxbee__command__list__context__t" kindref="compound">xbee_command_list_context_t</ref><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/>*clc,</highlight></codeline>
<codeline lineno="477"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structxbee__atcmd__reg__t" kindref="compound">xbee_atcmd_reg_t</ref><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/>*list,</highlight></codeline>
<codeline lineno="478"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/>*base,</highlight></codeline>
<codeline lineno="479"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structwpan__address__t" kindref="compound">wpan_address_t</ref><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/>*address</highlight></codeline>
<codeline lineno="480"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="481"><highlight class="normal">{</highlight></codeline>
<codeline lineno="482"><highlight class="normal"><sp/><sp/><sp/><ref refid="group__hal__dos_1ga2140805d08462d474b82ddc8d1c2f3e6" kindref="member">int16_t</ref><sp/>request;</highlight></codeline>
<codeline lineno="483"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>error;</highlight></codeline>
<codeline lineno="484"><highlight class="normal"></highlight></codeline>
<codeline lineno="485"><highlight class="normal"><sp/><sp/><sp/>clc-&gt;base<sp/>=<sp/>base;</highlight></codeline>
<codeline lineno="486"><highlight class="normal"><sp/><sp/><sp/>clc-&gt;list<sp/>=<sp/>list;</highlight></codeline>
<codeline lineno="487"><highlight class="normal"><sp/><sp/><sp/>clc-&gt;status<sp/>=<sp/>XBEE_COMMAND_LIST_RUNNING;</highlight></codeline>
<codeline lineno="488"><highlight class="normal"><sp/><sp/><sp/>clc-&gt;index<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="489"><highlight class="normal"><sp/><sp/><sp/>request<sp/>=<sp/><ref refid="group__xbee__atcmd_1ga4931ffe3ba31eaf16eee72ac0a95015b" kindref="member">_xbee_cmd_issue_list</ref>(<sp/>xbee,<sp/>clc,<sp/>NULL);</highlight></codeline>
<codeline lineno="490"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(request<sp/>&lt;<sp/>0)</highlight></codeline>
<codeline lineno="491"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="492"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>request;</highlight></codeline>
<codeline lineno="493"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="494"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(address)</highlight></codeline>
<codeline lineno="495"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="496"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__xbee__atcmd_1gae478cb2ea9bb07ade86009a65e6d121f" kindref="member">xbee_cmd_set_target</ref>(request,<sp/>&amp;address-&gt;ieee,<sp/>address-&gt;network);</highlight></codeline>
<codeline lineno="497"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="498"><highlight class="normal"><sp/><sp/><sp/>error<sp/>=<sp/><ref refid="group__xbee__atcmd_1ga0a5d2e2e87743061c46abd53e379e014" kindref="member">xbee_cmd_set_callback</ref>(<sp/>request,<sp/><ref refid="group__xbee__atcmd_1ga9f1bad1621dfd1d13b6f1102fc592d13" kindref="member">_xbee_cmd_list_callback</ref>,<sp/>clc);</highlight></codeline>
<codeline lineno="499"><highlight class="normal"></highlight></codeline>
<codeline lineno="500"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>error<sp/>?<sp/>error<sp/>:<sp/><ref refid="group__xbee__atcmd_1ga2c58eedef60b41dd30ae1f6b475606a8" kindref="member">xbee_cmd_send</ref>(<sp/>request);</highlight></codeline>
<codeline lineno="501"><highlight class="normal">}</highlight></codeline>
<codeline lineno="502"><highlight class="normal"></highlight></codeline>
<codeline lineno="503"><highlight class="normal"></highlight><highlight class="comment">/***<sp/>BeginHeader<sp/>xbee_cmd_list_status<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="504"><highlight class="normal"></highlight><highlight class="comment">/***<sp/>EndHeader<sp/>*/</highlight></codeline>
<codeline lineno="518"><highlight class="normal">_xbee_atcmd_debug</highlight></codeline>
<codeline lineno="519" refid="group__xbee__atcmd_1gafb2d1636c675066469ee388170ea27a0" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">enum</highlight><highlight class="normal"><sp/><ref refid="group__xbee__atcmd_1ga3ec63530d743d1c91126c67493c3245d" kindref="member">xbee_command_list_status</ref><sp/>(<ref refid="group__xbee__atcmd_1gafb2d1636c675066469ee388170ea27a0" kindref="member">xbee_cmd_list_status</ref>)(</highlight></codeline>
<codeline lineno="520"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="structxbee__command__list__context__t" kindref="compound">xbee_command_list_context_t</ref><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/>*clc)</highlight></codeline>
<codeline lineno="521"><highlight class="normal">{</highlight></codeline>
<codeline lineno="522"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>clc-&gt;status;</highlight></codeline>
<codeline lineno="523"><highlight class="normal">}</highlight></codeline>
<codeline lineno="524"><highlight class="normal"></highlight></codeline>
<codeline lineno="525"><highlight class="normal"></highlight><highlight class="comment">/***<sp/>BeginHeader<sp/>xbee_cmd_init_device<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="526"><highlight class="normal"></highlight><highlight class="comment">/***<sp/>EndHeader<sp/>*/</highlight></codeline>
<codeline lineno="548"><highlight class="normal">_xbee_atcmd_debug</highlight></codeline>
<codeline lineno="549" refid="group__xbee__atcmd_1ga1cc803f821ed44e27e404d38349f53c7" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group__xbee__atcmd_1ga1cc803f821ed44e27e404d38349f53c7" kindref="member">xbee_cmd_init_device</ref>(<sp/><ref refid="structxbee__dev__t" kindref="compound">xbee_dev_t</ref><sp/>*xbee)</highlight></codeline>
<codeline lineno="550"><highlight class="normal">{</highlight></codeline>
<codeline lineno="551"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>retval<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="552"><highlight class="normal"></highlight></codeline>
<codeline lineno="553"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<sp/>xbee)</highlight></codeline>
<codeline lineno="554"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="555"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-<ref refid="group__hal_1ga2d1678d5a7cc8ce499643f3b8957def4" kindref="member">EINVAL</ref>;</highlight></codeline>
<codeline lineno="556"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="557"><highlight class="normal"></highlight></codeline>
<codeline lineno="558"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(xbee-&gt;<ref refid="group__xbee__device_1ga9ac684521a8154bddc272049a7a61b73" kindref="member">flags</ref><sp/>&amp;<sp/><ref refid="group__xbee__device_1gga80478d6b87ebdf34b5ec06e5ca6f309ea7227a8ae75aa792a17e24d20f1a5a4a8" kindref="member">XBEE_DEV_FLAG_CMD_INIT</ref>)</highlight></codeline>
<codeline lineno="559"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="560"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>already<sp/>registered,<sp/>no<sp/>need<sp/>to<sp/>add<sp/>frame<sp/>handlers<sp/>and<sp/>query<sp/>device</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="561"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="562"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="563"><highlight class="normal"></highlight></codeline>
<codeline lineno="564"><highlight class="normal"><sp/><sp/><sp/>xbee-&gt;<ref refid="group__xbee__device_1ga9ac684521a8154bddc272049a7a61b73" kindref="member">flags</ref><sp/>|=<sp/><ref refid="group__xbee__device_1gga80478d6b87ebdf34b5ec06e5ca6f309ea7227a8ae75aa792a17e24d20f1a5a4a8" kindref="member">XBEE_DEV_FLAG_CMD_INIT</ref>;</highlight></codeline>
<codeline lineno="565"><highlight class="normal"></highlight></codeline>
<codeline lineno="566"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>automatically<sp/>query<sp/>device<sp/>if<sp/>it<sp/>hasn&apos;t<sp/>been<sp/>queried<sp/>yet</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="567"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<sp/>(xbee-&gt;<ref refid="group__xbee__device_1ga9ac684521a8154bddc272049a7a61b73" kindref="member">flags</ref><sp/>&amp;<sp/><ref refid="group__xbee__device_1gga80478d6b87ebdf34b5ec06e5ca6f309ea28b7d1589252302b80f10a627656a6c5" kindref="member">XBEE_DEV_FLAG_QUERY_BEGIN</ref>))</highlight></codeline>
<codeline lineno="568"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="569"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>retval<sp/>=<sp/><ref refid="group__xbee__atcmd_1ga12317255ca84c2539b7d7a58816eccab" kindref="member">xbee_cmd_query_device</ref>(<sp/>xbee,<sp/>0);</highlight></codeline>
<codeline lineno="570"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="571"><highlight class="normal"></highlight></codeline>
<codeline lineno="572"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>retval;</highlight></codeline>
<codeline lineno="573"><highlight class="normal">}</highlight></codeline>
<codeline lineno="574"><highlight class="normal"></highlight></codeline>
<codeline lineno="575"><highlight class="normal"></highlight><highlight class="comment">/***<sp/>BeginHeader<sp/>xbee_cmd_query_device,<sp/>xbee_cmd_query_status<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="576"><highlight class="normal"></highlight><highlight class="comment">/***<sp/>EndHeader<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="577"><highlight class="normal"></highlight></codeline>
<codeline lineno="578"><highlight class="normal">_xbee_atcmd_debug</highlight></codeline>
<codeline lineno="579"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>_xbee_cmd_query_handle_eo(</highlight></codeline>
<codeline lineno="580"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structxbee__cmd__response__t" kindref="compound">xbee_cmd_response_t</ref><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/>*response,</highlight></codeline>
<codeline lineno="581"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/><ref refid="structxbee__atcmd__reg__t" kindref="compound">xbee_atcmd_reg_t</ref><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/><sp/><sp/>*reg,</highlight></codeline>
<codeline lineno="582"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*base</highlight></codeline>
<codeline lineno="583"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="584"><highlight class="normal">{</highlight></codeline>
<codeline lineno="585"><highlight class="normal"><sp/><sp/><sp/><ref refid="structxbee__dev__t" kindref="compound">xbee_dev_t</ref><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/>*xbee<sp/>=<sp/>base;</highlight></codeline>
<codeline lineno="586"><highlight class="normal"></highlight></codeline>
<codeline lineno="587"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>standard<sp/>xbee_command_list_fn<sp/>API,<sp/>but<sp/>we<sp/>don&apos;t<sp/>use<sp/>the<sp/>&apos;reg&apos;<sp/>parameter</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="588"><highlight class="normal"><sp/><sp/><sp/><ref refid="group__hal_1gacddb73dac3fd1bdec26cd7dc0a652c00" kindref="member">XBEE_UNUSED_PARAMETER</ref>(<sp/>reg);</highlight></codeline>
<codeline lineno="589"><highlight class="normal"></highlight></codeline>
<codeline lineno="590"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((response-&gt;flags<sp/>&amp;<sp/>XBEE_CMD_RESP_MASK_STATUS)<sp/>==<sp/>XBEE_AT_RESP_SUCCESS)</highlight></codeline>
<codeline lineno="591"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="592"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(response-&gt;value<sp/>&amp;<sp/>XBEE_CMD_ATEO_USE_AUTHENTICATION)</highlight></codeline>
<codeline lineno="593"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="594"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>xbee-&gt;wpan_dev.flags<sp/>|=<sp/><ref refid="group__wpan__aps_1gab7d95fae8b625fd39ae3b6f168a5511f" kindref="member">WPAN_FLAG_AUTHENTICATION_ENABLED</ref>;</highlight></codeline>
<codeline lineno="595"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="596"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="597"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="598"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>xbee-&gt;wpan_dev.flags<sp/>&amp;=<sp/>~<ref refid="group__wpan__aps_1gab7d95fae8b625fd39ae3b6f168a5511f" kindref="member">WPAN_FLAG_AUTHENTICATION_ENABLED</ref>;</highlight></codeline>
<codeline lineno="599"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="600"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="601"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>XBEE_ATCMD_VERBOSE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="602"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="603"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="604"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>printf(<sp/></highlight><highlight class="stringliteral">&quot;%s:<sp/>EO<sp/>error<sp/>0x%02X\n&quot;</highlight><highlight class="normal">,<sp/>__FUNCTION__,</highlight></codeline>
<codeline lineno="605"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>response-&gt;flags<sp/>&amp;<sp/>XBEE_CMD_RESP_MASK_STATUS);</highlight></codeline>
<codeline lineno="606"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="607"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="608"><highlight class="normal">}</highlight></codeline>
<codeline lineno="609"><highlight class="normal"></highlight></codeline>
<codeline lineno="610"><highlight class="normal">_xbee_atcmd_debug</highlight></codeline>
<codeline lineno="611"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>_xbee_cmd_query_handle_ai(</highlight></codeline>
<codeline lineno="612"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structxbee__cmd__response__t" kindref="compound">xbee_cmd_response_t</ref><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/>*response,</highlight></codeline>
<codeline lineno="613"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/><ref refid="structxbee__atcmd__reg__t" kindref="compound">xbee_atcmd_reg_t</ref><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/><sp/><sp/>*reg,</highlight></codeline>
<codeline lineno="614"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*base</highlight></codeline>
<codeline lineno="615"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="616"><highlight class="normal">{</highlight></codeline>
<codeline lineno="617"><highlight class="normal"><sp/><sp/><sp/><ref refid="structxbee__dev__t" kindref="compound">xbee_dev_t</ref><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/>*xbee<sp/>=<sp/>base;</highlight></codeline>
<codeline lineno="618"><highlight class="normal"></highlight></codeline>
<codeline lineno="619"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>standard<sp/>xbee_command_list_fn<sp/>API,<sp/>but<sp/>we<sp/>don&apos;t<sp/>use<sp/>the<sp/>&apos;reg&apos;<sp/>parameter</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="620"><highlight class="normal"><sp/><sp/><sp/><ref refid="group__hal_1gacddb73dac3fd1bdec26cd7dc0a652c00" kindref="member">XBEE_UNUSED_PARAMETER</ref>(<sp/>reg);</highlight></codeline>
<codeline lineno="621"><highlight class="normal"></highlight></codeline>
<codeline lineno="622"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((response-&gt;flags<sp/>&amp;<sp/>XBEE_CMD_RESP_MASK_STATUS)<sp/>==<sp/>XBEE_AT_RESP_SUCCESS)</highlight></codeline>
<codeline lineno="623"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="624"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/>#ifdef<sp/>XBEE_ATCMD_VERBOSE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="625"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(<sp/></highlight><highlight class="stringliteral">&quot;%s:<sp/>AI=%&quot;</highlight><highlight class="normal"><sp/><ref refid="group__hal_1gaaf2af4a10f0bd308e9c349c8382382be" kindref="member">PRIu32</ref><sp/></highlight><highlight class="stringliteral">&quot;\n&quot;</highlight><highlight class="normal">,<sp/>__FUNCTION__,</highlight></codeline>
<codeline lineno="626"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>response-&gt;value);</highlight></codeline>
<codeline lineno="627"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/>#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="628"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(response-&gt;value<sp/>==<sp/>0)</highlight></codeline>
<codeline lineno="629"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="630"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>xbee-&gt;wpan_dev.flags<sp/>|=<sp/><ref refid="group__wpan__aps_1gaa06c0d38b4a130f9657abf26c73b49dd" kindref="member">WPAN_FLAG_JOINED</ref>;</highlight></codeline>
<codeline lineno="631"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(xbee-&gt;wpan_dev.flags<sp/>&amp;<sp/><ref refid="group__wpan__aps_1gab7d95fae8b625fd39ae3b6f168a5511f" kindref="member">WPAN_FLAG_AUTHENTICATION_ENABLED</ref>)</highlight></codeline>
<codeline lineno="632"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="633"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>xbee-&gt;wpan_dev.flags<sp/>|=<sp/><ref refid="group__wpan__aps_1ga6508b417838fc0a043f5570b65e3f24b" kindref="member">WPAN_FLAG_AUTHENTICATED</ref>;</highlight></codeline>
<codeline lineno="634"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="635"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="636"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="637"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>XBEE_ATCMD_VERBOSE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="638"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="639"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="640"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>printf(<sp/></highlight><highlight class="stringliteral">&quot;%s:<sp/>AI<sp/>error<sp/>0x%02X\n&quot;</highlight><highlight class="normal">,<sp/>__FUNCTION__,</highlight></codeline>
<codeline lineno="641"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>response-&gt;flags<sp/>&amp;<sp/>XBEE_CMD_RESP_MASK_STATUS);</highlight></codeline>
<codeline lineno="642"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="643"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="644"><highlight class="normal">}</highlight></codeline>
<codeline lineno="645"><highlight class="normal"></highlight></codeline>
<codeline lineno="646"><highlight class="normal">_xbee_atcmd_debug</highlight></codeline>
<codeline lineno="647"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>_xbee_cmd_query_handle_end(</highlight></codeline>
<codeline lineno="648"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structxbee__cmd__response__t" kindref="compound">xbee_cmd_response_t</ref><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/>*response,</highlight></codeline>
<codeline lineno="649"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/><ref refid="structxbee__atcmd__reg__t" kindref="compound">xbee_atcmd_reg_t</ref><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/><sp/><sp/>*reg,</highlight></codeline>
<codeline lineno="650"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*base</highlight></codeline>
<codeline lineno="651"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="652"><highlight class="normal">{</highlight></codeline>
<codeline lineno="653"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/>#ifdef<sp/>XBEE_ATCMD_VERBOSE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="654"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>buffer[<ref refid="group__wpan__types_1gac468b40b060897498f923923654c3d4a" kindref="member">ADDR64_STRING_LENGTH</ref>];</highlight></codeline>
<codeline lineno="655"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/>#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="656"><highlight class="normal"></highlight></codeline>
<codeline lineno="657"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>the<sp/>original<sp/>pointer<sp/>passed<sp/>to<sp/>xbee_cmd_list_execute<sp/>was<sp/>near</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="658"><highlight class="normal"><sp/><sp/><sp/><ref refid="structxbee__dev__t" kindref="compound">xbee_dev_t</ref><sp/>*xbee<sp/>=<sp/><ref refid="group__hal_1ga0220c5cb877cc5718402ab41b91b7252" kindref="member">CAST_FAR_TO_NEAR</ref>(base);</highlight></codeline>
<codeline lineno="659"><highlight class="normal"></highlight></codeline>
<codeline lineno="660"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>query<sp/>process<sp/>completed<sp/>(maybe<sp/>not<sp/>successfully,<sp/>but<sp/>it<sp/>is<sp/>done)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="661"><highlight class="normal"><sp/><sp/><sp/>xbee-&gt;<ref refid="group__xbee__device_1ga9ac684521a8154bddc272049a7a61b73" kindref="member">flags</ref><sp/>&amp;=<sp/>~<ref refid="group__xbee__device_1gga80478d6b87ebdf34b5ec06e5ca6f309ea5f1d6c0ecfad680a292b57e8b078e357" kindref="member">XBEE_DEV_FLAG_QUERY_INPROGRESS</ref>;</highlight></codeline>
<codeline lineno="662"><highlight class="normal"></highlight></codeline>
<codeline lineno="663"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!reg)</highlight></codeline>
<codeline lineno="664"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="665"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>xbee-&gt;<ref refid="group__xbee__device_1ga9ac684521a8154bddc272049a7a61b73" kindref="member">flags</ref><sp/>|=<sp/><ref refid="group__xbee__device_1gga80478d6b87ebdf34b5ec06e5ca6f309ea7dbd64bc34a6a405582cc92d6460921a" kindref="member">XBEE_DEV_FLAG_QUERY_ERROR</ref>;</highlight></codeline>
<codeline lineno="666"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="667"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(response-&gt;flags<sp/>&amp;<sp/>XBEE_CMD_RESP_FLAG_TIMEOUT)</highlight></codeline>
<codeline lineno="668"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="669"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>xbee-&gt;<ref refid="group__xbee__device_1ga9ac684521a8154bddc272049a7a61b73" kindref="member">flags</ref><sp/>|=<sp/><ref refid="group__xbee__device_1gga80478d6b87ebdf34b5ec06e5ca6f309ea7dbd64bc34a6a405582cc92d6460921a" kindref="member">XBEE_DEV_FLAG_QUERY_ERROR</ref>;</highlight></codeline>
<codeline lineno="670"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/>#ifdef<sp/>XBEE_ATCMD_VERBOSE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="671"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>printf(</highlight><highlight class="stringliteral">&quot;%s:<sp/>AT%c%c<sp/>timed<sp/>out!\n&quot;</highlight><highlight class="normal">,<sp/>__FUNCTION__,</highlight></codeline>
<codeline lineno="672"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>response-&gt;command.str[0],<sp/>response-&gt;command.str[1]);</highlight></codeline>
<codeline lineno="673"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/>#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="674"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="675"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="676"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="677"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>xbee-&gt;<ref refid="group__xbee__device_1ga9ac684521a8154bddc272049a7a61b73" kindref="member">flags</ref><sp/>|=<sp/><ref refid="group__xbee__device_1gga80478d6b87ebdf34b5ec06e5ca6f309ead04b8cb5ede9e940335559b26aa5399f" kindref="member">XBEE_DEV_FLAG_QUERY_DONE</ref>;</highlight></codeline>
<codeline lineno="678"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="679"><highlight class="normal"></highlight></codeline>
<codeline lineno="680"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(xbee-&gt;<ref refid="group__xbee__device_1ga9ac684521a8154bddc272049a7a61b73" kindref="member">flags</ref><sp/>&amp;<sp/><ref refid="group__xbee__device_1gga80478d6b87ebdf34b5ec06e5ca6f309ea7dbd64bc34a6a405582cc92d6460921a" kindref="member">XBEE_DEV_FLAG_QUERY_ERROR</ref>)</highlight></codeline>
<codeline lineno="681"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="682"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group__wpan__aps_1gabe1e612e16ea40f970a7f160cae6de3a" kindref="member">WPAN_DEV_IS_JOINED</ref>(<sp/>&amp;xbee-&gt;<ref refid="group__xbee__device_1ga8547395da056b57ba7c6b26c0c0f6ccf" kindref="member">wpan_dev</ref>)<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="683"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>xbee-&gt;<ref refid="group__xbee__device_1ga8547395da056b57ba7c6b26c0c0f6ccf" kindref="member">wpan_dev</ref>.<ref refid="group__wpan__aps_1ga66a58a737aee9733019399e2eceabf4a" kindref="member">address</ref>.network<sp/>==<sp/><ref refid="group__wpan__types_1ga1674d7b825e528a482725d1c06b02c10" kindref="member">WPAN_NET_ADDR_UNDEFINED</ref>)</highlight></codeline>
<codeline lineno="684"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="685"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>xbee-&gt;<ref refid="group__xbee__device_1ga9ac684521a8154bddc272049a7a61b73" kindref="member">flags</ref><sp/>|=<sp/><ref refid="group__xbee__device_1gga80478d6b87ebdf34b5ec06e5ca6f309ea08b02fa597f36fd613370d28ab5a0e81" kindref="member">XBEE_DEV_FLAG_QUERY_REFRESH</ref>;</highlight></codeline>
<codeline lineno="686"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="687"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="688"><highlight class="normal"></highlight></codeline>
<codeline lineno="689"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(xbee-&gt;<ref refid="group__xbee__device_1ga9ac684521a8154bddc272049a7a61b73" kindref="member">flags</ref><sp/>&amp;<sp/><ref refid="group__xbee__device_1gga80478d6b87ebdf34b5ec06e5ca6f309ea08b02fa597f36fd613370d28ab5a0e81" kindref="member">XBEE_DEV_FLAG_QUERY_REFRESH</ref>)</highlight></codeline>
<codeline lineno="690"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="691"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>either<sp/>a<sp/>need<sp/>to<sp/>refresh<sp/>the<sp/>settings<sp/>came<sp/>in<sp/>during<sp/>the<sp/>last<sp/>refresh,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="692"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>or<sp/>a<sp/>timeout/error<sp/>occured<sp/>and<sp/>we<sp/>need<sp/>to<sp/>try<sp/>again</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="693"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__xbee__atcmd_1ga12317255ca84c2539b7d7a58816eccab" kindref="member">xbee_cmd_query_device</ref>(<sp/>xbee,<sp/>1);</highlight></codeline>
<codeline lineno="694"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="695"><highlight class="normal"></highlight></codeline>
<codeline lineno="696"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/>#ifdef<sp/>XBEE_ATCMD_VERBOSE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="697"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>printf(<sp/></highlight><highlight class="stringliteral">&quot;%s:<sp/>HV=0x%x<sp/><sp/>VR=0x%&quot;</highlight><highlight class="normal"><sp/><ref refid="group__hal_1ga80ca66bcc9e366733f02c90ed4b0838c" kindref="member">PRIx32</ref><sp/></highlight><highlight class="stringliteral">&quot;<sp/><sp/>IEEE=%&quot;</highlight><highlight class="normal"><sp/><ref refid="group__hal_1ga379022d2cd3136d8f3500c88658056b7" kindref="member">PRIsFAR</ref><sp/>\</highlight></codeline>
<codeline lineno="698"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;<sp/><sp/>net=0x%04&quot;</highlight><highlight class="normal"><sp/><ref refid="group__hal_1ga70f5e38b517f714518c970a4da37bef1" kindref="member">PRIx16</ref><sp/></highlight><highlight class="stringliteral">&quot;\n&quot;</highlight><highlight class="normal">,<sp/>__FUNCTION__,</highlight></codeline>
<codeline lineno="699"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>xbee-&gt;<ref refid="group__xbee__device_1gad4c7c16c071f95965e2e506752b450fe" kindref="member">hardware_version</ref>,<sp/>xbee-&gt;<ref refid="group__xbee__device_1gac8e0f35fdeff288dd1a7b4f49754c9b2" kindref="member">firmware_version</ref>,</highlight></codeline>
<codeline lineno="700"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__wpan__types_1ga448782f4aed0821758969b47221417ed" kindref="member">addr64_format</ref>(<sp/>buffer,<sp/>&amp;xbee-&gt;<ref refid="group__xbee__device_1ga8547395da056b57ba7c6b26c0c0f6ccf" kindref="member">wpan_dev</ref>.<ref refid="group__wpan__aps_1ga66a58a737aee9733019399e2eceabf4a" kindref="member">address</ref>.ieee),</highlight></codeline>
<codeline lineno="701"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>xbee-&gt;<ref refid="group__xbee__device_1ga8547395da056b57ba7c6b26c0c0f6ccf" kindref="member">wpan_dev</ref>.<ref refid="group__wpan__aps_1ga66a58a737aee9733019399e2eceabf4a" kindref="member">address</ref>.network);</highlight></codeline>
<codeline lineno="702"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/>#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="703"><highlight class="normal">}</highlight></codeline>
<codeline lineno="704"><highlight class="normal"></highlight></codeline>
<codeline lineno="710" refid="group__xbee__atcmd_1ga0b78107b2303165b7cf9969125064dcc" refkind="member"><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structxbee__atcmd__reg__t" kindref="compound">xbee_atcmd_reg_t</ref><sp/><ref refid="group__xbee__atcmd_1ga0b78107b2303165b7cf9969125064dcc" kindref="member">_xbee_atcmd_query_regs</ref>[]<sp/>=<sp/>{</highlight></codeline>
<codeline lineno="711"><highlight class="normal"><sp/><sp/><sp/><ref refid="group__xbee__atcmd_1gaafe33c3d8ea48b42b25d1183eaf93071" kindref="member">XBEE_ATCMD_REG</ref>(<sp/></highlight><highlight class="charliteral">&apos;H&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="charliteral">&apos;V&apos;</highlight><highlight class="normal">,<sp/><ref refid="group__xbee__atcmd_1gga1bd8ecd38c107579d20ded3c79a7d70ba0be0c682bc30049849b0c169b661c537" kindref="member">XBEE_CLT_COPY_BE</ref>,<sp/><ref refid="structxbee__dev__t" kindref="compound">xbee_dev_t</ref>,<sp/>hardware_version),</highlight></codeline>
<codeline lineno="712"><highlight class="normal"><sp/><sp/><sp/><ref refid="group__xbee__atcmd_1gaafe33c3d8ea48b42b25d1183eaf93071" kindref="member">XBEE_ATCMD_REG</ref>(<sp/></highlight><highlight class="charliteral">&apos;V&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="charliteral">&apos;R&apos;</highlight><highlight class="normal">,<sp/><ref refid="group__xbee__atcmd_1gga1bd8ecd38c107579d20ded3c79a7d70ba0be0c682bc30049849b0c169b661c537" kindref="member">XBEE_CLT_COPY_BE</ref>,<sp/><ref refid="structxbee__dev__t" kindref="compound">xbee_dev_t</ref>,<sp/>firmware_version),</highlight></codeline>
<codeline lineno="713"><highlight class="normal"><sp/><sp/><sp/><ref refid="group__xbee__atcmd_1gaafe33c3d8ea48b42b25d1183eaf93071" kindref="member">XBEE_ATCMD_REG</ref>(<sp/></highlight><highlight class="charliteral">&apos;S&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="charliteral">&apos;H&apos;</highlight><highlight class="normal">,<sp/><ref refid="group__xbee__atcmd_1gga1bd8ecd38c107579d20ded3c79a7d70ba5450809b1aae150ec7dfb4c8faa8161a" kindref="member">XBEE_CLT_COPY_PAD_LEFT</ref>,<sp/><ref refid="structxbee__dev__t" kindref="compound">xbee_dev_t</ref>,<sp/>wpan_dev.address.ieee.l[0]),</highlight></codeline>
<codeline lineno="714"><highlight class="normal"><sp/><sp/><sp/><ref refid="group__xbee__atcmd_1gaafe33c3d8ea48b42b25d1183eaf93071" kindref="member">XBEE_ATCMD_REG</ref>(<sp/></highlight><highlight class="charliteral">&apos;S&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="charliteral">&apos;L&apos;</highlight><highlight class="normal">,<sp/><ref refid="group__xbee__atcmd_1gga1bd8ecd38c107579d20ded3c79a7d70ba5450809b1aae150ec7dfb4c8faa8161a" kindref="member">XBEE_CLT_COPY_PAD_LEFT</ref>,<sp/><ref refid="structxbee__dev__t" kindref="compound">xbee_dev_t</ref>,<sp/>wpan_dev.address.ieee.l[1]),</highlight></codeline>
<codeline lineno="715"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>XBEE_DEVICE_ENABLE_ATMODE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="716"><highlight class="normal"><sp/><sp/><sp/><ref refid="group__xbee__atcmd_1gaafe33c3d8ea48b42b25d1183eaf93071" kindref="member">XBEE_ATCMD_REG</ref>(<sp/></highlight><highlight class="charliteral">&apos;G&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="charliteral">&apos;T&apos;</highlight><highlight class="normal">,<sp/><ref refid="group__xbee__atcmd_1gga1bd8ecd38c107579d20ded3c79a7d70ba0be0c682bc30049849b0c169b661c537" kindref="member">XBEE_CLT_COPY_BE</ref>,<sp/><ref refid="structxbee__dev__t" kindref="compound">xbee_dev_t</ref>,<sp/>guard_time),</highlight></codeline>
<codeline lineno="717"><highlight class="normal"><sp/><sp/><sp/><ref refid="group__xbee__atcmd_1gaafe33c3d8ea48b42b25d1183eaf93071" kindref="member">XBEE_ATCMD_REG</ref>(<sp/></highlight><highlight class="charliteral">&apos;C&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="charliteral">&apos;T&apos;</highlight><highlight class="normal">,<sp/><ref refid="group__xbee__atcmd_1gga1bd8ecd38c107579d20ded3c79a7d70ba0be0c682bc30049849b0c169b661c537" kindref="member">XBEE_CLT_COPY_BE</ref>,<sp/><ref refid="structxbee__dev__t" kindref="compound">xbee_dev_t</ref>,<sp/>idle_timeout),</highlight></codeline>
<codeline lineno="718"><highlight class="normal"><sp/><sp/><sp/><ref refid="group__xbee__atcmd_1gaafe33c3d8ea48b42b25d1183eaf93071" kindref="member">XBEE_ATCMD_REG</ref>(<sp/></highlight><highlight class="charliteral">&apos;C&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="charliteral">&apos;C&apos;</highlight><highlight class="normal">,<sp/><ref refid="group__xbee__atcmd_1gga1bd8ecd38c107579d20ded3c79a7d70baef8d715c8725d801676943b868508633" kindref="member">XBEE_CLT_COPY</ref>,<sp/><ref refid="structxbee__dev__t" kindref="compound">xbee_dev_t</ref>,<sp/>escape_char),</highlight></codeline>
<codeline lineno="719"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="720"><highlight class="normal"><sp/><sp/><sp/><ref refid="group__xbee__atcmd_1gabbaf60bd4d186b860fd58c8a6111e9f9" kindref="member">XBEE_ATCMD_REG_CB</ref>(<sp/></highlight><highlight class="charliteral">&apos;E&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="charliteral">&apos;O&apos;</highlight><highlight class="normal">,<sp/>_xbee_cmd_query_handle_eo,<sp/>0),</highlight></codeline>
<codeline lineno="721"><highlight class="normal"><sp/><sp/><sp/><ref refid="group__xbee__atcmd_1gabbaf60bd4d186b860fd58c8a6111e9f9" kindref="member">XBEE_ATCMD_REG_CB</ref>(<sp/></highlight><highlight class="charliteral">&apos;A&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="charliteral">&apos;I&apos;</highlight><highlight class="normal">,<sp/>_xbee_cmd_query_handle_ai,<sp/>0),</highlight></codeline>
<codeline lineno="722"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Start<sp/>here<sp/>when<sp/>refreshing<sp/>values<sp/>after<sp/>MODEM_STATUS<sp/>changes<sp/>to<sp/>JOINED.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="723"><highlight class="normal"><sp/><sp/><sp/><ref refid="group__xbee__atcmd_1gaafe33c3d8ea48b42b25d1183eaf93071" kindref="member">XBEE_ATCMD_REG</ref>(<sp/></highlight><highlight class="charliteral">&apos;N&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="charliteral">&apos;P&apos;</highlight><highlight class="normal">,<sp/><ref refid="group__xbee__atcmd_1gga1bd8ecd38c107579d20ded3c79a7d70ba0be0c682bc30049849b0c169b661c537" kindref="member">XBEE_CLT_COPY_BE</ref>,<sp/><ref refid="structxbee__dev__t" kindref="compound">xbee_dev_t</ref>,<sp/>wpan_dev.payload),</highlight></codeline>
<codeline lineno="724"><highlight class="normal"><sp/><sp/><sp/><ref refid="group__xbee__atcmd_1gaafe33c3d8ea48b42b25d1183eaf93071" kindref="member">XBEE_ATCMD_REG</ref>(<sp/></highlight><highlight class="charliteral">&apos;M&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="charliteral">&apos;Y&apos;</highlight><highlight class="normal">,<sp/><ref refid="group__xbee__atcmd_1gga1bd8ecd38c107579d20ded3c79a7d70ba0be0c682bc30049849b0c169b661c537" kindref="member">XBEE_CLT_COPY_BE</ref>,<sp/><ref refid="structxbee__dev__t" kindref="compound">xbee_dev_t</ref>,<sp/>wpan_dev.address.network),</highlight></codeline>
<codeline lineno="725"><highlight class="normal"><sp/><sp/><sp/><ref refid="group__xbee__atcmd_1gae8d6778e286e3bf82eafc842d451c161" kindref="member">XBEE_ATCMD_REG_END_CB</ref>(_xbee_cmd_query_handle_end,<sp/>0)</highlight></codeline>
<codeline lineno="726"><highlight class="normal">};</highlight></codeline>
<codeline lineno="727"><highlight class="normal"></highlight></codeline>
<codeline lineno="728"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Set<sp/>dynamically</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="729"><highlight class="normal"><ref refid="structxbee__command__list__context__t" kindref="compound">xbee_command_list_context_t</ref><sp/>_xbee_atcmd_query_regs_head;</highlight></codeline>
<codeline lineno="730"><highlight class="normal"></highlight></codeline>
<codeline lineno="731"><highlight class="normal"></highlight></codeline>
<codeline lineno="734"><highlight class="preprocessor">#ifdef<sp/>XBEE_DEVICE_ENABLE_ATMODE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="735"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/>#define<sp/>XBEE_ATCMD_REG_REFRESH_IDX<sp/><sp/>(6+3)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="736"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="737" refid="group__xbee__atcmd_1ga23209b601f70aa30a5a6997c9baf313e" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/>#define<sp/>XBEE_ATCMD_REG_REFRESH_IDX<sp/><sp/>6</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="738"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="739"><highlight class="normal"></highlight></codeline>
<codeline lineno="763"><highlight class="normal">_xbee_atcmd_debug</highlight></codeline>
<codeline lineno="764" refid="group__xbee__atcmd_1ga12317255ca84c2539b7d7a58816eccab" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group__xbee__atcmd_1ga12317255ca84c2539b7d7a58816eccab" kindref="member">xbee_cmd_query_device</ref>(<sp/><ref refid="structxbee__dev__t" kindref="compound">xbee_dev_t</ref><sp/>*xbee,<sp/>uint_fast8_t<sp/>refresh)</highlight></codeline>
<codeline lineno="765"><highlight class="normal">{</highlight></codeline>
<codeline lineno="766"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>error;</highlight></codeline>
<codeline lineno="767"><highlight class="normal"></highlight></codeline>
<codeline lineno="768"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(xbee<sp/>==<sp/>NULL)</highlight></codeline>
<codeline lineno="769"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="770"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-<ref refid="group__hal_1ga2d1678d5a7cc8ce499643f3b8957def4" kindref="member">EINVAL</ref>;</highlight></codeline>
<codeline lineno="771"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="772"><highlight class="normal"></highlight></codeline>
<codeline lineno="773"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(refresh)</highlight></codeline>
<codeline lineno="774"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="775"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>set<sp/>flag<sp/>indicating<sp/>that<sp/>we<sp/>need<sp/>to<sp/>refresh<sp/>the<sp/>registers</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="776"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>xbee-&gt;<ref refid="group__xbee__device_1ga9ac684521a8154bddc272049a7a61b73" kindref="member">flags</ref><sp/>|=<sp/><ref refid="group__xbee__device_1gga80478d6b87ebdf34b5ec06e5ca6f309ea08b02fa597f36fd613370d28ab5a0e81" kindref="member">XBEE_DEV_FLAG_QUERY_REFRESH</ref>;</highlight></codeline>
<codeline lineno="777"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>refresh<sp/>=<sp/><ref refid="group__xbee__atcmd_1ga23209b601f70aa30a5a6997c9baf313e" kindref="member">XBEE_ATCMD_REG_REFRESH_IDX</ref>;</highlight></codeline>
<codeline lineno="778"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="779"><highlight class="normal"></highlight></codeline>
<codeline lineno="780"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(xbee-&gt;<ref refid="group__xbee__device_1ga9ac684521a8154bddc272049a7a61b73" kindref="member">flags</ref><sp/>&amp;<sp/><ref refid="group__xbee__device_1gga80478d6b87ebdf34b5ec06e5ca6f309ea5f1d6c0ecfad680a292b57e8b078e357" kindref="member">XBEE_DEV_FLAG_QUERY_INPROGRESS</ref>)</highlight></codeline>
<codeline lineno="781"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="782"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/>#ifdef<sp/>XBEE_ATCMD_VERBOSE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="783"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(<sp/></highlight><highlight class="stringliteral">&quot;%s:<sp/>aborting;<sp/>query<sp/>already<sp/>in<sp/>progress\n&quot;</highlight><highlight class="normal">,<sp/>__FUNCTION__);</highlight></codeline>
<codeline lineno="784"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/>#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="785"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>note<sp/>that<sp/>if<sp/>we<sp/>were<sp/>trying<sp/>to<sp/>refresh,<sp/>we&apos;ve<sp/>set<sp/>a<sp/>flag</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="786"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>(QUERY_REFRESH)<sp/>and<sp/>can<sp/>restart<sp/>the<sp/>refresh<sp/>after<sp/>the<sp/>current</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="787"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>pass<sp/>finishes</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="788"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="789"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="790"><highlight class="normal"></highlight></codeline>
<codeline lineno="791"><highlight class="normal"><sp/><sp/><sp/>error<sp/>=<sp/><ref refid="group__xbee__atcmd_1gab9fb2f15b9134bd32d937a51e4c68014" kindref="member">xbee_cmd_list_execute</ref>(xbee,</highlight></codeline>
<codeline lineno="792"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;_xbee_atcmd_query_regs_head,</highlight></codeline>
<codeline lineno="793"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>_xbee_atcmd_query_regs<sp/>+<sp/>refresh,</highlight></codeline>
<codeline lineno="794"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>xbee,<sp/>NULL);</highlight></codeline>
<codeline lineno="795"><highlight class="normal"></highlight></codeline>
<codeline lineno="796"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>successfully<sp/>started<sp/>query</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="797"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(error<sp/>==<sp/>0)</highlight></codeline>
<codeline lineno="798"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="799"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>xbee-&gt;<ref refid="group__xbee__device_1ga9ac684521a8154bddc272049a7a61b73" kindref="member">flags</ref><sp/>|=<sp/><ref refid="group__xbee__device_1gga80478d6b87ebdf34b5ec06e5ca6f309ea28b7d1589252302b80f10a627656a6c5" kindref="member">XBEE_DEV_FLAG_QUERY_BEGIN</ref><sp/>|</highlight></codeline>
<codeline lineno="800"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__xbee__device_1gga80478d6b87ebdf34b5ec06e5ca6f309ea5f1d6c0ecfad680a292b57e8b078e357" kindref="member">XBEE_DEV_FLAG_QUERY_INPROGRESS</ref>;</highlight></codeline>
<codeline lineno="801"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>xbee-&gt;<ref refid="group__xbee__device_1ga9ac684521a8154bddc272049a7a61b73" kindref="member">flags</ref><sp/>&amp;=</highlight></codeline>
<codeline lineno="802"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>~(<ref refid="group__xbee__device_1gga80478d6b87ebdf34b5ec06e5ca6f309ea7dbd64bc34a6a405582cc92d6460921a" kindref="member">XBEE_DEV_FLAG_QUERY_ERROR</ref></highlight></codeline>
<codeline lineno="803"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>|<sp/><ref refid="group__xbee__device_1gga80478d6b87ebdf34b5ec06e5ca6f309ead04b8cb5ede9e940335559b26aa5399f" kindref="member">XBEE_DEV_FLAG_QUERY_DONE</ref></highlight></codeline>
<codeline lineno="804"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>|<sp/><ref refid="group__xbee__device_1gga80478d6b87ebdf34b5ec06e5ca6f309ea08b02fa597f36fd613370d28ab5a0e81" kindref="member">XBEE_DEV_FLAG_QUERY_REFRESH</ref>);</highlight></codeline>
<codeline lineno="805"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="806"><highlight class="normal"></highlight></codeline>
<codeline lineno="807"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>error;</highlight></codeline>
<codeline lineno="808"><highlight class="normal">}</highlight></codeline>
<codeline lineno="809"><highlight class="normal"></highlight></codeline>
<codeline lineno="824"><highlight class="normal">_xbee_atcmd_debug</highlight></codeline>
<codeline lineno="825" refid="group__xbee__atcmd_1ga83f36dfc3c3cd2c4046719ea6e9cc53c" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group__xbee__atcmd_1ga83f36dfc3c3cd2c4046719ea6e9cc53c" kindref="member">xbee_cmd_query_status</ref>(<sp/><ref refid="structxbee__dev__t" kindref="compound">xbee_dev_t</ref><sp/>*xbee)</highlight></codeline>
<codeline lineno="826"><highlight class="normal">{</highlight></codeline>
<codeline lineno="827"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<sp/>xbee)</highlight></codeline>
<codeline lineno="828"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="829"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-<ref refid="group__hal_1ga2d1678d5a7cc8ce499643f3b8957def4" kindref="member">EINVAL</ref>;</highlight></codeline>
<codeline lineno="830"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="831"><highlight class="normal"></highlight></codeline>
<codeline lineno="832"><highlight class="normal"><sp/><sp/><sp/><ref refid="group__xbee__atcmd_1ga7ef08f6771da8c18234bbffca2be4ff3" kindref="member">xbee_cmd_tick</ref>();</highlight></codeline>
<codeline lineno="833"><highlight class="normal"></highlight></codeline>
<codeline lineno="834"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__xbee__atcmd_1gafb2d1636c675066469ee388170ea27a0" kindref="member">xbee_cmd_list_status</ref>(&amp;_xbee_atcmd_query_regs_head);</highlight></codeline>
<codeline lineno="835"><highlight class="normal">}</highlight></codeline>
<codeline lineno="836"><highlight class="normal"></highlight></codeline>
<codeline lineno="837"><highlight class="normal"></highlight></codeline>
<codeline lineno="838"><highlight class="normal"></highlight><highlight class="comment">/***<sp/>BeginHeader<sp/>xbee_cmd_create<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="839"><highlight class="normal"></highlight><highlight class="comment">/***<sp/>EndHeader<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="840"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>__XBEE_PLATFORM_HCS08</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="841"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/>#pragma<sp/>MESSAGE<sp/>DISABLE<sp/>C1855<sp/><sp/><sp/><sp/>//<sp/>Function<sp/>intentially<sp/>uses<sp/>recursion</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="842"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="843"><highlight class="normal"></highlight></codeline>
<codeline lineno="867"><highlight class="normal">_xbee_atcmd_debug</highlight></codeline>
<codeline lineno="868" refid="group__xbee__atcmd_1gab73aaf873be6f9e515dcd65748a7f21c" refkind="member"><highlight class="normal"><ref refid="group__hal__dos_1ga2140805d08462d474b82ddc8d1c2f3e6" kindref="member">int16_t</ref><sp/><ref refid="group__xbee__atcmd_1gab73aaf873be6f9e515dcd65748a7f21c" kindref="member">xbee_cmd_create</ref>(<sp/><ref refid="structxbee__dev__t" kindref="compound">xbee_dev_t</ref><sp/>*xbee,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/><ref refid="group__xbee__atcmd_1ga1a5aaa930940857f68f245eeb89506b5" kindref="member">command</ref>[3])</highlight></codeline>
<codeline lineno="869"><highlight class="normal">{</highlight></codeline>
<codeline lineno="870"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="group__hal__dos_1gae1affc9ca37cfb624959c866a73f83c2" kindref="member">uint8_t</ref><sp/>initialized<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="871"><highlight class="normal"><sp/><sp/><sp/>int_fast8_t<sp/>index;</highlight></codeline>
<codeline lineno="872"><highlight class="normal"><sp/><sp/><sp/><ref refid="group__hal__dos_1ga2140805d08462d474b82ddc8d1c2f3e6" kindref="member">int16_t</ref><sp/>handle;</highlight></codeline>
<codeline lineno="873"><highlight class="normal"><sp/><sp/><sp/><ref refid="structxbee__cmd__request__t" kindref="compound">xbee_cmd_request_t</ref><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/>*request;</highlight></codeline>
<codeline lineno="874"><highlight class="normal"></highlight></codeline>
<codeline lineno="875"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<sp/>(xbee<sp/>&amp;&amp;<sp/>command))</highlight></codeline>
<codeline lineno="876"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="877"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-<ref refid="group__hal_1ga2d1678d5a7cc8ce499643f3b8957def4" kindref="member">EINVAL</ref>;</highlight></codeline>
<codeline lineno="878"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="879"><highlight class="normal"></highlight></codeline>
<codeline lineno="880"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<sp/>initialized)</highlight></codeline>
<codeline lineno="881"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="882"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>initialized<sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="883"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>_f_memset(<sp/><ref refid="group__xbee__atcmd_1ga551531248de3d539dfb15bd89cf4734b" kindref="member">xbee_cmd_request_table</ref>,<sp/>0,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="group__xbee__atcmd_1ga551531248de3d539dfb15bd89cf4734b" kindref="member">xbee_cmd_request_table</ref>));</highlight></codeline>
<codeline lineno="884"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="885"><highlight class="normal"></highlight></codeline>
<codeline lineno="886"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<sp/>(xbee-&gt;<ref refid="group__xbee__device_1ga9ac684521a8154bddc272049a7a61b73" kindref="member">flags</ref><sp/>&amp;<sp/><ref refid="group__xbee__device_1gga80478d6b87ebdf34b5ec06e5ca6f309ea7227a8ae75aa792a17e24d20f1a5a4a8" kindref="member">XBEE_DEV_FLAG_CMD_INIT</ref>))</highlight></codeline>
<codeline lineno="887"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="888"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>user<sp/>hasn&apos;t<sp/>called<sp/>xbee_cmd_init()<sp/>yet,<sp/>do<sp/>it<sp/>for<sp/>them</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="889"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__xbee__atcmd_1ga1cc803f821ed44e27e404d38349f53c7" kindref="member">xbee_cmd_init_device</ref>(<sp/>xbee);</highlight></codeline>
<codeline lineno="890"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="891"><highlight class="normal"></highlight></codeline>
<codeline lineno="892"><highlight class="normal"><sp/><sp/><sp/>request<sp/>=<sp/><ref refid="group__xbee__atcmd_1ga551531248de3d539dfb15bd89cf4734b" kindref="member">xbee_cmd_request_table</ref>;</highlight></codeline>
<codeline lineno="893"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(index<sp/>=<sp/>0;<sp/>index<sp/>&lt;<sp/><ref refid="group__xbee__atcmd_1gaf992e9b985e2b1eb185ef3d2d38a01c0" kindref="member">XBEE_CMD_REQUEST_TABLESIZE</ref>;<sp/>++request,<sp/>++index)</highlight></codeline>
<codeline lineno="894"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="895"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(request-&gt;device<sp/>==<sp/>NULL)</highlight></codeline>
<codeline lineno="896"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="897"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="898"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="899"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="900"><highlight class="normal"></highlight></codeline>
<codeline lineno="901"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(index<sp/>==<sp/>XBEE_CMD_REQUEST_TABLESIZE)</highlight></codeline>
<codeline lineno="902"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="903"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>all<sp/>slots<sp/>in<sp/>table<sp/>are<sp/>in<sp/>use</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="904"><highlight class="normal"></highlight></codeline>
<codeline lineno="905"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>re-use<sp/>`initialized`<sp/>static<sp/>to<sp/>limit<sp/>recursion</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="906"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(initialized<sp/>!=<sp/>2)</highlight></codeline>
<codeline lineno="907"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="908"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>initialized<sp/>=<sp/>2;</highlight></codeline>
<codeline lineno="909"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__xbee__atcmd_1ga7ef08f6771da8c18234bbffca2be4ff3" kindref="member">xbee_cmd_tick</ref>();<sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>try<sp/>to<sp/>free<sp/>up<sp/>a<sp/>slot</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="910"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>handle<sp/>=<sp/><ref refid="group__xbee__atcmd_1gab73aaf873be6f9e515dcd65748a7f21c" kindref="member">xbee_cmd_create</ref>(<sp/>xbee,<sp/>command);</highlight></codeline>
<codeline lineno="911"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>initialized<sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="912"><highlight class="normal"></highlight></codeline>
<codeline lineno="913"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>handle;</highlight></codeline>
<codeline lineno="914"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="915"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-<ref refid="group__hal_1ga088abe8bad2df798edad3053d719b937" kindref="member">ENOSPC</ref>;</highlight></codeline>
<codeline lineno="916"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="917"><highlight class="normal"></highlight></codeline>
<codeline lineno="918"><highlight class="normal"><sp/><sp/><sp/>handle<sp/>=<sp/>(index<sp/>&lt;&lt;<sp/>8)<sp/>|<sp/>request-&gt;sequence;</highlight></codeline>
<codeline lineno="919"><highlight class="normal"></highlight></codeline>
<codeline lineno="920"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>clear<sp/>out<sp/>most<sp/>of<sp/>the<sp/>entry<sp/>(preserve<sp/>sequence)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="921"><highlight class="normal"><sp/><sp/><sp/>_f_memset(<sp/>&amp;request-&gt;timeout,<sp/>0,</highlight></codeline>
<codeline lineno="922"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(*request)<sp/>-<sp/>offsetof(<ref refid="structxbee__cmd__request__t" kindref="compound">xbee_cmd_request_t</ref>,<sp/>timeout));</highlight></codeline>
<codeline lineno="923"><highlight class="normal"></highlight></codeline>
<codeline lineno="924"><highlight class="normal"><sp/><sp/><sp/>request-&gt;device<sp/>=<sp/>xbee;</highlight></codeline>
<codeline lineno="925"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>allow<sp/>2<sp/>seconds<sp/>to<sp/>finish<sp/>building<sp/>command<sp/>and<sp/>successfully<sp/>send<sp/>it</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="926"><highlight class="normal"><sp/><sp/><sp/>request-&gt;timeout<sp/>=<sp/><ref refid="group__hal_1ga6adb5c9e19c84a261c569ff4d77d1170" kindref="member">XBEE_SET_TIMEOUT_SEC</ref>(2);</highlight></codeline>
<codeline lineno="927"><highlight class="normal"><sp/><sp/><sp/>request-&gt;command.w<sp/>=<sp/>xbee_get_unaligned16(<sp/>command);</highlight></codeline>
<codeline lineno="928"><highlight class="normal"></highlight></codeline>
<codeline lineno="929"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>handle;</highlight></codeline>
<codeline lineno="930"><highlight class="normal">}</highlight></codeline>
<codeline lineno="931"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>__XBEE_PLATFORM_HCS08</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="932"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/>#pragma<sp/>MESSAGE<sp/>DEFAULT<sp/>C1855<sp/><sp/><sp/><sp/>//<sp/>restore<sp/>C1855<sp/>(Recursive<sp/>function<sp/>call)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="933"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="934"><highlight class="normal"></highlight></codeline>
<codeline lineno="935"><highlight class="normal"></highlight><highlight class="comment">/***<sp/>BeginHeader<sp/>_xbee_cmd_release_request<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="936"><highlight class="normal"></highlight><highlight class="comment">/***<sp/>EndHeader<sp/>*/</highlight></codeline>
<codeline lineno="955"><highlight class="normal">_xbee_atcmd_debug</highlight></codeline>
<codeline lineno="956" refid="group__xbee__atcmd_1ga899d5ef84ca5790c3c76b965f88874e0" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group__xbee__atcmd_1ga899d5ef84ca5790c3c76b965f88874e0" kindref="member">_xbee_cmd_release_request</ref>(<sp/><ref refid="structxbee__cmd__request__t" kindref="compound">xbee_cmd_request_t</ref><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/>*request)</highlight></codeline>
<codeline lineno="957"><highlight class="normal">{</highlight></codeline>
<codeline lineno="958"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<sp/>request)</highlight></codeline>
<codeline lineno="959"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="960"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-<ref refid="group__hal_1ga2d1678d5a7cc8ce499643f3b8957def4" kindref="member">EINVAL</ref>;</highlight></codeline>
<codeline lineno="961"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="962"><highlight class="normal"></highlight></codeline>
<codeline lineno="963"><highlight class="normal"><sp/><sp/><sp/>request-&gt;device<sp/>=<sp/>NULL;<sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>free<sp/>up<sp/>entry<sp/>in<sp/>the<sp/>table</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="964"><highlight class="normal"><sp/><sp/><sp/>++request-&gt;sequence;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>alter<sp/>sequence<sp/>to<sp/>expire<sp/>old<sp/>handles</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="965"><highlight class="normal"></highlight></codeline>
<codeline lineno="966"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="967"><highlight class="normal">}</highlight></codeline>
<codeline lineno="968"><highlight class="normal"></highlight></codeline>
<codeline lineno="969"><highlight class="normal"></highlight><highlight class="comment">/***<sp/>BeginHeader<sp/>xbee_cmd_release_handle<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="970"><highlight class="normal"></highlight><highlight class="comment">/***<sp/>EndHeader<sp/>*/</highlight></codeline>
<codeline lineno="983"><highlight class="normal">_xbee_atcmd_debug</highlight></codeline>
<codeline lineno="984" refid="group__xbee__atcmd_1ga91641619ae34da34615193962ffd1525" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group__xbee__atcmd_1ga91641619ae34da34615193962ffd1525" kindref="member">xbee_cmd_release_handle</ref>(<sp/><ref refid="group__hal__dos_1ga2140805d08462d474b82ddc8d1c2f3e6" kindref="member">int16_t</ref><sp/>handle)</highlight></codeline>
<codeline lineno="985"><highlight class="normal">{</highlight></codeline>
<codeline lineno="986"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Invalid<sp/>handle<sp/>caught<sp/>by<sp/>_xbee_cmd_handle_to_address(),<sp/>which<sp/>will</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="987"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>pass<sp/>NULL<sp/>to<sp/>_xbee_cmd_release_request()<sp/>which<sp/>returns<sp/>-EINVAL.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="988"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__xbee__atcmd_1ga899d5ef84ca5790c3c76b965f88874e0" kindref="member">_xbee_cmd_release_request</ref>(<sp/><ref refid="group__xbee__atcmd_1ga710b2223cda09c52a8518c964da88347" kindref="member">_xbee_cmd_handle_to_address</ref>(<sp/>handle));</highlight></codeline>
<codeline lineno="989"><highlight class="normal">}</highlight></codeline>
<codeline lineno="990"><highlight class="normal"></highlight></codeline>
<codeline lineno="991"><highlight class="normal"></highlight><highlight class="comment">/***<sp/>BeginHeader<sp/>xbee_cmd_set_command<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="992"><highlight class="normal"></highlight><highlight class="comment">/***<sp/>EndHeader<sp/>*/</highlight></codeline>
<codeline lineno="1008"><highlight class="normal">_xbee_atcmd_debug</highlight></codeline>
<codeline lineno="1009" refid="group__xbee__atcmd_1ga06181e54a87d90c30108360d6b433323" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group__xbee__atcmd_1ga06181e54a87d90c30108360d6b433323" kindref="member">xbee_cmd_set_command</ref>(<sp/><ref refid="group__hal__dos_1ga2140805d08462d474b82ddc8d1c2f3e6" kindref="member">int16_t</ref><sp/>handle,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/><ref refid="group__xbee__atcmd_1ga1a5aaa930940857f68f245eeb89506b5" kindref="member">command</ref>[3])</highlight></codeline>
<codeline lineno="1010"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1011"><highlight class="normal"><sp/><sp/><sp/><ref refid="structxbee__cmd__request__t" kindref="compound">xbee_cmd_request_t</ref><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/>*request;</highlight></codeline>
<codeline lineno="1012"><highlight class="normal"></highlight></codeline>
<codeline lineno="1013"><highlight class="normal"><sp/><sp/><sp/>request<sp/>=<sp/><ref refid="group__xbee__atcmd_1ga710b2223cda09c52a8518c964da88347" kindref="member">_xbee_cmd_handle_to_address</ref>(<sp/>handle);</highlight></codeline>
<codeline lineno="1014"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<sp/>request)</highlight></codeline>
<codeline lineno="1015"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1016"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-<ref refid="group__hal_1ga2d1678d5a7cc8ce499643f3b8957def4" kindref="member">EINVAL</ref>;</highlight></codeline>
<codeline lineno="1017"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1018"><highlight class="normal"></highlight></codeline>
<codeline lineno="1019"><highlight class="normal"><sp/><sp/><sp/>request-&gt;command.w<sp/>=<sp/>xbee_get_unaligned16(<sp/>command);</highlight></codeline>
<codeline lineno="1020"><highlight class="normal"></highlight></codeline>
<codeline lineno="1021"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="1022"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1023"><highlight class="normal"></highlight></codeline>
<codeline lineno="1024"><highlight class="normal"></highlight><highlight class="comment">/***<sp/>BeginHeader<sp/>xbee_cmd_set_callback<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1025"><highlight class="normal"></highlight><highlight class="comment">/***<sp/>EndHeader<sp/>*/</highlight></codeline>
<codeline lineno="1056"><highlight class="normal">_xbee_atcmd_debug</highlight></codeline>
<codeline lineno="1057" refid="group__xbee__atcmd_1ga0a5d2e2e87743061c46abd53e379e014" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group__xbee__atcmd_1ga0a5d2e2e87743061c46abd53e379e014" kindref="member">xbee_cmd_set_callback</ref>(<sp/><ref refid="group__hal__dos_1ga2140805d08462d474b82ddc8d1c2f3e6" kindref="member">int16_t</ref><sp/>handle,<sp/><ref refid="group__xbee__atcmd_1ga113cbd0a40a638710974218de5f885fe" kindref="member">xbee_cmd_callback_fn</ref><sp/>callback,</highlight></codeline>
<codeline lineno="1058"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/>*context)</highlight></codeline>
<codeline lineno="1059"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1060"><highlight class="normal"><sp/><sp/><sp/><ref refid="structxbee__cmd__request__t" kindref="compound">xbee_cmd_request_t</ref><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/>*request;</highlight></codeline>
<codeline lineno="1061"><highlight class="normal"></highlight></codeline>
<codeline lineno="1062"><highlight class="normal"><sp/><sp/><sp/>request<sp/>=<sp/><ref refid="group__xbee__atcmd_1ga710b2223cda09c52a8518c964da88347" kindref="member">_xbee_cmd_handle_to_address</ref>(<sp/>handle);</highlight></codeline>
<codeline lineno="1063"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<sp/>request)</highlight></codeline>
<codeline lineno="1064"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1065"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-<ref refid="group__hal_1ga2d1678d5a7cc8ce499643f3b8957def4" kindref="member">EINVAL</ref>;</highlight></codeline>
<codeline lineno="1066"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1067"><highlight class="normal"></highlight></codeline>
<codeline lineno="1068"><highlight class="normal"><sp/><sp/><sp/>request-&gt;callback<sp/>=<sp/>callback;</highlight></codeline>
<codeline lineno="1069"><highlight class="normal"><sp/><sp/><sp/>request-&gt;context<sp/>=<sp/>context;</highlight></codeline>
<codeline lineno="1070"><highlight class="normal"></highlight></codeline>
<codeline lineno="1071"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="1072"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1073"><highlight class="normal"></highlight></codeline>
<codeline lineno="1074"><highlight class="normal"></highlight><highlight class="comment">/***<sp/>BeginHeader<sp/>xbee_cmd_set_target<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1075"><highlight class="normal"></highlight><highlight class="comment">/***<sp/>EndHeader<sp/>*/</highlight></codeline>
<codeline lineno="1114"><highlight class="normal">_xbee_atcmd_debug</highlight></codeline>
<codeline lineno="1115" refid="group__xbee__atcmd_1gae478cb2ea9bb07ade86009a65e6d121f" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group__xbee__atcmd_1gae478cb2ea9bb07ade86009a65e6d121f" kindref="member">xbee_cmd_set_target</ref>(<sp/><ref refid="group__hal__dos_1ga2140805d08462d474b82ddc8d1c2f3e6" kindref="member">int16_t</ref><sp/>handle,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="unionaddr64" kindref="compound">addr64</ref><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/>*ieee,</highlight></codeline>
<codeline lineno="1116"><highlight class="normal"><sp/><sp/><sp/><ref refid="group__hal__dos_1ga5a8b2dc9e45a9ee81a94ef304fb62505" kindref="member">uint16_t</ref><sp/>network_address)</highlight></codeline>
<codeline lineno="1117"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1118"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>XBEE_CMD_DISABLE_REMOTE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1119"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-<ref refid="group__hal_1ga43785b9969e0bd1af532dbde06c5540b" kindref="member">ENOSYS</ref>;</highlight></codeline>
<codeline lineno="1120"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1121"><highlight class="normal"><sp/><sp/><sp/><ref refid="structxbee__cmd__request__t" kindref="compound">xbee_cmd_request_t</ref><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/>*request;</highlight></codeline>
<codeline lineno="1122"><highlight class="normal"></highlight></codeline>
<codeline lineno="1123"><highlight class="normal"><sp/><sp/><sp/>request<sp/>=<sp/><ref refid="group__xbee__atcmd_1ga710b2223cda09c52a8518c964da88347" kindref="member">_xbee_cmd_handle_to_address</ref>(<sp/>handle);</highlight></codeline>
<codeline lineno="1124"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<sp/>request)</highlight></codeline>
<codeline lineno="1125"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-<ref refid="group__hal_1ga2d1678d5a7cc8ce499643f3b8957def4" kindref="member">EINVAL</ref>;</highlight></codeline>
<codeline lineno="1127"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1128"><highlight class="normal"></highlight></codeline>
<codeline lineno="1129"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ieee<sp/>==<sp/>NULL)</highlight></codeline>
<codeline lineno="1130"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1131"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>_f_memset(<sp/>&amp;request-&gt;address,<sp/>0,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal"><sp/>request-&gt;address);</highlight></codeline>
<codeline lineno="1132"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>request-&gt;flags<sp/>&amp;=<sp/>~<ref refid="atcmd_8h_1a47b4e0186b3bf4fba506d58e5e7ebbe4" kindref="member">XBEE_CMD_FLAG_REMOTE</ref>;</highlight></codeline>
<codeline lineno="1133"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1134"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1135"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1136"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>request-&gt;address.ieee<sp/>=<sp/>*ieee;</highlight></codeline>
<codeline lineno="1137"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>request-&gt;address.network<sp/>=<sp/>network_address;</highlight></codeline>
<codeline lineno="1138"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>request-&gt;flags<sp/>|=<sp/><ref refid="atcmd_8h_1a47b4e0186b3bf4fba506d58e5e7ebbe4" kindref="member">XBEE_CMD_FLAG_REMOTE</ref>;</highlight></codeline>
<codeline lineno="1139"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1140"><highlight class="normal"></highlight></codeline>
<codeline lineno="1141"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="1142"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1143"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1144"><highlight class="normal"></highlight></codeline>
<codeline lineno="1145"><highlight class="normal"></highlight></codeline>
<codeline lineno="1146"><highlight class="normal"></highlight><highlight class="comment">/***<sp/>BeginHeader<sp/>_xbee_cmd_encode_param<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1147"><highlight class="normal"><ref refid="group__hal__dos_1gae1affc9ca37cfb624959c866a73f83c2" kindref="member">uint8_t</ref><sp/><ref refid="group__xbee__atcmd_1ga484572705b9695ab429fd51188f74238" kindref="member">_xbee_cmd_encode_param</ref>(<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/>*buffer,<sp/><ref refid="group__hal__dos_1ga09a1e304d66d35dd47daffee9731edaa" kindref="member">uint32_t</ref><sp/><ref refid="group__xbee__atcmd_1ga5bf2410fa8ec37f47f8afeba8dcc7f1b" kindref="member">value</ref>);</highlight></codeline>
<codeline lineno="1148"><highlight class="normal"></highlight><highlight class="comment">/***<sp/>EndHeader<sp/>*/</highlight></codeline>
<codeline lineno="1160"><highlight class="normal">_xbee_atcmd_debug</highlight></codeline>
<codeline lineno="1161" refid="group__xbee__atcmd_1ga484572705b9695ab429fd51188f74238" refkind="member"><highlight class="normal"><ref refid="group__hal__dos_1gae1affc9ca37cfb624959c866a73f83c2" kindref="member">uint8_t</ref><sp/><ref refid="group__xbee__atcmd_1ga484572705b9695ab429fd51188f74238" kindref="member">_xbee_cmd_encode_param</ref>(<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/>*buffer,<sp/><ref refid="group__hal__dos_1ga09a1e304d66d35dd47daffee9731edaa" kindref="member">uint32_t</ref><sp/><ref refid="group__xbee__atcmd_1ga5bf2410fa8ec37f47f8afeba8dcc7f1b" kindref="member">value</ref>)</highlight></codeline>
<codeline lineno="1162"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1163"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(value<sp/>&amp;<sp/>0xFFFF0000)<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>setting<sp/>32-bit<sp/>value</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1164"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1165"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>xbee_set_unaligned32(<sp/>buffer,<sp/><ref refid="group__util__byteorder_1gaa65407014913309932b9a5ea3c16a86d" kindref="member">htobe32</ref>(<sp/>value));</highlight></codeline>
<codeline lineno="1166"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>4;</highlight></codeline>
<codeline lineno="1167"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1168"><highlight class="normal"></highlight></codeline>
<codeline lineno="1169"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((<ref refid="group__hal__dos_1ga5a8b2dc9e45a9ee81a94ef304fb62505" kindref="member">uint16_t</ref>)<sp/>value<sp/>&amp;<sp/>0xFF00)<sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>setting<sp/>16-bit<sp/>value</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1170"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1171"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>xbee_set_unaligned16(<sp/>buffer,<sp/><ref refid="group__util__byteorder_1ga4b9167199621b390f82c3e5361ba6df6" kindref="member">htobe16</ref>(<sp/>(<ref refid="group__hal__dos_1ga5a8b2dc9e45a9ee81a94ef304fb62505" kindref="member">uint16_t</ref>)<sp/>value));</highlight></codeline>
<codeline lineno="1172"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>2;</highlight></codeline>
<codeline lineno="1173"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1174"><highlight class="normal"></highlight></codeline>
<codeline lineno="1175"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>setting<sp/>8-bit<sp/>value</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1176"><highlight class="normal"><sp/><sp/><sp/>*(<ref refid="group__hal__dos_1gae1affc9ca37cfb624959c866a73f83c2" kindref="member">uint8_t</ref><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/>*)buffer<sp/>=<sp/>(<ref refid="group__hal__dos_1gae1affc9ca37cfb624959c866a73f83c2" kindref="member">uint8_t</ref>)<sp/><ref refid="group__xbee__atcmd_1ga5bf2410fa8ec37f47f8afeba8dcc7f1b" kindref="member">value</ref>;</highlight></codeline>
<codeline lineno="1177"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>1;</highlight></codeline>
<codeline lineno="1178"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1179"><highlight class="normal"></highlight></codeline>
<codeline lineno="1180"><highlight class="normal"></highlight></codeline>
<codeline lineno="1181"><highlight class="normal"></highlight><highlight class="comment">/***<sp/>BeginHeader<sp/>xbee_cmd_set_flags<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1182"><highlight class="normal"></highlight><highlight class="comment">/***<sp/>EndHeader<sp/>*/</highlight></codeline>
<codeline lineno="1198"><highlight class="normal">_xbee_atcmd_debug</highlight></codeline>
<codeline lineno="1199" refid="group__xbee__atcmd_1gad2cc44803cc53ada37df4557313e120b" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group__xbee__atcmd_1gad2cc44803cc53ada37df4557313e120b" kindref="member">xbee_cmd_set_flags</ref>(<sp/><ref refid="group__hal__dos_1ga2140805d08462d474b82ddc8d1c2f3e6" kindref="member">int16_t</ref><sp/>handle,<sp/><ref refid="group__hal__dos_1ga5a8b2dc9e45a9ee81a94ef304fb62505" kindref="member">uint16_t</ref><sp/>flags)</highlight></codeline>
<codeline lineno="1200"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1201"><highlight class="normal"><sp/><sp/><sp/><ref refid="structxbee__cmd__request__t" kindref="compound">xbee_cmd_request_t</ref><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/>*request;</highlight></codeline>
<codeline lineno="1202"><highlight class="normal"></highlight></codeline>
<codeline lineno="1203"><highlight class="normal"><sp/><sp/><sp/>request<sp/>=<sp/><ref refid="group__xbee__atcmd_1ga710b2223cda09c52a8518c964da88347" kindref="member">_xbee_cmd_handle_to_address</ref>(<sp/>handle);</highlight></codeline>
<codeline lineno="1204"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<sp/>request)</highlight></codeline>
<codeline lineno="1205"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1206"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-<ref refid="group__hal_1ga2d1678d5a7cc8ce499643f3b8957def4" kindref="member">EINVAL</ref>;</highlight></codeline>
<codeline lineno="1207"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1208"><highlight class="normal"></highlight></codeline>
<codeline lineno="1209"><highlight class="normal"><sp/><sp/><sp/>request-&gt;flags<sp/>|=<sp/>(flags<sp/>&amp;<sp/><ref refid="atcmd_8h_1a53c2b6e15c0d86bf2d1bc04ca04f2a48" kindref="member">XBEE_CMD_FLAG_USER_MASK</ref>);</highlight></codeline>
<codeline lineno="1210"><highlight class="normal"></highlight></codeline>
<codeline lineno="1211"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="1212"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1213"><highlight class="normal"></highlight></codeline>
<codeline lineno="1214"><highlight class="normal"></highlight></codeline>
<codeline lineno="1215"><highlight class="normal"></highlight><highlight class="comment">/***<sp/>BeginHeader<sp/>xbee_cmd_clear_flags<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1216"><highlight class="normal"></highlight><highlight class="comment">/***<sp/>EndHeader<sp/>*/</highlight></codeline>
<codeline lineno="1232"><highlight class="normal">_xbee_atcmd_debug</highlight></codeline>
<codeline lineno="1233" refid="group__xbee__atcmd_1ga0828601d6b2735ee9f2ebf408d12c05c" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group__xbee__atcmd_1ga0828601d6b2735ee9f2ebf408d12c05c" kindref="member">xbee_cmd_clear_flags</ref>(<sp/><ref refid="group__hal__dos_1ga2140805d08462d474b82ddc8d1c2f3e6" kindref="member">int16_t</ref><sp/>handle,<sp/><ref refid="group__hal__dos_1ga5a8b2dc9e45a9ee81a94ef304fb62505" kindref="member">uint16_t</ref><sp/>flags)</highlight></codeline>
<codeline lineno="1234"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1235"><highlight class="normal"><sp/><sp/><sp/><ref refid="structxbee__cmd__request__t" kindref="compound">xbee_cmd_request_t</ref><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/>*request;</highlight></codeline>
<codeline lineno="1236"><highlight class="normal"></highlight></codeline>
<codeline lineno="1237"><highlight class="normal"><sp/><sp/><sp/>request<sp/>=<sp/><ref refid="group__xbee__atcmd_1ga710b2223cda09c52a8518c964da88347" kindref="member">_xbee_cmd_handle_to_address</ref>(<sp/>handle);</highlight></codeline>
<codeline lineno="1238"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<sp/>request)</highlight></codeline>
<codeline lineno="1239"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1240"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-<ref refid="group__hal_1ga2d1678d5a7cc8ce499643f3b8957def4" kindref="member">EINVAL</ref>;</highlight></codeline>
<codeline lineno="1241"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1242"><highlight class="normal"></highlight></codeline>
<codeline lineno="1243"><highlight class="normal"><sp/><sp/><sp/>request-&gt;flags<sp/>&amp;=<sp/>~(flags<sp/>&amp;<sp/><ref refid="atcmd_8h_1a53c2b6e15c0d86bf2d1bc04ca04f2a48" kindref="member">XBEE_CMD_FLAG_USER_MASK</ref>);</highlight></codeline>
<codeline lineno="1244"><highlight class="normal"></highlight></codeline>
<codeline lineno="1245"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="1246"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1247"><highlight class="normal"></highlight></codeline>
<codeline lineno="1248"><highlight class="normal"></highlight></codeline>
<codeline lineno="1249"><highlight class="normal"></highlight><highlight class="comment">/***<sp/>BeginHeader<sp/>xbee_cmd_set_param<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1250"><highlight class="normal"></highlight><highlight class="comment">/***<sp/>EndHeader<sp/>*/</highlight></codeline>
<codeline lineno="1271"><highlight class="normal">_xbee_atcmd_debug</highlight></codeline>
<codeline lineno="1272" refid="group__xbee__atcmd_1ga4295dde3673b07f41e569e333abd9730" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group__xbee__atcmd_1ga4295dde3673b07f41e569e333abd9730" kindref="member">xbee_cmd_set_param</ref>(<sp/><ref refid="group__hal__dos_1ga2140805d08462d474b82ddc8d1c2f3e6" kindref="member">int16_t</ref><sp/>handle,<sp/><ref refid="group__hal__dos_1ga09a1e304d66d35dd47daffee9731edaa" kindref="member">uint32_t</ref><sp/><ref refid="group__xbee__atcmd_1ga5bf2410fa8ec37f47f8afeba8dcc7f1b" kindref="member">value</ref>)</highlight></codeline>
<codeline lineno="1273"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1274"><highlight class="normal"><sp/><sp/><sp/><ref refid="structxbee__cmd__request__t" kindref="compound">xbee_cmd_request_t</ref><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/>*request;</highlight></codeline>
<codeline lineno="1275"><highlight class="normal"></highlight></codeline>
<codeline lineno="1276"><highlight class="normal"><sp/><sp/><sp/>request<sp/>=<sp/><ref refid="group__xbee__atcmd_1ga710b2223cda09c52a8518c964da88347" kindref="member">_xbee_cmd_handle_to_address</ref>(<sp/>handle);</highlight></codeline>
<codeline lineno="1277"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<sp/>request)</highlight></codeline>
<codeline lineno="1278"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1279"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-<ref refid="group__hal_1ga2d1678d5a7cc8ce499643f3b8957def4" kindref="member">EINVAL</ref>;</highlight></codeline>
<codeline lineno="1280"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1281"><highlight class="normal"></highlight></codeline>
<codeline lineno="1282"><highlight class="normal"><sp/><sp/><sp/>request-&gt;param_length<sp/>=<sp/><ref refid="group__xbee__atcmd_1ga484572705b9695ab429fd51188f74238" kindref="member">_xbee_cmd_encode_param</ref>(<sp/>request-&gt;param,<sp/>value);</highlight></codeline>
<codeline lineno="1283"><highlight class="normal"></highlight></codeline>
<codeline lineno="1284"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="1285"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1286"><highlight class="normal"></highlight></codeline>
<codeline lineno="1287"><highlight class="normal"></highlight><highlight class="comment">/***<sp/>BeginHeader<sp/>xbee_cmd_set_param_bytes<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1288"><highlight class="normal"></highlight><highlight class="comment">/***<sp/>EndHeader<sp/>*/</highlight></codeline>
<codeline lineno="1309"><highlight class="normal">_xbee_atcmd_debug</highlight></codeline>
<codeline lineno="1310" refid="group__xbee__atcmd_1ga6bd558a2d03eafe29b176f598d76ffd6" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group__xbee__atcmd_1ga6bd558a2d03eafe29b176f598d76ffd6" kindref="member">xbee_cmd_set_param_bytes</ref>(<sp/><ref refid="group__hal__dos_1ga2140805d08462d474b82ddc8d1c2f3e6" kindref="member">int16_t</ref><sp/>handle,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/>*<ref refid="group__xbee__io_1gac5955aa1e44ff234e6d78a19cf68f25c" kindref="member">data</ref>,</highlight></codeline>
<codeline lineno="1311"><highlight class="normal"><sp/><sp/><sp/><ref refid="group__hal__dos_1gae1affc9ca37cfb624959c866a73f83c2" kindref="member">uint8_t</ref><sp/><ref refid="group__zdo_1gab2b3adeb2a67e656ff030b56727fd0ac" kindref="member">length</ref>)</highlight></codeline>
<codeline lineno="1312"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1313"><highlight class="normal"><sp/><sp/><sp/><ref refid="structxbee__cmd__request__t" kindref="compound">xbee_cmd_request_t</ref><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/>*request;</highlight></codeline>
<codeline lineno="1314"><highlight class="normal"></highlight></codeline>
<codeline lineno="1315"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(length<sp/>&gt;<sp/><ref refid="group__xbee__atcmd_1ga9b1046f9c200c1bb0a9b57cb0ec474df" kindref="member">XBEE_CMD_MAX_PARAM_LENGTH</ref>)</highlight></codeline>
<codeline lineno="1316"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1317"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/>#ifdef<sp/>XBEE_ATCMD_VERBOSE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1318"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(<sp/></highlight><highlight class="stringliteral">&quot;%s:<sp/>ERROR<sp/>-EMSGSIZE<sp/>(length<sp/>%d<sp/>&gt;<sp/>%d)\n&quot;</highlight><highlight class="normal">,<sp/>__FUNCTION__,</highlight></codeline>
<codeline lineno="1319"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>length,<sp/><ref refid="group__xbee__atcmd_1ga9b1046f9c200c1bb0a9b57cb0ec474df" kindref="member">XBEE_CMD_MAX_PARAM_LENGTH</ref>);</highlight></codeline>
<codeline lineno="1320"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/>#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1321"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-<ref refid="group__hal_1gae37becfaa095a9df5c5c788bce5aa06f" kindref="member">EMSGSIZE</ref>;</highlight></codeline>
<codeline lineno="1322"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1323"><highlight class="normal"></highlight></codeline>
<codeline lineno="1324"><highlight class="normal"><sp/><sp/><sp/>request<sp/>=<sp/><ref refid="group__xbee__atcmd_1ga710b2223cda09c52a8518c964da88347" kindref="member">_xbee_cmd_handle_to_address</ref>(<sp/>handle);</highlight></codeline>
<codeline lineno="1325"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<sp/>request)</highlight></codeline>
<codeline lineno="1326"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1327"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/>#ifdef<sp/>XBEE_ATCMD_VERBOSE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1328"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(<sp/></highlight><highlight class="stringliteral">&quot;%s:<sp/>ERROR<sp/>-EINVAL<sp/>(handle=0x%04x<sp/>(%s))\n&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="1329"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>__FUNCTION__,<sp/>handle,<sp/>request<sp/>?<sp/></highlight><highlight class="stringliteral">&quot;valid&quot;</highlight><highlight class="normal"><sp/>:<sp/></highlight><highlight class="stringliteral">&quot;invalid&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1330"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/>#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1331"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-<ref refid="group__hal_1ga2d1678d5a7cc8ce499643f3b8957def4" kindref="member">EINVAL</ref>;</highlight></codeline>
<codeline lineno="1332"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1333"><highlight class="normal"></highlight></codeline>
<codeline lineno="1334"><highlight class="normal"><sp/><sp/><sp/>request-&gt;param_length<sp/>=<sp/><ref refid="group__zdo_1gab2b3adeb2a67e656ff030b56727fd0ac" kindref="member">length</ref>;</highlight></codeline>
<codeline lineno="1335"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(length<sp/>&gt;<sp/>0)</highlight></codeline>
<codeline lineno="1336"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1337"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>_f_memcpy(<sp/>request-&gt;param,<sp/>data,<sp/>length);</highlight></codeline>
<codeline lineno="1338"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1339"><highlight class="normal"></highlight></codeline>
<codeline lineno="1340"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="1341"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1342"><highlight class="normal"></highlight></codeline>
<codeline lineno="1343"><highlight class="normal"></highlight><highlight class="comment">/***<sp/>BeginHeader<sp/>xbee_cmd_set_param_str<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1344"><highlight class="normal"></highlight><highlight class="comment">/***<sp/>EndHeader<sp/>*/</highlight></codeline>
<codeline lineno="1366"><highlight class="normal">_xbee_atcmd_debug</highlight></codeline>
<codeline lineno="1367" refid="group__xbee__atcmd_1ga5b69459e7c47be384c9add2921e507e0" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group__xbee__atcmd_1ga5b69459e7c47be384c9add2921e507e0" kindref="member">xbee_cmd_set_param_str</ref>(<sp/><ref refid="group__hal__dos_1ga2140805d08462d474b82ddc8d1c2f3e6" kindref="member">int16_t</ref><sp/>handle,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/>*str)</highlight></codeline>
<codeline lineno="1368"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1369"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group__zdo_1gab2b3adeb2a67e656ff030b56727fd0ac" kindref="member">length</ref><sp/>=<sp/>strlen(<sp/>str);</highlight></codeline>
<codeline lineno="1370"><highlight class="normal"></highlight></codeline>
<codeline lineno="1371"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(length<sp/>&gt;<sp/><ref refid="group__xbee__atcmd_1ga9b1046f9c200c1bb0a9b57cb0ec474df" kindref="member">XBEE_CMD_MAX_PARAM_LENGTH</ref>)</highlight></codeline>
<codeline lineno="1372"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1373"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-<ref refid="group__hal_1gae37becfaa095a9df5c5c788bce5aa06f" kindref="member">EMSGSIZE</ref>;</highlight></codeline>
<codeline lineno="1374"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1375"><highlight class="normal"></highlight></codeline>
<codeline lineno="1376"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/>#if<sp/>XBEE_CMD_MAX_PARAM_LENGTH<sp/>&gt;<sp/>255</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1377"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/>#error<sp/>This<sp/>code<sp/>assumes<sp/>XBEE_CMD_MAX_PARAM_LENGTH<sp/>is<sp/>&lt;=<sp/>255.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1378"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/>#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1379"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__xbee__atcmd_1ga6bd558a2d03eafe29b176f598d76ffd6" kindref="member">xbee_cmd_set_param_bytes</ref>(<sp/>handle,<sp/>str,<sp/>(<ref refid="group__hal__dos_1gae1affc9ca37cfb624959c866a73f83c2" kindref="member">uint8_t</ref>)<sp/>length);</highlight></codeline>
<codeline lineno="1380"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1381"><highlight class="normal"></highlight></codeline>
<codeline lineno="1382"><highlight class="normal"></highlight><highlight class="comment">/***<sp/>BeginHeader<sp/>xbee_cmd_send<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1383"><highlight class="normal"></highlight><highlight class="comment">/***<sp/>EndHeader<sp/>*/</highlight></codeline>
<codeline lineno="1403"><highlight class="normal">_xbee_atcmd_debug</highlight></codeline>
<codeline lineno="1404" refid="group__xbee__atcmd_1ga2c58eedef60b41dd30ae1f6b475606a8" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group__xbee__atcmd_1ga2c58eedef60b41dd30ae1f6b475606a8" kindref="member">xbee_cmd_send</ref>(<sp/><ref refid="group__hal__dos_1ga2140805d08462d474b82ddc8d1c2f3e6" kindref="member">int16_t</ref><sp/>handle)</highlight></codeline>
<codeline lineno="1405"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1406"><highlight class="normal"><sp/><sp/><sp/><ref refid="structxbee__cmd__request__t" kindref="compound">xbee_cmd_request_t</ref><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/>*request;</highlight></codeline>
<codeline lineno="1407"><highlight class="normal"><sp/><sp/><sp/><ref refid="unionxbee__header__at__request__t" kindref="compound">xbee_header_at_request_t</ref><sp/>header;</highlight></codeline>
<codeline lineno="1408"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/>header_size;</highlight></codeline>
<codeline lineno="1409"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>error;</highlight></codeline>
<codeline lineno="1410"><highlight class="normal"></highlight></codeline>
<codeline lineno="1411"><highlight class="normal"><sp/><sp/><sp/>request<sp/>=<sp/><ref refid="group__xbee__atcmd_1ga710b2223cda09c52a8518c964da88347" kindref="member">_xbee_cmd_handle_to_address</ref>(<sp/>handle);</highlight></codeline>
<codeline lineno="1412"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<sp/>request)</highlight></codeline>
<codeline lineno="1413"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1414"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-<ref refid="group__hal_1ga2d1678d5a7cc8ce499643f3b8957def4" kindref="member">EINVAL</ref>;</highlight></codeline>
<codeline lineno="1415"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1416"><highlight class="normal"></highlight></codeline>
<codeline lineno="1417"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<sp/>request-&gt;callback)</highlight></codeline>
<codeline lineno="1418"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1419"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Nothing<sp/>cares<sp/>about<sp/>the<sp/>response,<sp/>so<sp/>use<sp/>Frame<sp/>ID<sp/>0<sp/>so<sp/>the<sp/>target</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1420"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>device<sp/>won&apos;t<sp/>send<sp/>a<sp/>response.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1421"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>request-&gt;frame_id<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1422"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1423"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1424"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1425"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>set<sp/>the<sp/>request&apos;s<sp/>frame<sp/>ID</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1426"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>DEVNOTE:<sp/>What<sp/>if<sp/>this<sp/>is<sp/>a<sp/>resend?<sp/><sp/>Should<sp/>we<sp/>keep<sp/>the<sp/>same<sp/>frame<sp/>ID?</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1427"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>request-&gt;frame_id<sp/>=<sp/>(<ref refid="group__hal__dos_1gae1affc9ca37cfb624959c866a73f83c2" kindref="member">uint8_t</ref>)<sp/><ref refid="group__xbee__device_1ga9faca10d7a960dcd3c0c3ad9c0d59cab" kindref="member">xbee_next_frame_id</ref>(<sp/>request-&gt;device);</highlight></codeline>
<codeline lineno="1428"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1429"><highlight class="normal"></highlight></codeline>
<codeline lineno="1430"><highlight class="normal"></highlight><highlight class="preprocessor">#ifndef<sp/>XBEE_CMD_DISABLE_REMOTE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1431"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(request-&gt;flags<sp/>&amp;<sp/><ref refid="atcmd_8h_1a47b4e0186b3bf4fba506d58e5e7ebbe4" kindref="member">XBEE_CMD_FLAG_REMOTE</ref>)</highlight></codeline>
<codeline lineno="1432"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1433"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>header.<ref refid="unionxbee__header__at__request__t_1afa34d393db5fa915716b483011415ddc" kindref="member">frame_type</ref><sp/>=<sp/><ref refid="group__xbee__device_1gga7753bbebaf00d6d64942f64b6ae9b7b9a44cc0afd79605edfc1f4d5cbb7ed62a2" kindref="member">XBEE_FRAME_REMOTE_AT_CMD</ref>;</highlight></codeline>
<codeline lineno="1434"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>header.<ref refid="unionxbee__header__at__request__t_1afaac4d50b8627529565a1d55950c44f6" kindref="member">remote</ref>.frame_id<sp/>=<sp/>request-&gt;frame_id;</highlight></codeline>
<codeline lineno="1435"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>header.<ref refid="unionxbee__header__at__request__t_1afaac4d50b8627529565a1d55950c44f6" kindref="member">remote</ref>.ieee_address<sp/>=<sp/>request-&gt;address.ieee;</highlight></codeline>
<codeline lineno="1436"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>header.<ref refid="unionxbee__header__at__request__t_1afaac4d50b8627529565a1d55950c44f6" kindref="member">remote</ref>.network_address_be<sp/>=<sp/><ref refid="group__util__byteorder_1ga4b9167199621b390f82c3e5361ba6df6" kindref="member">htobe16</ref>(<sp/>request-&gt;address.network);</highlight></codeline>
<codeline lineno="1437"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>header.<ref refid="unionxbee__header__at__request__t_1afaac4d50b8627529565a1d55950c44f6" kindref="member">remote</ref>.options<sp/>=<sp/>(request-&gt;flags<sp/>&amp;<sp/><ref refid="atcmd_8h_1a5eaa2d8338dc2a6573754f6726f54e86" kindref="member">XBEE_CMD_FLAG_QUEUE_CHANGE</ref>)<sp/>?</highlight></codeline>
<codeline lineno="1438"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__xbee__atcmd_1ga3ca0a18e4e629050e8f1387f72638f69" kindref="member">XBEE_REMOTE_AT_OPT_QUEUE</ref><sp/>:<sp/><ref refid="group__xbee__atcmd_1ga61c52828070a499e9fbfc4e6edef158b" kindref="member">XBEE_REMOTE_AT_OPT_IMMEDIATE</ref>;</highlight></codeline>
<codeline lineno="1439"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>header.<ref refid="unionxbee__header__at__request__t_1afaac4d50b8627529565a1d55950c44f6" kindref="member">remote</ref>.command.w<sp/>=<sp/>request-&gt;command.w;</highlight></codeline>
<codeline lineno="1440"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>header_size<sp/>=<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(xbee_header_remote_at_req_t);</highlight></codeline>
<codeline lineno="1441"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1442"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1443"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1444"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1445"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>header.<ref refid="unionxbee__header__at__request__t_1afa34d393db5fa915716b483011415ddc" kindref="member">frame_type</ref><sp/>=<sp/>(request-&gt;flags<sp/>&amp;<sp/><ref refid="atcmd_8h_1a5eaa2d8338dc2a6573754f6726f54e86" kindref="member">XBEE_CMD_FLAG_QUEUE_CHANGE</ref>)<sp/>?</highlight></codeline>
<codeline lineno="1446"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__xbee__device_1gga7753bbebaf00d6d64942f64b6ae9b7b9a4dccc9c3f9859247218c0d0a93e2582a" kindref="member">XBEE_FRAME_LOCAL_AT_CMD_Q</ref><sp/>:<sp/><ref refid="group__xbee__device_1gga7753bbebaf00d6d64942f64b6ae9b7b9a540fdafbf3dbb8b5d07be5888e3573ee" kindref="member">XBEE_FRAME_LOCAL_AT_CMD</ref>;</highlight></codeline>
<codeline lineno="1447"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>header.<ref refid="unionxbee__header__at__request__t_1aae9b1a9bf279fa1932c6222e3d4b5da2" kindref="member">local</ref>.frame_id<sp/>=<sp/>request-&gt;frame_id;</highlight></codeline>
<codeline lineno="1448"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>header.<ref refid="unionxbee__header__at__request__t_1aae9b1a9bf279fa1932c6222e3d4b5da2" kindref="member">local</ref>.command.w<sp/>=<sp/>request-&gt;command.w;</highlight></codeline>
<codeline lineno="1449"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>header_size<sp/>=<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(xbee_header_local_at_req_t);</highlight></codeline>
<codeline lineno="1450"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1451"><highlight class="normal"></highlight></codeline>
<codeline lineno="1452"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/>#ifdef<sp/>XBEE_ATCMD_VERBOSE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1453"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>puts(<sp/></highlight><highlight class="stringliteral">&quot;atcmd<sp/>header<sp/>is:&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1454"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__util_1gaa321236a0cb6f4e0dad592fdf1b550d2" kindref="member">hex_dump</ref>(<sp/>&amp;header,<sp/>header_size,<sp/><ref refid="group__hal_1ga696f6553e33cbd20eda34e220ec9939a" kindref="member">HEX_DUMP_FLAG_TAB</ref>);</highlight></codeline>
<codeline lineno="1455"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(request-&gt;param_length)</highlight></codeline>
<codeline lineno="1456"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1457"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>puts(<sp/></highlight><highlight class="stringliteral">&quot;atcmd<sp/>param<sp/>is:&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1458"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__util_1gaa321236a0cb6f4e0dad592fdf1b550d2" kindref="member">hex_dump</ref>(<sp/>request-&gt;param,<sp/>request-&gt;param_length,<sp/><ref refid="group__hal_1ga696f6553e33cbd20eda34e220ec9939a" kindref="member">HEX_DUMP_FLAG_TAB</ref>);</highlight></codeline>
<codeline lineno="1459"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1460"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/>#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1461"><highlight class="normal"></highlight></codeline>
<codeline lineno="1462"><highlight class="normal"><sp/><sp/><sp/>error<sp/>=<sp/><ref refid="group__xbee__device_1ga51f281b72bffcc99eec0e8c7f65a5f3f" kindref="member">xbee_frame_write</ref>(<sp/>request-&gt;device,<sp/>&amp;header,<sp/>header_size,</highlight></codeline>
<codeline lineno="1463"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>request-&gt;param,<sp/>request-&gt;param_length,<sp/>XBEE_DEV_FLAG_NONE);</highlight></codeline>
<codeline lineno="1464"><highlight class="normal"></highlight></codeline>
<codeline lineno="1465"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<sp/>error)</highlight></codeline>
<codeline lineno="1466"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1467"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(request-&gt;frame_id<sp/>!=<sp/>0)</highlight></codeline>
<codeline lineno="1468"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1469"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>we&apos;re<sp/>expecting<sp/>a<sp/>response,<sp/>so<sp/>update<sp/>the<sp/>timeout<sp/>value</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1470"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>request-&gt;timeout<sp/>=</highlight></codeline>
<codeline lineno="1471"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>XBEE_CMD_DISABLE_REMOTE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1472"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__hal_1ga6adb5c9e19c84a261c569ff4d77d1170" kindref="member">XBEE_SET_TIMEOUT_SEC</ref>(<sp/><ref refid="group__xbee__atcmd_1gae5e93a4c6f52f5853d19a8b4a78810a6" kindref="member">XBEE_CMD_LOCAL_TIMEOUT</ref>);</highlight></codeline>
<codeline lineno="1473"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1474"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__hal_1ga6adb5c9e19c84a261c569ff4d77d1170" kindref="member">XBEE_SET_TIMEOUT_SEC</ref>(<sp/>request-&gt;flags<sp/>&amp;<sp/><ref refid="atcmd_8h_1a47b4e0186b3bf4fba506d58e5e7ebbe4" kindref="member">XBEE_CMD_FLAG_REMOTE</ref></highlight></codeline>
<codeline lineno="1475"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>?<sp/><ref refid="group__xbee__atcmd_1ga386fdd4cf7046c98379878dab89e5012" kindref="member">XBEE_CMD_REMOTE_TIMEOUT</ref><sp/>:<sp/><ref refid="group__xbee__atcmd_1gae5e93a4c6f52f5853d19a8b4a78810a6" kindref="member">XBEE_CMD_LOCAL_TIMEOUT</ref>);</highlight></codeline>
<codeline lineno="1476"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1477"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1478"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<sp/>(request-&gt;flags<sp/>&amp;<sp/><ref refid="atcmd_8h_1acac52973ec9c2518fe82619a75b2b854" kindref="member">XBEE_CMD_FLAG_REUSE_HANDLE</ref>))</highlight></codeline>
<codeline lineno="1479"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1480"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__xbee__atcmd_1ga899d5ef84ca5790c3c76b965f88874e0" kindref="member">_xbee_cmd_release_request</ref>(<sp/>request);</highlight></codeline>
<codeline lineno="1481"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1482"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1483"><highlight class="normal"></highlight></codeline>
<codeline lineno="1484"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>error;</highlight></codeline>
<codeline lineno="1485"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1486"><highlight class="normal"></highlight></codeline>
<codeline lineno="1487"><highlight class="normal"></highlight></codeline>
<codeline lineno="1488"><highlight class="normal"></highlight><highlight class="comment">/***<sp/>BeginHeader<sp/>_xbee_cmd_handle_response<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1489"><highlight class="normal"></highlight><highlight class="comment">/***<sp/>EndHeader<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1490"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>__XBEE_PLATFORM_HCS08</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1491"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/>#pragma<sp/>MESSAGE<sp/>DISABLE<sp/>C5909<sp/><sp/><sp/><sp/>//<sp/>Assignment<sp/>in<sp/>condition<sp/>is<sp/>OK</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1492"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1493"><highlight class="normal"></highlight></codeline>
<codeline lineno="1504"><highlight class="normal">_xbee_atcmd_debug</highlight></codeline>
<codeline lineno="1505" refid="group__xbee__atcmd_1ga3b4559f4e729b1c96f5c0d9e4476aa7d" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group__xbee__atcmd_1ga3b4559f4e729b1c96f5c0d9e4476aa7d" kindref="member">_xbee_cmd_handle_response</ref>(<sp/><ref refid="structxbee__dev__t" kindref="compound">xbee_dev_t</ref><sp/>*xbee,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/>*rawframe,</highlight></codeline>
<codeline lineno="1506"><highlight class="normal"><sp/><sp/><sp/><ref refid="group__hal__dos_1ga5a8b2dc9e45a9ee81a94ef304fb62505" kindref="member">uint16_t</ref><sp/><ref refid="group__zdo_1gab2b3adeb2a67e656ff030b56727fd0ac" kindref="member">length</ref>,<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/>*context)</highlight></codeline>
<codeline lineno="1507"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1508"><highlight class="normal"><sp/><sp/><sp/><ref refid="structxbee__cmd__response__t" kindref="compound">xbee_cmd_response_t</ref><sp/>response;<sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>response<sp/>passed<sp/>to<sp/>callback</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1509"><highlight class="normal"></highlight></codeline>
<codeline lineno="1510"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="unionxbee__frame__at__response__t" kindref="compound">xbee_frame_at_response_t</ref><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/>*frame<sp/>=<sp/>rawframe;</highlight></codeline>
<codeline lineno="1511"><highlight class="normal"><sp/><sp/><sp/><ref refid="unionxbee__at__cmd__t" kindref="compound">xbee_at_cmd_t</ref><sp/><ref refid="group__xbee__atcmd_1ga1a5aaa930940857f68f245eeb89506b5" kindref="member">command</ref>;</highlight></codeline>
<codeline lineno="1512"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="group__hal__dos_1gae1affc9ca37cfb624959c866a73f83c2" kindref="member">uint8_t</ref><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/>*<ref refid="group__xbee__atcmd_1ga5bf2410fa8ec37f47f8afeba8dcc7f1b" kindref="member">value</ref>;</highlight></codeline>
<codeline lineno="1513"><highlight class="normal"><sp/><sp/><sp/>uint_fast8_t<sp/>value_length;</highlight></codeline>
<codeline lineno="1514"><highlight class="normal"></highlight></codeline>
<codeline lineno="1515"><highlight class="normal"><sp/><sp/><sp/><ref refid="group__hal__dos_1ga04dd5074964518403bf944f2b240a5f8" kindref="member">bool_t</ref><sp/>is_local;</highlight></codeline>
<codeline lineno="1516"><highlight class="normal"><sp/><sp/><sp/><ref refid="group__hal__dos_1gae1affc9ca37cfb624959c866a73f83c2" kindref="member">uint8_t</ref><sp/><ref refid="group__xbee__atcmd_1gade818037fd6c985038ff29656089758d" kindref="member">status</ref>,<sp/><ref refid="group__xbee__atcmd_1ga03c1016ac46b9df250b994f242cf956a" kindref="member">frame_id</ref>;</highlight></codeline>
<codeline lineno="1517"><highlight class="normal"></highlight></codeline>
<codeline lineno="1518"><highlight class="normal"><sp/><sp/><sp/>uint_fast8_t<sp/>index;</highlight></codeline>
<codeline lineno="1519"><highlight class="normal"><sp/><sp/><sp/><ref refid="structxbee__cmd__request__t" kindref="compound">xbee_cmd_request_t</ref><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/>*request;</highlight></codeline>
<codeline lineno="1520"><highlight class="normal"></highlight></codeline>
<codeline lineno="1521"><highlight class="normal"><sp/><sp/><sp/><ref refid="structwpan__address__t" kindref="compound">wpan_address_t</ref><sp/>sender;</highlight></codeline>
<codeline lineno="1522"><highlight class="normal"></highlight></codeline>
<codeline lineno="1523"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/>#ifdef<sp/>XBEE_ATCMD_VERBOSE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1524"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>variables<sp/>used<sp/>to<sp/>dump<sp/>responses<sp/>that<sp/>don&apos;t<sp/>match<sp/>a<sp/>callback</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1525"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__hal__dos_1gae1affc9ca37cfb624959c866a73f83c2" kindref="member">uint8_t</ref><sp/>buffer[100];</highlight></codeline>
<codeline lineno="1526"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*p;</highlight></codeline>
<codeline lineno="1527"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="group__hal__dos_1gae1affc9ca37cfb624959c866a73f83c2" kindref="member">uint8_t</ref><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/>*b;</highlight></codeline>
<codeline lineno="1528"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>ch;</highlight></codeline>
<codeline lineno="1529"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__hal__dos_1ga5a8b2dc9e45a9ee81a94ef304fb62505" kindref="member">uint16_t</ref><sp/>i;</highlight></codeline>
<codeline lineno="1530"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/>#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1531"><highlight class="normal"></highlight></codeline>
<codeline lineno="1532"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>standard<sp/>frame<sp/>handler<sp/>API,<sp/>but<sp/>we<sp/>don&apos;t<sp/>make<sp/>use<sp/>of<sp/>context</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1533"><highlight class="normal"><sp/><sp/><sp/><ref refid="group__hal_1gacddb73dac3fd1bdec26cd7dc0a652c00" kindref="member">XBEE_UNUSED_PARAMETER</ref>(<sp/>context);</highlight></codeline>
<codeline lineno="1534"><highlight class="normal"></highlight></codeline>
<codeline lineno="1535"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(frame<sp/>==<sp/>NULL)</highlight></codeline>
<codeline lineno="1536"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1537"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>extra<sp/>checking,<sp/>since<sp/>stack<sp/>always<sp/>passes<sp/>a<sp/>valid<sp/>frame</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1538"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-<ref refid="group__hal_1ga2d1678d5a7cc8ce499643f3b8957def4" kindref="member">EINVAL</ref>;</highlight></codeline>
<codeline lineno="1539"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1540"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(frame-&gt;frame_type)</highlight></codeline>
<codeline lineno="1541"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1542"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__xbee__device_1gga7753bbebaf00d6d64942f64b6ae9b7b9ae66771334070219cd098c8201936cf4a" kindref="member">XBEE_FRAME_LOCAL_AT_RESPONSE</ref>:</highlight></codeline>
<codeline lineno="1543"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>is_local<sp/>=<sp/>TRUE;</highlight></codeline>
<codeline lineno="1544"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>value<sp/>=<sp/>frame-&gt;local.value;</highlight></codeline>
<codeline lineno="1545"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>value_length<sp/>=<sp/>(uint_fast8_t)</highlight></codeline>
<codeline lineno="1546"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(length<sp/>-<sp/>offsetof(xbee_frame_local_at_resp_t,<sp/>value));</highlight></codeline>
<codeline lineno="1547"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>command<sp/>=<sp/>frame-&gt;local.header.command;</highlight></codeline>
<codeline lineno="1548"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>status<sp/>=<sp/>frame-&gt;local.header.status;</highlight></codeline>
<codeline lineno="1549"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1550"><highlight class="normal"></highlight></codeline>
<codeline lineno="1551"><highlight class="normal"></highlight><highlight class="preprocessor">#ifndef<sp/>XBEE_CMD_DISABLE_REMOTE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1552"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__xbee__device_1gga7753bbebaf00d6d64942f64b6ae9b7b9a3cd726459592fab4cdc9b5e6bbecb79f" kindref="member">XBEE_FRAME_REMOTE_AT_RESPONSE</ref>:</highlight></codeline>
<codeline lineno="1553"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>is_local<sp/>=<sp/>FALSE;</highlight></codeline>
<codeline lineno="1554"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>value<sp/>=<sp/>frame-&gt;remote.value;</highlight></codeline>
<codeline lineno="1555"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>value_length<sp/>=<sp/>(uint_fast8_t)</highlight></codeline>
<codeline lineno="1556"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(length<sp/>-<sp/>offsetof(xbee_frame_remote_at_resp_t,<sp/>value));</highlight></codeline>
<codeline lineno="1557"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>command<sp/>=<sp/>frame-&gt;remote.header.command;</highlight></codeline>
<codeline lineno="1558"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>status<sp/>=<sp/>frame-&gt;remote.header.status;</highlight></codeline>
<codeline lineno="1559"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1560"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1561"><highlight class="normal"></highlight></codeline>
<codeline lineno="1562"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1563"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Shouldn&apos;t<sp/>get<sp/>to<sp/>this<sp/>point<sp/>since<sp/>the<sp/>handler<sp/>is<sp/>only<sp/>registered</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1564"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>for<sp/>local<sp/>and<sp/>remote<sp/>AT<sp/>Response<sp/>frames.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1565"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-<ref refid="group__hal_1ga2d1678d5a7cc8ce499643f3b8957def4" kindref="member">EINVAL</ref>;</highlight></codeline>
<codeline lineno="1566"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1567"><highlight class="normal"></highlight></codeline>
<codeline lineno="1568"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>local.frame_id<sp/>and<sp/>remote.frame_id<sp/>are<sp/>at<sp/>the<sp/>same<sp/>offset<sp/>in<sp/>the<sp/>struct</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1569"><highlight class="normal"><sp/><sp/><sp/>frame_id<sp/>=<sp/>frame-&gt;local.header.frame_id;</highlight></codeline>
<codeline lineno="1570"><highlight class="normal"></highlight></codeline>
<codeline lineno="1571"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Look<sp/>for<sp/>the<sp/>frame<sp/>in<sp/>the<sp/>table<sp/>of<sp/>pending<sp/>requests.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1572"><highlight class="normal"><sp/><sp/><sp/>request<sp/>=<sp/><ref refid="group__xbee__atcmd_1ga551531248de3d539dfb15bd89cf4734b" kindref="member">xbee_cmd_request_table</ref>;</highlight></codeline>
<codeline lineno="1573"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(index<sp/>=<sp/>0;<sp/>index<sp/>&lt;<sp/><ref refid="group__xbee__atcmd_1gaf992e9b985e2b1eb185ef3d2d38a01c0" kindref="member">XBEE_CMD_REQUEST_TABLESIZE</ref>;<sp/>++request,<sp/>++index)</highlight></codeline>
<codeline lineno="1574"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1575"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Match<sp/>device,<sp/>frame_id,<sp/>command<sp/>and<sp/>local/remote</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1576"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(request-&gt;device<sp/>==<sp/>xbee<sp/>&amp;&amp;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>sent<sp/>on<sp/>this<sp/>device</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1577"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>request-&gt;<ref refid="group__xbee__device_1ga03c1016ac46b9df250b994f242cf956a" kindref="member">frame_id</ref><sp/>==<sp/>frame_id<sp/>&amp;&amp;<sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>frame<sp/>ID<sp/>matches</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1578"><highlight class="normal">#ifndef<sp/>XBEE_CMD_DISABLE_REMOTE</highlight></codeline>
<codeline lineno="1579"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>is_local<sp/>==<sp/>!(request-&gt;flags<sp/>&amp;<sp/><ref refid="atcmd_8h_1a47b4e0186b3bf4fba506d58e5e7ebbe4" kindref="member">XBEE_CMD_FLAG_REMOTE</ref>)<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="1580"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1581"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>request-&gt;command.w<sp/>==<sp/>command.w)<sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>command<sp/>matches</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1582"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1583"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1584"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1585"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1586"><highlight class="normal"></highlight></codeline>
<codeline lineno="1587"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(index<sp/>==<sp/>XBEE_CMD_REQUEST_TABLESIZE)</highlight></codeline>
<codeline lineno="1588"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1589"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>didn&apos;t<sp/>find<sp/>request<sp/>in<sp/>table</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1590"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/>#ifdef<sp/>XBEE_ATCMD_VERBOSE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1591"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(<sp/></highlight><highlight class="stringliteral">&quot;%s:<sp/>couldn&apos;t<sp/>match<sp/>%.*s<sp/>response<sp/>to<sp/>request<sp/>table\n&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="1592"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>__FUNCTION__,<sp/>2,<sp/>command.str);</highlight></codeline>
<codeline lineno="1593"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(value_length)</highlight></codeline>
<codeline lineno="1594"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1595"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>p<sp/>=<sp/>(</highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*)<sp/>buffer;</highlight></codeline>
<codeline lineno="1596"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>b<sp/>=<sp/><ref refid="group__xbee__atcmd_1ga5bf2410fa8ec37f47f8afeba8dcc7f1b" kindref="member">value</ref>;</highlight></codeline>
<codeline lineno="1597"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>p<sp/>+=<sp/>sprintf(<sp/>p,<sp/></highlight><highlight class="stringliteral">&quot;<sp/>=<sp/>0x&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1598"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(i<sp/>=<sp/>value_length;<sp/>i;<sp/>--i)</highlight></codeline>
<codeline lineno="1599"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1600"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ch<sp/>=<sp/>*b++;</highlight></codeline>
<codeline lineno="1601"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*p++<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;0123456789abcdef&quot;</highlight><highlight class="normal">[ch<sp/>&gt;&gt;<sp/>4];</highlight></codeline>
<codeline lineno="1602"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*p++<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;0123456789abcdef&quot;</highlight><highlight class="normal">[ch<sp/>&amp;<sp/>0x0F];</highlight></codeline>
<codeline lineno="1603"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1604"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*p<sp/>=<sp/></highlight><highlight class="charliteral">&apos;\0&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1605"><highlight class="normal"></highlight></codeline>
<codeline lineno="1606"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(<sp/></highlight><highlight class="stringliteral">&quot;%s\n&quot;</highlight><highlight class="normal">,<sp/>buffer);</highlight></codeline>
<codeline lineno="1607"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1608"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/>#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1609"><highlight class="normal"></highlight></codeline>
<codeline lineno="1610"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="1611"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1612"><highlight class="normal"></highlight></codeline>
<codeline lineno="1613"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/>#ifdef<sp/>XBEE_ATCMD_VERBOSE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1614"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>printf(<sp/></highlight><highlight class="stringliteral">&quot;%s:<sp/>response<sp/>matched<sp/>request<sp/>%d\n&quot;</highlight><highlight class="normal">,<sp/>__FUNCTION__,<sp/>index);</highlight></codeline>
<codeline lineno="1615"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/>#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1616"><highlight class="normal"></highlight></codeline>
<codeline lineno="1617"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>build<sp/>response<sp/>to<sp/>pass<sp/>to<sp/>callback</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1618"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<sp/>request-&gt;callback)</highlight></codeline>
<codeline lineno="1619"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1620"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/>#ifdef<sp/>XBEE_ATCMD_VERBOSE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1621"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(<sp/></highlight><highlight class="stringliteral">&quot;%s:<sp/>no<sp/>callback<sp/>registered<sp/>for<sp/>%d\n&quot;</highlight><highlight class="normal">,<sp/>__FUNCTION__,<sp/>index);</highlight></codeline>
<codeline lineno="1622"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/>#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1623"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1624"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1625"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1626"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(is_local)</highlight></codeline>
<codeline lineno="1627"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1628"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>response.<ref refid="structxbee__cmd__response__t_1a1f8f524e73e197c24aef4fad585173b9" kindref="member">source</ref><sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="1629"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1630"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1631"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1632"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sender.ieee<sp/>=<sp/>frame-&gt;remote.header.ieee_address;</highlight></codeline>
<codeline lineno="1633"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sender.network<sp/>=<sp/><ref refid="group__util__byteorder_1gabb9b3120f6457dc04471c134fee1d221" kindref="member">be16toh</ref>(<sp/>frame-&gt;remote.header.network_address_be);</highlight></codeline>
<codeline lineno="1634"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>response.<ref refid="structxbee__cmd__response__t_1a1f8f524e73e197c24aef4fad585173b9" kindref="member">source</ref><sp/>=<sp/>&amp;sender;</highlight></codeline>
<codeline lineno="1635"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1636"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>response.<ref refid="structxbee__cmd__response__t_1ac780e07a2b2cd8df18f56240588090c5" kindref="member">device</ref><sp/>=<sp/>xbee;</highlight></codeline>
<codeline lineno="1637"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>response.<ref refid="structxbee__cmd__response__t_1aa91f8e864e06077c354e5f5216547758" kindref="member">context</ref><sp/>=<sp/>request-&gt;context;</highlight></codeline>
<codeline lineno="1638"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>response.<ref refid="structxbee__cmd__response__t_1a1542542d7a68344e5d31df924a254df4" kindref="member">handle</ref><sp/>=<sp/>(index<sp/>&lt;&lt;<sp/>8)<sp/>|<sp/>request-&gt;sequence;</highlight></codeline>
<codeline lineno="1639"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>response.<ref refid="structxbee__cmd__response__t_1aa1e66c60bb56acaced6ca2646fd44616" kindref="member">command</ref>.w<sp/>=<sp/>request-&gt;command.w;</highlight></codeline>
<codeline lineno="1640"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>response.<ref refid="structxbee__cmd__response__t_1a1e87af3c18a2fd36c61faf89949bdc3f" kindref="member">flags</ref><sp/>=<sp/>status;</highlight></codeline>
<codeline lineno="1641"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>response.<ref refid="structxbee__cmd__response__t_1af6bfa5858cb10700bab8337ebdd26561" kindref="member">value_bytes</ref><sp/>=<sp/>value;</highlight></codeline>
<codeline lineno="1642"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>response.<ref refid="structxbee__cmd__response__t_1a2c54a515e67816a5056c4526e22a91d9" kindref="member">value_length</ref><sp/>=<sp/>value_length;</highlight></codeline>
<codeline lineno="1643"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>if<sp/>(value_length<sp/>==<sp/>0)</highlight></codeline>
<codeline lineno="1644"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1645"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>response.<ref refid="structxbee__cmd__response__t_1ae7f66047e6e39ba2bb6af8b95f00d1dd" kindref="member">value</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1646"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1647"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1648"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1649"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(value_length)</highlight></codeline>
<codeline lineno="1650"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1651"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>1:</highlight></codeline>
<codeline lineno="1652"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>response.<ref refid="structxbee__cmd__response__t_1ae7f66047e6e39ba2bb6af8b95f00d1dd" kindref="member">value</ref><sp/>=<sp/>value[0];</highlight></codeline>
<codeline lineno="1653"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1654"><highlight class="normal"></highlight></codeline>
<codeline lineno="1655"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>2:</highlight></codeline>
<codeline lineno="1656"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>response.<ref refid="structxbee__cmd__response__t_1ae7f66047e6e39ba2bb6af8b95f00d1dd" kindref="member">value</ref><sp/>=<sp/><ref refid="group__util__byteorder_1gabb9b3120f6457dc04471c134fee1d221" kindref="member">be16toh</ref>(<sp/>xbee_get_unaligned16(<sp/>value));</highlight></codeline>
<codeline lineno="1657"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1658"><highlight class="normal"></highlight></codeline>
<codeline lineno="1659"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>4:</highlight></codeline>
<codeline lineno="1660"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>response.<ref refid="structxbee__cmd__response__t_1ae7f66047e6e39ba2bb6af8b95f00d1dd" kindref="member">value</ref><sp/>=<sp/><ref refid="group__util__byteorder_1ga6acac399720b3a57d9050420aa0aac41" kindref="member">be32toh</ref>(<sp/>xbee_get_unaligned32(<sp/>value));</highlight></codeline>
<codeline lineno="1661"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1662"><highlight class="normal"></highlight></codeline>
<codeline lineno="1663"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="1664"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>response.<ref refid="structxbee__cmd__response__t_1ae7f66047e6e39ba2bb6af8b95f00d1dd" kindref="member">value</ref><sp/>=<sp/>0xFFFFFFFF;</highlight></codeline>
<codeline lineno="1665"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1666"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1667"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1668"><highlight class="normal"></highlight></codeline>
<codeline lineno="1669"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/>#ifdef<sp/>XBEE_ATCMD_VERBOSE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1670"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(<sp/></highlight><highlight class="stringliteral">&quot;%s:<sp/>dispatch<sp/>to<sp/>handler<sp/>@%p<sp/>w/context<sp/>%&quot;</highlight><highlight class="normal"><sp/><ref refid="group__hal_1ga8429a3beb3448b89cb7c3877b8909369" kindref="member">PRIpFAR</ref><sp/></highlight><highlight class="stringliteral">&quot;\n&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="1671"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>__FUNCTION__,<sp/>request-&gt;callback,<sp/>response.<ref refid="structxbee__cmd__response__t_1aa91f8e864e06077c354e5f5216547758" kindref="member">context</ref>);</highlight></codeline>
<codeline lineno="1672"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/>#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1673"><highlight class="normal"></highlight></codeline>
<codeline lineno="1674"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(request-&gt;callback(<sp/>&amp;response)<sp/>==<sp/><ref refid="group__xbee__atcmd_1ga9a5078393806d67903c87b3c82597fb1" kindref="member">XBEE_ATCMD_REUSE</ref>)</highlight></codeline>
<codeline lineno="1675"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1676"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>keep<sp/>the<sp/>request<sp/>alive<sp/>(possibly<sp/>resent<sp/>by<sp/>the<sp/>callback)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1677"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>request-&gt;timeout<sp/>=<sp/><ref refid="group__hal_1ga6adb5c9e19c84a261c569ff4d77d1170" kindref="member">XBEE_SET_TIMEOUT_SEC</ref>(5);</highlight></codeline>
<codeline lineno="1678"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="1679"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1680"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1681"><highlight class="normal"></highlight></codeline>
<codeline lineno="1682"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>@todo<sp/>Only<sp/>release<sp/>if<sp/>the<sp/>appropriate<sp/>flag<sp/>is<sp/>set<sp/>(ignore<sp/>response?)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1683"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/><sp/>Then<sp/>add<sp/>a<sp/>function<sp/>to<sp/>check<sp/>the<sp/>status<sp/>of<sp/>a<sp/>request</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1684"><highlight class="normal"><sp/><sp/><sp/><ref refid="group__xbee__atcmd_1ga899d5ef84ca5790c3c76b965f88874e0" kindref="member">_xbee_cmd_release_request</ref>(<sp/>request);</highlight></codeline>
<codeline lineno="1685"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="1686"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1687"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>__XBEE_PLATFORM_HCS08</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1688"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/>#pragma<sp/>MESSAGE<sp/>DEFAULT<sp/>C5909<sp/><sp/><sp/><sp/>//<sp/>restore<sp/>C5909<sp/>(Assignment<sp/>in<sp/>condition)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1689"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1690"><highlight class="normal"></highlight></codeline>
<codeline lineno="1691"><highlight class="normal"></highlight><highlight class="comment">/***<sp/>BeginHeader<sp/>_xbee_cmd_modem_status<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1692"><highlight class="normal"></highlight><highlight class="comment">/***<sp/>EndHeader<sp/>*/</highlight></codeline>
<codeline lineno="1701"><highlight class="normal">_xbee_atcmd_debug</highlight></codeline>
<codeline lineno="1702" refid="group__xbee__atcmd_1ga9b0ddf7aae7599dc334304f2b642f05f" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group__xbee__atcmd_1ga9b0ddf7aae7599dc334304f2b642f05f" kindref="member">_xbee_cmd_modem_status</ref>(<sp/><ref refid="structxbee__dev__t" kindref="compound">xbee_dev_t</ref><sp/>*xbee,</highlight></codeline>
<codeline lineno="1703"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/>*<ref refid="group__xbee__wpan_1gae6f5e79770e3e599bf8154eac1a2f3fe" kindref="member">payload</ref>,<sp/><ref refid="group__hal__dos_1ga5a8b2dc9e45a9ee81a94ef304fb62505" kindref="member">uint16_t</ref><sp/><ref refid="group__zdo_1gab2b3adeb2a67e656ff030b56727fd0ac" kindref="member">length</ref>,<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/>*context)</highlight></codeline>
<codeline lineno="1704"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1705"><highlight class="normal"><sp/><sp/><sp/><ref refid="group__hal__dos_1gae1affc9ca37cfb624959c866a73f83c2" kindref="member">uint8_t</ref><sp/><ref refid="group__xbee__atcmd_1gade818037fd6c985038ff29656089758d" kindref="member">status</ref>;</highlight></codeline>
<codeline lineno="1706"><highlight class="normal"></highlight></codeline>
<codeline lineno="1707"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>standard<sp/>frame<sp/>handler<sp/>API,<sp/>but<sp/>we<sp/>don&apos;t<sp/>make<sp/>use<sp/>of<sp/>length<sp/>or<sp/>context</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1708"><highlight class="normal"><sp/><sp/><sp/><ref refid="group__hal_1gacddb73dac3fd1bdec26cd7dc0a652c00" kindref="member">XBEE_UNUSED_PARAMETER</ref>(<sp/>length);</highlight></codeline>
<codeline lineno="1709"><highlight class="normal"><sp/><sp/><sp/><ref refid="group__hal_1gacddb73dac3fd1bdec26cd7dc0a652c00" kindref="member">XBEE_UNUSED_PARAMETER</ref>(<sp/>context);</highlight></codeline>
<codeline lineno="1710"><highlight class="normal"></highlight></codeline>
<codeline lineno="1711"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(payload<sp/>==<sp/>NULL)</highlight></codeline>
<codeline lineno="1712"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1713"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-<ref refid="group__hal_1ga2d1678d5a7cc8ce499643f3b8957def4" kindref="member">EINVAL</ref>;</highlight></codeline>
<codeline lineno="1714"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1715"><highlight class="normal"></highlight></codeline>
<codeline lineno="1716"><highlight class="normal"><sp/><sp/><sp/>status<sp/>=<sp/>((</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>xbee_frame_modem_status_t<sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/>*)payload)-&gt;status;</highlight></codeline>
<codeline lineno="1717"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(status<sp/>==<sp/><ref refid="group__xbee__device_1ga190661653f541a9b694103dbd27fd284" kindref="member">XBEE_MODEM_STATUS_KEY_ESTABLISHED</ref><sp/>||</highlight></codeline>
<codeline lineno="1718"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>status<sp/>==<sp/><ref refid="group__xbee__device_1ga2e3f5ffd01da92dd4a25257d8bc005bc" kindref="member">XBEE_MODEM_STATUS_JOINED</ref><sp/>||</highlight></codeline>
<codeline lineno="1719"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>status<sp/>==<sp/><ref refid="group__xbee__device_1ga057ed15b292ea3e48a138c6737fb0339" kindref="member">XBEE_MODEM_STATUS_COORD_START</ref>)</highlight></codeline>
<codeline lineno="1720"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1721"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>need<sp/>to<sp/>kick<sp/>off<sp/>discovery<sp/>of<sp/>my<sp/>address</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1722"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/>#ifndef<sp/>XBEE_ATCMD_VERBOSE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1723"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__xbee__atcmd_1ga12317255ca84c2539b7d7a58816eccab" kindref="member">xbee_cmd_query_device</ref>(<sp/>xbee,<sp/>1);</highlight></codeline>
<codeline lineno="1724"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/>#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1725"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>error;</highlight></codeline>
<codeline lineno="1726"><highlight class="normal"></highlight></codeline>
<codeline lineno="1727"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(<sp/></highlight><highlight class="stringliteral">&quot;%s:<sp/>looking<sp/>up<sp/>my<sp/>network<sp/>address<sp/>(flags=0x%04X)\n&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="1728"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>__FUNCTION__,<sp/>xbee-&gt;<ref refid="group__xbee__device_1ga9ac684521a8154bddc272049a7a61b73" kindref="member">flags</ref>);</highlight></codeline>
<codeline lineno="1729"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>error<sp/>=<sp/><ref refid="group__xbee__atcmd_1ga12317255ca84c2539b7d7a58816eccab" kindref="member">xbee_cmd_query_device</ref>(<sp/>xbee,<sp/>1);</highlight></codeline>
<codeline lineno="1730"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(error)</highlight></codeline>
<codeline lineno="1731"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1732"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(<sp/></highlight><highlight class="stringliteral">&quot;%s:<sp/>error<sp/>%d<sp/>querying<sp/>device<sp/>(flags=0x%04X)\n&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="1733"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>__FUNCTION__,<sp/>error,<sp/>xbee-&gt;<ref refid="group__xbee__device_1ga9ac684521a8154bddc272049a7a61b73" kindref="member">flags</ref>);</highlight></codeline>
<codeline lineno="1734"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1735"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/>#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1736"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1737"><highlight class="normal"></highlight></codeline>
<codeline lineno="1738"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="1739"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1740"><highlight class="normal"></highlight></codeline>
<codeline lineno="1741"><highlight class="normal"></highlight><highlight class="comment">/***<sp/>BeginHeader<sp/>xbee_cmd_simple<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1742"><highlight class="normal"></highlight><highlight class="comment">/***<sp/>EndHeader<sp/>*/</highlight></codeline>
<codeline lineno="1766"><highlight class="normal">_xbee_atcmd_debug</highlight></codeline>
<codeline lineno="1767" refid="group__xbee__atcmd_1ga6b157fe048c0082253056a7bda0ba9bb" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group__xbee__atcmd_1ga6b157fe048c0082253056a7bda0ba9bb" kindref="member">xbee_cmd_simple</ref>(<sp/><ref refid="structxbee__dev__t" kindref="compound">xbee_dev_t</ref><sp/>*xbee,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/><ref refid="group__xbee__atcmd_1ga1a5aaa930940857f68f245eeb89506b5" kindref="member">command</ref>[3],</highlight></codeline>
<codeline lineno="1768"><highlight class="normal"><sp/><sp/><sp/><ref refid="group__hal__dos_1ga09a1e304d66d35dd47daffee9731edaa" kindref="member">uint32_t</ref><sp/><ref refid="group__xbee__atcmd_1ga5bf2410fa8ec37f47f8afeba8dcc7f1b" kindref="member">value</ref>)</highlight></codeline>
<codeline lineno="1769"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1770"><highlight class="normal"><sp/><sp/><sp/><ref refid="group___s_x_a_1ga4233297bd31be5c273d4fb0758cc54d7" kindref="member">PACKED_STRUCT</ref><sp/>{</highlight></codeline>
<codeline lineno="1771"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>xbee_header_local_at_req_t<sp/>header;</highlight></codeline>
<codeline lineno="1772"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__hal__dos_1gae1affc9ca37cfb624959c866a73f83c2" kindref="member">uint8_t</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>param[4];</highlight></codeline>
<codeline lineno="1773"><highlight class="normal"><sp/><sp/><sp/>}<sp/>request;</highlight></codeline>
<codeline lineno="1774"><highlight class="normal"><sp/><sp/><sp/><ref refid="group__hal__dos_1ga5a8b2dc9e45a9ee81a94ef304fb62505" kindref="member">uint16_t</ref><sp/>request_size;</highlight></codeline>
<codeline lineno="1775"><highlight class="normal"></highlight></codeline>
<codeline lineno="1776"><highlight class="normal"><sp/><sp/><sp/>request.header.frame_type<sp/>=<sp/><ref refid="group__xbee__device_1gga7753bbebaf00d6d64942f64b6ae9b7b9a540fdafbf3dbb8b5d07be5888e3573ee" kindref="member">XBEE_FRAME_LOCAL_AT_CMD</ref>;</highlight></codeline>
<codeline lineno="1777"><highlight class="normal"><sp/><sp/><sp/>request.header.frame_id<sp/>=<sp/>0;<sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>don&apos;t<sp/>need<sp/>a<sp/>response</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1778"><highlight class="normal"><sp/><sp/><sp/>request.header.command.w<sp/>=<sp/>xbee_get_unaligned16(<sp/>command);</highlight></codeline>
<codeline lineno="1779"><highlight class="normal"></highlight></codeline>
<codeline lineno="1780"><highlight class="normal"><sp/><sp/><sp/>request_size<sp/>=<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(request.header)<sp/>+</highlight></codeline>
<codeline lineno="1781"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__xbee__atcmd_1ga484572705b9695ab429fd51188f74238" kindref="member">_xbee_cmd_encode_param</ref>(<sp/>request.param,<sp/>value);</highlight></codeline>
<codeline lineno="1782"><highlight class="normal"></highlight></codeline>
<codeline lineno="1783"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/>#ifdef<sp/>XBEE_ATCMD_VERBOSE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1784"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>printf(<sp/></highlight><highlight class="stringliteral">&quot;%s:<sp/>sending<sp/>AT%.2s=%&quot;</highlight><highlight class="normal"><sp/><ref refid="group__hal_1gaaf2af4a10f0bd308e9c349c8382382be" kindref="member">PRIu32</ref><sp/></highlight><highlight class="stringliteral">&quot;<sp/>(0x%&quot;</highlight><highlight class="normal"><sp/><ref refid="group__hal_1ga80ca66bcc9e366733f02c90ed4b0838c" kindref="member">PRIx32</ref><sp/></highlight><highlight class="stringliteral">&quot;),<sp/>frame<sp/>ID<sp/>0\n&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="1785"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>__FUNCTION__,<sp/>command,<sp/>value,<sp/>value);</highlight></codeline>
<codeline lineno="1786"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/>#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1787"><highlight class="normal"></highlight></codeline>
<codeline lineno="1788"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__xbee__device_1ga51f281b72bffcc99eec0e8c7f65a5f3f" kindref="member">xbee_frame_write</ref>(<sp/>xbee,<sp/>&amp;request,<sp/>request_size,<sp/>NULL,<sp/>0,</highlight></codeline>
<codeline lineno="1789"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>XBEE_DEV_FLAG_NONE);</highlight></codeline>
<codeline lineno="1790"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1791"><highlight class="normal"></highlight></codeline>
<codeline lineno="1792"><highlight class="normal"></highlight></codeline>
<codeline lineno="1793"><highlight class="normal"></highlight><highlight class="comment">/***<sp/>BeginHeader<sp/>xbee_cmd_execute<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1794"><highlight class="normal"></highlight><highlight class="comment">/***<sp/>EndHeader<sp/>*/</highlight></codeline>
<codeline lineno="1824"><highlight class="normal">_xbee_atcmd_debug</highlight></codeline>
<codeline lineno="1825" refid="group__xbee__atcmd_1ga19d16fbaf1da1cc581fbedcb36f7263f" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group__xbee__atcmd_1ga19d16fbaf1da1cc581fbedcb36f7263f" kindref="member">xbee_cmd_execute</ref>(<sp/><ref refid="structxbee__dev__t" kindref="compound">xbee_dev_t</ref><sp/>*xbee,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/><ref refid="group__xbee__atcmd_1ga1a5aaa930940857f68f245eeb89506b5" kindref="member">command</ref>[3],</highlight></codeline>
<codeline lineno="1826"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/>*<ref refid="group__xbee__io_1gac5955aa1e44ff234e6d78a19cf68f25c" kindref="member">data</ref>,<sp/><ref refid="group__hal__dos_1gae1affc9ca37cfb624959c866a73f83c2" kindref="member">uint8_t</ref><sp/><ref refid="group__zdo_1gab2b3adeb2a67e656ff030b56727fd0ac" kindref="member">length</ref>)</highlight></codeline>
<codeline lineno="1827"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1828"><highlight class="normal"><sp/><sp/><sp/>xbee_header_local_at_req_t<sp/>request;</highlight></codeline>
<codeline lineno="1829"><highlight class="normal"></highlight></codeline>
<codeline lineno="1830"><highlight class="normal"><sp/><sp/><sp/>request.frame_type<sp/>=<sp/><ref refid="group__xbee__device_1gga7753bbebaf00d6d64942f64b6ae9b7b9a540fdafbf3dbb8b5d07be5888e3573ee" kindref="member">XBEE_FRAME_LOCAL_AT_CMD</ref>;</highlight></codeline>
<codeline lineno="1831"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>If<sp/>this<sp/>is<sp/>an<sp/>ND<sp/>command,<sp/>we&apos;ll<sp/>need<sp/>a<sp/>non-zero<sp/>frame<sp/>ID.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1832"><highlight class="normal"><sp/><sp/><sp/>request.frame_id<sp/>=<sp/>(<ref refid="group__hal__dos_1gae1affc9ca37cfb624959c866a73f83c2" kindref="member">uint8_t</ref>)<sp/><ref refid="group__xbee__device_1ga9faca10d7a960dcd3c0c3ad9c0d59cab" kindref="member">xbee_next_frame_id</ref>(<sp/>xbee);</highlight></codeline>
<codeline lineno="1833"><highlight class="normal"><sp/><sp/><sp/>request.command.w<sp/>=<sp/>xbee_get_unaligned16(<sp/>command);</highlight></codeline>
<codeline lineno="1834"><highlight class="normal"></highlight></codeline>
<codeline lineno="1835"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/>#ifdef<sp/>XBEE_ATCMD_VERBOSE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1836"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>printf(<sp/></highlight><highlight class="stringliteral">&quot;%s:<sp/>sending<sp/>AT%.2s,<sp/>frame<sp/>ID<sp/>0x%02x\n&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="1837"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>__FUNCTION__,<sp/>command,<sp/>request.frame_id);</highlight></codeline>
<codeline lineno="1838"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/>#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1839"><highlight class="normal"></highlight></codeline>
<codeline lineno="1840"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__xbee__device_1ga51f281b72bffcc99eec0e8c7f65a5f3f" kindref="member">xbee_frame_write</ref>(<sp/>xbee,<sp/>&amp;request,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(request),<sp/>data,<sp/>length,</highlight></codeline>
<codeline lineno="1841"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>XBEE_DEV_FLAG_NONE);</highlight></codeline>
<codeline lineno="1842"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1843"><highlight class="normal"></highlight></codeline>
<codeline lineno="1844"><highlight class="normal"></highlight><highlight class="comment">/***<sp/>BeginHeader<sp/>xbee_identify<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1845"><highlight class="normal"></highlight><highlight class="comment">/***<sp/>EndHeader<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1846"><highlight class="normal"></highlight><highlight class="comment">//<sp/>documented<sp/>in<sp/>xbee/atcmd.h</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1847" refid="group__xbee__device_1ga42768d8f8aa841ed4f42396cff2815aa" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__xbee__atcmd_1ga42768d8f8aa841ed4f42396cff2815aa" kindref="member">xbee_identify</ref>(<sp/><ref refid="structxbee__dev__t" kindref="compound">xbee_dev_t</ref><sp/>*xbee,<sp/><ref refid="group__hal__dos_1ga04dd5074964518403bf944f2b240a5f8" kindref="member">bool_t</ref><sp/>identify)</highlight></codeline>
<codeline lineno="1848"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1849"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="group__hal__dos_1ga04dd5074964518403bf944f2b240a5f8" kindref="member">bool_t</ref><sp/>last_id<sp/>=<sp/>FALSE;</highlight></codeline>
<codeline lineno="1850"><highlight class="normal"></highlight></codeline>
<codeline lineno="1851"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>on<sp/>state<sp/>change<sp/>--<sp/>toggle<sp/>LT<sp/>between<sp/>0<sp/>(default<sp/>rate)<sp/>and<sp/>10<sp/>(fast<sp/>flash)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1852"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(identify<sp/>!=<sp/>last_id)</highlight></codeline>
<codeline lineno="1853"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="1854"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>last_id<sp/>=<sp/>identify;</highlight></codeline>
<codeline lineno="1855"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__xbee__atcmd_1ga6b157fe048c0082253056a7bda0ba9bb" kindref="member">xbee_cmd_simple</ref>(<sp/>xbee,<sp/></highlight><highlight class="stringliteral">&quot;LT&quot;</highlight><highlight class="normal">,<sp/>last_id<sp/>?<sp/>10<sp/>:<sp/>0);</highlight></codeline>
<codeline lineno="1856"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1857"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="src/xbee/xbee_atcmd.c"/>
  </compounddef>
</doxygen>
