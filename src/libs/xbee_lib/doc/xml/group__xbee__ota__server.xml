<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.13">
  <compounddef id="group__xbee__ota__server" kind="group">
    <compoundname>xbee_ota_server</compoundname>
    <title>Server</title>
    <innerfile refid="xbee__ota__server_8c">xbee_ota_server.c</innerfile>
    <innerfile refid="ota__server_8h">ota_server.h</innerfile>
      <sectiondef kind="func">
      <memberdef kind="function" id="group__xbee__ota__server_1ga22cb77be06faba4020a4f5e0daf48f4f" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>XBEE_BEGIN_DECLS int xbee_ota_server_cmd</definition>
        <argsstring>(const wpan_envelope_t FAR *envelope, void FAR *context)</argsstring>
        <name>xbee_ota_server_cmd</name>
        <param>
          <type>const <ref refid="structwpan__envelope__t" kindref="compound">wpan_envelope_t</ref> <ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref> *</type>
          <declname>envelope</declname>
        </param>
        <param>
          <type>void <ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref> *</type>
          <declname>context</declname>
        </param>
        <briefdescription>
<para>Cluster command to initiate firmware updates. </para>        </briefdescription>
        <detaileddescription>
<para>Verifies that APS encryption was used (if cluster is configured as such) before handing off to implementation-provided function <ref refid="group__xbee__ota__server_1ga38fdff5e9fec8c3aa8bfd167621ee35c" kindref="member">xbee_update_firmware_ota()</ref>.</para><para><simplesect kind="see"><para><ref refid="group__wpan__aps_1ga8575b0db762a5fbb858d4994c9b657e3" kindref="member">wpan_aps_handler_fn</ref> </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/xbee/xbee_ota_server.c" line="30" column="1" bodyfile="src/xbee/xbee_ota_server.c" bodystart="30" bodyend="77"/>
        <references refid="group__hal_1ga2d1678d5a7cc8ce499643f3b8957def4" compoundref="platform_8h" startline="95">EINVAL</references>
        <references refid="group__wpan__aps_1ga1892eba2086d12ac2b09005aeb09ea3b" compoundref="aps_8h" startline="62">wpan_envelope_t::length</references>
        <references refid="group__xbee__atcmd_1gaace3d640c8d449b8db1162993d259d3f" compoundref="atcmd_8h" startline="264">options</references>
        <references refid="group__wpan__aps_1ga8737375e27cb391ff381fff10dc0c132" compoundref="aps_8h" startline="61">wpan_envelope_t::payload</references>
        <references refid="group__wpan__aps_1ga1eafd87038a2134da7a1f72e6801d23b" compoundref="aps_8h" startline="237">WPAN_CLUST_FLAG_ENCRYPT</references>
        <references refid="group__wpan__aps_1gaaaee02ff456d4f6103a5e94c2ba106c5" compoundref="wpan__aps_8c" startline="752" endline="776">wpan_envelope_reply</references>
        <references refid="group__wpan__aps_1ga3bf12c3b9fd0afac2c9f58de8e7c38e9" compoundref="aps_8h" startline="59">WPAN_ENVELOPE_RX_APS_ENCRYPT</references>
        <references refid="group__wpan__aps_1ga06f1e9e86b74ef807ded44b79b13e283" compoundref="wpan__aps_8c" startline="790" endline="810">wpan_envelope_send</references>
        <references refid="group__xbee__ota__server_1ga38fdff5e9fec8c3aa8bfd167621ee35c">xbee_update_firmware_ota</references>
      </memberdef>
      <memberdef kind="function" id="group__xbee__ota__server_1ga38fdff5e9fec8c3aa8bfd167621ee35c" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>const char *</type>
        <definition>const char* xbee_update_firmware_ota</definition>
        <argsstring>(const wpan_envelope_t FAR *envelope, void FAR *context)</argsstring>
        <name>xbee_update_firmware_ota</name>
        <param>
          <type>const <ref refid="structwpan__envelope__t" kindref="compound">wpan_envelope_t</ref> <ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref> *</type>
          <declname>envelope</declname>
        </param>
        <param>
          <type>void <ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref> *</type>
          <declname>context</declname>
        </param>
        <briefdescription>
<para>Application needs to provide this function as a method of receiving firmware updates over-the-air with Xmodem protocol. </para>        </briefdescription>
        <detaileddescription>
<para>See <ref refid="ota__client_8h" kindref="compound">xbee/ota_client.h</ref> for details on sending updates.</para><para>Your application can support password-protected updates by checking the payload of the request. If the payload is a valid request to initiate an update, this function should enter an &quot;XMODEM receive&quot; mode and start sending &apos;C&apos; to the sender of the request, indicating that it should start sending 64-byte XMODEM packets with the new firmware.</para><para>On Digi&apos;s Programmable XBee platform, this function would exit to the bootloader so it can receive the new application firmware.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">envelope</parametername>
</parameternamelist>
<parameterdescription>
<para>command sent to start update <ndash/> function may want to use the payload for some sort of password verification </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="inout">context</parametername>
</parameternamelist>
<parameterdescription>
<para>user context (from cluster table)</para></parameterdescription>
</parameteritem>
</parameterlist>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>NULL</parametername>
</parameternamelist>
<parameterdescription>
<para>do not respond to request </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>!NULL</parametername>
</parameternamelist>
<parameterdescription>
<para>respond to request with error message </para></parameterdescription>
</parameteritem>
</parameterlist>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="include/xbee/ota_server.h" line="68" column="1"/>
        <referencedby refid="group__xbee__ota__server_1ga22cb77be06faba4020a4f5e0daf48f4f" compoundref="xbee__ota__server_8c" startline="30" endline="77">xbee_ota_server_cmd</referencedby>
      </memberdef>
      </sectiondef>
      <sectiondef kind="define">
      <memberdef kind="define" id="group__xbee__ota__server_1gacdc427d19ad192bd817194a74a8d7b08" prot="public" static="no">
        <name>XBEE_OTA_CMD_SERVER_CLUST_ENTRY</name>
        <param><defname>flag</defname></param>
        <initializer>{	<ref refid="group__wpan__aps_1gga1227ab13b41d82d9c9c9080662f74cf7aedb825ada66b8c7bbfbeaee6d9dfba0a" kindref="member">DIGI_CLUST_PROG_XBEE_OTA_UPD</ref>,	<ref refid="group__xbee__ota__server_1ga22cb77be06faba4020a4f5e0daf48f4f" kindref="member">xbee_ota_server_cmd</ref>, NULL,			\
		(flag) | <ref refid="group__wpan__aps_1ga9e0a1a0abf5594d8fa5a38b1ca40b3bc" kindref="member">WPAN_CLUST_FLAG_SERVER</ref> | <ref refid="group__wpan__aps_1gacb0e365a8c5e72ee90be503513e7e630" kindref="member">WPAN_CLUST_FLAG_NOT_ZCL</ref> }</initializer>
        <briefdescription>
<para>Macro to add the OTA cluster to the Digi Data Endpoint. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">flag</parametername>
</parameternamelist>
<parameterdescription>
<para>set to WPAN_CLUST_FLAG_NONE or WPAN_CLUST_FLAG_ENCRYPT </para></parameterdescription>
</parameteritem>
</parameterlist>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="include/xbee/ota_server.h" line="77" column="9" bodyfile="include/xbee/ota_server.h" bodystart="77" bodyend="-1"/>
      </memberdef>
      </sectiondef>
    <briefdescription>
<para><verbatim>     Code for the Programmable XBee to receive over-the-air firmware
     updates.</verbatim> </para>    </briefdescription>
    <detaileddescription>
    </detaileddescription>
  </compounddef>
</doxygen>
