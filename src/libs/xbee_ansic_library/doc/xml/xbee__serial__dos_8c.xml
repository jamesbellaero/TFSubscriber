<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.13">
  <compounddef id="xbee__serial__dos_8c" kind="file" language="C++">
    <compoundname>xbee_serial_dos.c</compoundname>
    <includes local="no">errno.h</includes>
    <includes local="no">limits.h</includes>
    <includes local="no">stdio.h</includes>
    <includes refid="serial_8h" local="yes">xbee/serial.h</includes>
    <includes refid="cbuf_8h" local="yes">xbee/cbuf.h</includes>
    <incdepgraph>
      <node id="1066">
        <label>errno.h</label>
      </node>
      <node id="1072">
        <label>xbee/jslong_glue.h</label>
        <link refid="jslong__glue_8h_source"/>
        <childnode refid="1073" relation="include">
        </childnode>
      </node>
      <node id="1071">
        <label>stddef.h</label>
      </node>
      <node id="1067">
        <label>limits.h</label>
      </node>
      <node id="1065">
        <label>src/dos/xbee_serial_dos.c</label>
        <link refid="xbee__serial__dos_8c"/>
        <childnode refid="1066" relation="include">
        </childnode>
        <childnode refid="1067" relation="include">
        </childnode>
        <childnode refid="1068" relation="include">
        </childnode>
        <childnode refid="1069" relation="include">
        </childnode>
        <childnode refid="1074" relation="include">
        </childnode>
      </node>
      <node id="1070">
        <label>xbee/platform.h</label>
        <link refid="platform_8h"/>
        <childnode refid="1066" relation="include">
        </childnode>
        <childnode refid="1071" relation="include">
        </childnode>
        <childnode refid="1072" relation="include">
        </childnode>
      </node>
      <node id="1069">
        <label>xbee/serial.h</label>
        <link refid="serial_8h"/>
        <childnode refid="1070" relation="include">
        </childnode>
      </node>
      <node id="1074">
        <label>xbee/cbuf.h</label>
        <link refid="cbuf_8h"/>
        <childnode refid="1070" relation="include">
        </childnode>
      </node>
      <node id="1073">
        <label>xbee/jslong.h</label>
        <link refid="jslong_8h_source"/>
      </node>
      <node id="1068">
        <label>stdio.h</label>
      </node>
    </incdepgraph>
      <sectiondef kind="define">
      <memberdef kind="define" id="group__hal__dos_1ga3eb7d5a767dae7774aa2b4be28e20a7e" prot="public" static="no">
        <name>UART_RBR</name>
        <initializer>0</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="33" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="33" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1ga7a676f075475e46d27eb878977b867ec" prot="public" static="no">
        <name>UART_THR</name>
        <initializer>0</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="34" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="34" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1ga7ff21e0cfc73a2db80c3907c5cac5a61" prot="public" static="no">
        <name>UART_DLL</name>
        <initializer>0</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="35" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="35" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1gaaf7aaa372e86b3aa99e6c78242be2722" prot="public" static="no">
        <name>UART_IER</name>
        <initializer>1</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="36" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="36" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1ga63f95172026aa533407e357e73b04551" prot="public" static="no">
        <name>UART_DLM</name>
        <initializer>1</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="37" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="37" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1ga16add7e6b9f91a6698c5910704111b68" prot="public" static="no">
        <name>UART_IIR</name>
        <initializer>2</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="38" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="38" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1ga220a678f91ca8244b30fe813200c26c1" prot="public" static="no">
        <name>UART_FCR</name>
        <initializer>2</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="39" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="39" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1ga36c30861e332468c7f1998648e706740" prot="public" static="no">
        <name>UART_LCR</name>
        <initializer>3</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="40" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="40" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1ga8ef39bc0942ddd0411d87001d12224f4" prot="public" static="no">
        <name>UART_MCR</name>
        <initializer>4</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="41" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="41" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1ga0f8ac527073d763bac90daba987361c6" prot="public" static="no">
        <name>UART_LSR</name>
        <initializer>5</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="42" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="42" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1ga71067c48bdde7dc6c5d0a1c56746e776" prot="public" static="no">
        <name>UART_MSR</name>
        <initializer>6</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="43" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="43" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1ga0aca402a154875f36d38e4ebc5c8f043" prot="public" static="no">
        <name>UART_SCR</name>
        <initializer>7</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="44" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="44" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1ga2c43b3d54061de2d1a40c11a0dc36d99" prot="public" static="no">
        <name>IER_NONE</name>
        <initializer>0</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="47" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="47" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1ga06339c8fac453ce9078d90d59d1d5833" prot="public" static="no">
        <name>IER_RX_DATA</name>
        <initializer>(1&lt;&lt;0)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="48" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="48" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1ga3b5355c5845bf4e5f9900dae4977fc65" prot="public" static="no">
        <name>IER_TX_EMPTY</name>
        <initializer>(1&lt;&lt;1)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="49" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="49" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1ga8fdda855b9a7ec12dccdb44f0e985af5" prot="public" static="no">
        <name>IER_LSR_CHANGE</name>
        <initializer>(1&lt;&lt;2)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="50" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="50" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1gaf722d4c4e6617d62b6a2ea4f8fcdc7a3" prot="public" static="no">
        <name>IER_MSR_CHANGE</name>
        <initializer>(1&lt;&lt;3)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="51" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="51" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1ga90f46b37cc5f1208e83a0a027e83f2c8" prot="public" static="no">
        <name>IER_DEFAULT</name>
        <initializer>(IER_RX_DATA | IER_TX_EMPTY | IER_LSR_CHANGE)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="53" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="53" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1ga50ff8e2789f5f8485ad903fa36cb5ff4" prot="public" static="no">
        <name>FCR_DISABLE_FIFOS</name>
        <initializer>(0&lt;&lt;0)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="56" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="56" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1gacbbf96e0ad7b0c0ce83ded2a69b7edd6" prot="public" static="no">
        <name>FCR_ENABLE_FIFOS</name>
        <initializer>(1&lt;&lt;0)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="57" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="57" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1gaab7aea2b0a8ad9fbaf3e59d3f069c38c" prot="public" static="no">
        <name>FCR_CLEAR_RX_FIFO</name>
        <initializer>(1&lt;&lt;1)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="58" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="58" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1ga37c91cd823b315b67cb9d1bbf902feb4" prot="public" static="no">
        <name>FCR_CLEAR_TX_FIFO</name>
        <initializer>(1&lt;&lt;2)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="59" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="59" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1gae6161db9bf7143fe70cf25f70998c9c0" prot="public" static="no">
        <name>FCR_DMA_MODE_0</name>
        <initializer>(0&lt;&lt;3)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="60" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="60" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1gac313793a646e3df0162722cb7ae49ef1" prot="public" static="no">
        <name>FCR_DMA_MODE_1</name>
        <initializer>(1&lt;&lt;3)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="61" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="61" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1gafc8e8e20ec7621118f93a5bf7bc81c4b" prot="public" static="no">
        <name>FCR_ENABLE_64BYTE</name>
        <initializer>(1&lt;&lt;5)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="62" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="62" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1gafb61755694cecd05881690c0c3f3654f" prot="public" static="no">
        <name>FCR_INT_TRIGGER_1BYTE</name>
        <initializer>(0&lt;&lt;6)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="63" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="63" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1gaa16e7c8893fa44bb53381f93cbc2ba27" prot="public" static="no">
        <name>FCR_INT_TRIGGER_4BYTE</name>
        <initializer>(1&lt;&lt;6)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="64" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="64" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1gabeabe9b8e7dd748b99ffa6472fe0b3ef" prot="public" static="no">
        <name>FCR_INT_TRIGGER_8BYTE</name>
        <initializer>(2&lt;&lt;6)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="65" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="65" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1gaed94cd04e976b03515a43d6b8cbf805d" prot="public" static="no">
        <name>FCR_INT_TRIGGER_14BYTE</name>
        <initializer>(3&lt;&lt;6)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="66" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="66" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1ga733e75579da0032be20c7fd6ac33944e" prot="public" static="no">
        <name>FCR_DEFAULT</name>
        <initializer>(FCR_ENABLE_FIFOS | FCR_DMA_MODE_0)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="68" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="68" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1ga4f14e7d3fd79b40ca1405245e0242f3b" prot="public" static="no">
        <name>LCR_5BIT</name>
        <initializer>(0&lt;&lt;0)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="71" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="71" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1ga28e5afbb0dd71482c103d76ba8ccdda6" prot="public" static="no">
        <name>LCR_6BIT</name>
        <initializer>(1&lt;&lt;0)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="72" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="72" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1ga9578b66996a3790b53955c9a42ef43ab" prot="public" static="no">
        <name>LCR_7BIT</name>
        <initializer>(2&lt;&lt;0)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="73" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="73" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1ga11849794cd90dedfc1d211cf948b0a3f" prot="public" static="no">
        <name>LCR_8BIT</name>
        <initializer>(3&lt;&lt;0)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="74" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="74" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1ga766df9edd07ffee6d4c425be00765c14" prot="public" static="no">
        <name>LCR_1STOP</name>
        <initializer>(0&lt;&lt;2)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="75" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="75" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1gace2deeea42a791b868d540cf107da914" prot="public" static="no">
        <name>LCR_2STOP</name>
        <initializer>(1&lt;&lt;2)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="76" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="76" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1ga0a9c31abffbc2246670b81b11937db50" prot="public" static="no">
        <name>LCR_PARITY_NONE</name>
        <initializer>(0&lt;&lt;3)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="77" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="77" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1ga8153311f90845501a4dd0befc8e21574" prot="public" static="no">
        <name>LCR_PARITY_ODD</name>
        <initializer>(1&lt;&lt;3)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="78" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="78" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1gacda2ab112fb4dbffec4246609d3c1345" prot="public" static="no">
        <name>LCR_PARITY_EVEN</name>
        <initializer>(3&lt;&lt;3)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="79" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="79" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1ga25d8154ba512821b3da064c25f5eae42" prot="public" static="no">
        <name>LCR_PARITY_MARK</name>
        <initializer>(5&lt;&lt;3)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="80" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="80" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1gad37b540b9daa8a535548dff47ef92f72" prot="public" static="no">
        <name>LCR_PARITY_SPACE</name>
        <initializer>(7&lt;&lt;3)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="81" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="81" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1ga7c9aedd8591754a50e93d26d93b72fc8" prot="public" static="no">
        <name>LCR_BREAK_ENABLE</name>
        <initializer>(1&lt;&lt;6)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="82" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="82" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1ga4357ee6d0bdd480b29fa7616d7571f45" prot="public" static="no">
        <name>LCR_DIVISOR_LATCH</name>
        <initializer>(1&lt;&lt;7)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="83" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="83" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1gaf3256e1cdd81ee02b9b694c3e45f8d33" prot="public" static="no">
        <name>LCR_DEFAULT</name>
        <initializer>(LCR_8BIT | LCR_1STOP | LCR_PARITY_NONE)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="85" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="85" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1gad313b1aec7d507ae1ca1e9c372d52454" prot="public" static="no">
        <name>MCR_NONE</name>
        <initializer>0</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="88" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="88" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1ga213d57e849bb18388f24d65874af6325" prot="public" static="no">
        <name>MCR_DTR</name>
        <initializer>(1&lt;&lt;0)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="89" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="89" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1gaed27b96a2b261695692cfdec8bf8b1c5" prot="public" static="no">
        <name>MCR_RTS</name>
        <initializer>(1&lt;&lt;1)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="90" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="90" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1ga2628a4fa8d48830ccea7fab2ef08c5d9" prot="public" static="no">
        <name>MCR_OUT1</name>
        <initializer>(1&lt;&lt;2)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="91" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="91" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1ga3469b6cce183c5fee697856acc404952" prot="public" static="no">
        <name>MCR_OUT2</name>
        <initializer>(1&lt;&lt;3)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="92" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="92" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1ga95592ff726b61e0780b0d4c7c7c26fcb" prot="public" static="no">
        <name>MCR_LOOPBACK</name>
        <initializer>(1&lt;&lt;4)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="93" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="93" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1gadaf99d8ba6dea7d12c2551f9ba0d000a" prot="public" static="no">
        <name>MCR_AUTOFLOW</name>
        <initializer>(1&lt;&lt;5)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="94" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="94" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1ga3041367c1e3b71ea438e88b68d90d725" prot="public" static="no">
        <name>MCR_DEFAULT</name>
        <initializer>(MCR_DTR | MCR_RTS | MCR_OUT2)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="98" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="98" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1gaf5024a0b85987ce1b19e46609a4023c6" prot="public" static="no">
        <name>MSR_CTS_CHANGED</name>
        <initializer>(1&lt;&lt;0)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="101" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="101" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1ga856f1438337659d52d03fee4e37675e9" prot="public" static="no">
        <name>MSR_DSR_CHANGED</name>
        <initializer>(1&lt;&lt;1)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="102" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="102" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1ga89a8c65c6f184a528b8efc3762ed7ea8" prot="public" static="no">
        <name>MSR_RI_EDGE</name>
        <initializer>(1&lt;&lt;2)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="103" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="103" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1gacaf7caab8fffc95e513e9e65cef46c97" prot="public" static="no">
        <name>MSR_CD_CHANGED</name>
        <initializer>(1&lt;&lt;3)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="104" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="104" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1ga99bfd5dadd350f9bd1901282bc88bc35" prot="public" static="no">
        <name>MSR_CTS</name>
        <initializer>(1&lt;&lt;4)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="105" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="105" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1gabefbb7ce73e57a43abd7351c33dd81dd" prot="public" static="no">
        <name>MSR_DSR</name>
        <initializer>(1&lt;&lt;5)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="106" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="106" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1ga0960208e3de952801488883144eae96b" prot="public" static="no">
        <name>MSR_RI</name>
        <initializer>(1&lt;&lt;6)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="107" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="107" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1gac94b8604b9ebea796f84bfa89cf79a01" prot="public" static="no">
        <name>MSR_CD</name>
        <initializer>(1&lt;&lt;7)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="108" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="108" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1ga755b7e850db6200a6f43b741c678ae53" prot="public" static="no">
        <name>XBEE_SER_CHECK</name>
        <param><defname>ptr</defname></param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="115" column="11" bodyfile="src/dos/xbee_serial_dos.c" bodystart="115" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="group__hal__dos_1gae5ad24619d6c5bd6073b2f566f6fc266" prot="public" static="no">
        <name>CBUF_SIZE</name>
        <initializer>255</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="124" column="9" bodyfile="src/dos/xbee_serial_dos.c" bodystart="124" bodyend="-1"/>
      </memberdef>
      </sectiondef>
      <sectiondef kind="var">
      <memberdef kind="variable" id="group__hal__dos_1ga507d88cdded86344ac361df5f5ddfe9f" prot="public" static="yes" mutable="no">
        <type><ref refid="structxbee__serial__t" kindref="compound">xbee_serial_t</ref> *</type>
        <definition>xbee_serial_t* xbee_ser_com1</definition>
        <argsstring></argsstring>
        <name>xbee_ser_com1</name>
        <initializer>= NULL</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="120" column="1" bodyfile="src/dos/xbee_serial_dos.c" bodystart="120" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="xbee__serial__dos_8c_1a59ad68efe36d344378dec7986aa05d25" prot="public" static="no" mutable="no">
        <type><ref refid="structxbee__cbuf__t" kindref="compound">xbee_cbuf_t</ref></type>
        <definition>xbee_cbuf_t cb</definition>
        <argsstring></argsstring>
        <name>cb</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="127" column="1" bodyfile="src/dos/xbee_serial_dos.c" bodystart="127" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="xbee__serial__dos_8c_1a85e93eb0c63ab4d8f8950f873ab56c27" prot="public" static="no" mutable="no">
        <type><ref refid="group__hal__dos_1gae1affc9ca37cfb624959c866a73f83c2" kindref="member">uint8_t</ref></type>
        <definition>uint8_t buf[CBUF_SIZE]</definition>
        <argsstring>[CBUF_SIZE]</argsstring>
        <name>buf</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="128" column="1" bodyfile="src/dos/xbee_serial_dos.c" bodystart="128" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="group__hal__dos_1gac927cede1ecb62ab078b129942a42954" prot="public" static="yes" mutable="no">
        <type>struct @0</type>
        <definition>struct @0  txbuf</definition>
        <argsstring></argsstring>
        <name>txbuf</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="129" column="1"/>
      </memberdef>
      <memberdef kind="variable" id="group__hal__dos_1gacc684269454e1771200e2867995d7396" prot="public" static="yes" mutable="no">
        <type>struct @0</type>
        <definition>struct @0  rxbuf</definition>
        <argsstring></argsstring>
        <name>rxbuf</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="129" column="1"/>
      </memberdef>
      </sectiondef>
      <sectiondef kind="func">
      <memberdef kind="function" id="group__hal__dos_1ga2d4d704dafd7a589a4305575192fb012" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void __interrupt __far</type>
        <definition>void __interrupt __far xbee_ser_isr</definition>
        <argsstring>()</argsstring>
        <name>xbee_ser_isr</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="132" column="1" bodyfile="src/dos/xbee_serial_dos.c" bodystart="132" bodyend="204"/>
      </memberdef>
      <memberdef kind="function" id="group__hal__dos_1ga3c79f6b72b6cfc3cc5c4524450f661b9" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int xbee_ser_invalid</definition>
        <argsstring>(xbee_serial_t *serial)</argsstring>
        <name>xbee_ser_invalid</name>
        <param>
          <type><ref refid="structxbee__serial__t" kindref="compound">xbee_serial_t</ref> *</type>
          <declname>serial</declname>
        </param>
        <briefdescription>
<para>Helper function used by other xbee_serial functions to validate the <emphasis>serial</emphasis> parameter. </para>        </briefdescription>
        <detaileddescription>
<para>Confirms that it is non-<computeroutput>NULL</computeroutput> and is set to a valid port.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">serial</parametername>
</parameternamelist>
<parameterdescription>
<para>XBee serial port</para></parameterdescription>
</parameteritem>
</parameterlist>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>1</parametername>
</parameternamelist>
<parameterdescription>
<para><emphasis>serial</emphasis> is not a valid XBee serial port </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>0</parametername>
</parameternamelist>
<parameterdescription>
<para><emphasis>serial</emphasis> is a valid XBee serial port </para></parameterdescription>
</parameteritem>
</parameterlist>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="207" column="1" bodyfile="src/dos/xbee_serial_dos.c" bodystart="207" bodyend="215"/>
        <referencedby refid="group__xbee__device_1gac0874f9422c6588062a4b6205e989fc6" compoundref="xbee__device_8c" startline="625" endline="805">_xbee_frame_load</referencedby>
      </memberdef>
      <memberdef kind="function" id="group__hal__dos_1ga898057d1b7645785e7f3d6256828d039" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>const char *</type>
        <definition>const char* xbee_ser_portname</definition>
        <argsstring>(xbee_serial_t *serial)</argsstring>
        <name>xbee_ser_portname</name>
        <param>
          <type><ref refid="structxbee__serial__t" kindref="compound">xbee_serial_t</ref> *</type>
          <declname>serial</declname>
        </param>
        <briefdescription>
<para>Returns a human-readable string describing the serial port. </para>        </briefdescription>
        <detaileddescription>
<para>For example, on a Windows machine this will be &quot;COM1&quot; or &quot;COM999&quot;. On a Rabbit, it will be a single letter, &quot;A&quot; through &quot;F&quot;. On Freescale HCS08, it will be something like &quot;SCI1&quot; or &quot;SCI2&quot;. On POSIX, the name of the device (e.g., &quot;/dev/ttyS0&quot;)</para><para>Returns &quot;(invalid)&quot; if <emphasis>serial</emphasis> is invalid or not configured.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">serial</parametername>
</parameternamelist>
<parameterdescription>
<para>port</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>null-terminated string describing the serial port </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="218" column="1" bodyfile="src/dos/xbee_serial_dos.c" bodystart="218" bodyend="229"/>
      </memberdef>
      <memberdef kind="function" id="group__hal__dos_1ga2ca4e60c9d642084afa52dff9e1f6be4" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int xbee_ser_write</definition>
        <argsstring>(xbee_serial_t *serial, const void FAR *buffer, int length)</argsstring>
        <name>xbee_ser_write</name>
        <param>
          <type><ref refid="structxbee__serial__t" kindref="compound">xbee_serial_t</ref> *</type>
          <declname>serial</declname>
        </param>
        <param>
          <type>const void <ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref> *</type>
          <declname>buffer</declname>
        </param>
        <param>
          <type>int</type>
          <declname>length</declname>
        </param>
        <briefdescription>
<para>Transmits <emphasis>length</emphasis> bytes from <emphasis>buffer</emphasis> to the XBee serial port <emphasis>serial</emphasis>. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">serial</parametername>
</parameternamelist>
<parameterdescription>
<para>XBee serial port</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">buffer</parametername>
</parameternamelist>
<parameterdescription>
<para>source of bytes to send</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">length</parametername>
</parameternamelist>
<parameterdescription>
<para>number of bytes to write</para></parameterdescription>
</parameteritem>
</parameterlist>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>&gt;=0</parametername>
</parameternamelist>
<parameterdescription>
<para>The number of bytes successfully written to XBee serial port. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>-EINVAL</parametername>
</parameternamelist>
<parameterdescription>
<para><emphasis>serial</emphasis> is not a valid XBee serial port. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>-EIO</parametername>
</parameternamelist>
<parameterdescription>
<para>I/O error attempting to write to serial port.</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="see"><para><ref refid="group__xbee__serial_1ga8263312373c03a79a718142e051b3342" kindref="member">xbee_ser_read()</ref>, <ref refid="group__xbee__serial_1ga86fea2345efb8bf9424228f0979b1849" kindref="member">xbee_ser_putchar()</ref>, <ref refid="group__xbee__serial_1gaeeb38154313a44f86146cdcfe08e7d08" kindref="member">xbee_ser_getchar()</ref> </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="232" column="1" bodyfile="src/dos/xbee_serial_dos.c" bodystart="232" bodyend="281"/>
        <referencedby refid="group__xbee__serial_1ga86fea2345efb8bf9424228f0979b1849" compoundref="xbee__serial__dos_8c" startline="312" endline="329">xbee_ser_putchar</referencedby>
      </memberdef>
      <memberdef kind="function" id="group__hal__dos_1ga8263312373c03a79a718142e051b3342" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int xbee_ser_read</definition>
        <argsstring>(xbee_serial_t *serial, void FAR *buffer, int bufsize)</argsstring>
        <name>xbee_ser_read</name>
        <param>
          <type><ref refid="structxbee__serial__t" kindref="compound">xbee_serial_t</ref> *</type>
          <declname>serial</declname>
        </param>
        <param>
          <type>void <ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref> *</type>
          <declname>buffer</declname>
        </param>
        <param>
          <type>int</type>
          <declname>bufsize</declname>
        </param>
        <briefdescription>
<para>Reads up to <emphasis>bufsize</emphasis> bytes from XBee serial port <emphasis>serial</emphasis> and into <emphasis>buffer</emphasis>. </para>        </briefdescription>
        <detaileddescription>
<para>If there is no data available when the function is called, it will return immediately.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">serial</parametername>
</parameternamelist>
<parameterdescription>
<para>XBee serial port</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="out">buffer</parametername>
</parameternamelist>
<parameterdescription>
<para>buffer to hold bytes read from XBee serial port</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">bufsize</parametername>
</parameternamelist>
<parameterdescription>
<para>maximum number of bytes to read</para></parameterdescription>
</parameteritem>
</parameterlist>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>&gt;=0</parametername>
</parameternamelist>
<parameterdescription>
<para>The number of bytes read from XBee serial port. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>-EINVAL</parametername>
</parameternamelist>
<parameterdescription>
<para><emphasis>serial</emphasis> is not a valid XBee serial port. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>-EIO</parametername>
</parameternamelist>
<parameterdescription>
<para>I/O error attempting to write to serial port.</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="see"><para><ref refid="group__xbee__serial_1ga2ca4e60c9d642084afa52dff9e1f6be4" kindref="member">xbee_ser_write()</ref>, <ref refid="group__xbee__serial_1ga86fea2345efb8bf9424228f0979b1849" kindref="member">xbee_ser_putchar()</ref>, <ref refid="group__xbee__serial_1gaeeb38154313a44f86146cdcfe08e7d08" kindref="member">xbee_ser_getchar()</ref> </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="283" column="1" bodyfile="src/dos/xbee_serial_dos.c" bodystart="283" bodyend="309"/>
        <referencedby refid="group__xbee__serial_1gaeeb38154313a44f86146cdcfe08e7d08" compoundref="xbee__serial__dos_8c" startline="332" endline="344">xbee_ser_getchar</referencedby>
      </memberdef>
      <memberdef kind="function" id="group__hal__dos_1ga86fea2345efb8bf9424228f0979b1849" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int xbee_ser_putchar</definition>
        <argsstring>(xbee_serial_t *serial, uint8_t ch)</argsstring>
        <name>xbee_ser_putchar</name>
        <param>
          <type><ref refid="structxbee__serial__t" kindref="compound">xbee_serial_t</ref> *</type>
          <declname>serial</declname>
        </param>
        <param>
          <type><ref refid="group__hal__dos_1gae1affc9ca37cfb624959c866a73f83c2" kindref="member">uint8_t</ref></type>
          <declname>ch</declname>
        </param>
        <briefdescription>
<para>Transmits a single character, <emphasis>ch</emphasis>, to the XBee serial port <emphasis>serial</emphasis>. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">serial</parametername>
</parameternamelist>
<parameterdescription>
<para>XBee serial port</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">ch</parametername>
</parameternamelist>
<parameterdescription>
<para>character to send</para></parameterdescription>
</parameteritem>
</parameterlist>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>0</parametername>
</parameternamelist>
<parameterdescription>
<para>Successfully sent (queued) character. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>-ENOSPC</parametername>
</parameternamelist>
<parameterdescription>
<para>The write buffer is full and the character wasn&apos;t sent. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>-EINVAL</parametername>
</parameternamelist>
<parameterdescription>
<para><emphasis>serial</emphasis> is not a valid XBee serial port.</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="see"><para><ref refid="group__xbee__serial_1ga8263312373c03a79a718142e051b3342" kindref="member">xbee_ser_read()</ref>, <ref refid="group__xbee__serial_1ga2ca4e60c9d642084afa52dff9e1f6be4" kindref="member">xbee_ser_write()</ref>, <ref refid="group__xbee__serial_1gaeeb38154313a44f86146cdcfe08e7d08" kindref="member">xbee_ser_getchar()</ref> </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="312" column="1" bodyfile="src/dos/xbee_serial_dos.c" bodystart="312" bodyend="329"/>
      </memberdef>
      <memberdef kind="function" id="group__hal__dos_1gaeeb38154313a44f86146cdcfe08e7d08" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int xbee_ser_getchar</definition>
        <argsstring>(xbee_serial_t *serial)</argsstring>
        <name>xbee_ser_getchar</name>
        <param>
          <type><ref refid="structxbee__serial__t" kindref="compound">xbee_serial_t</ref> *</type>
          <declname>serial</declname>
        </param>
        <briefdescription>
<para>Reads a single character from the XBee serial port <emphasis>serial</emphasis>. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">serial</parametername>
</parameternamelist>
<parameterdescription>
<para>XBee serial port</para></parameterdescription>
</parameteritem>
</parameterlist>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>0-255</parametername>
</parameternamelist>
<parameterdescription>
<para>character read from XBee serial port </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>-ENODATA</parametername>
</parameternamelist>
<parameterdescription>
<para>There aren&apos;t any characters in the read buffer. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>-EINVAL</parametername>
</parameternamelist>
<parameterdescription>
<para><emphasis>serial</emphasis> is not a valid XBee serial port.</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="see"><para><ref refid="group__xbee__serial_1ga8263312373c03a79a718142e051b3342" kindref="member">xbee_ser_read()</ref>, <ref refid="group__xbee__serial_1ga2ca4e60c9d642084afa52dff9e1f6be4" kindref="member">xbee_ser_write()</ref>, <ref refid="group__xbee__serial_1gaeeb38154313a44f86146cdcfe08e7d08" kindref="member">xbee_ser_getchar()</ref> </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="332" column="1" bodyfile="src/dos/xbee_serial_dos.c" bodystart="332" bodyend="344"/>
      </memberdef>
      <memberdef kind="function" id="group__hal__dos_1ga3ad8f378b572d6fec982f1086bd3b94f" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int xbee_ser_tx_free</definition>
        <argsstring>(xbee_serial_t *serial)</argsstring>
        <name>xbee_ser_tx_free</name>
        <param>
          <type><ref refid="structxbee__serial__t" kindref="compound">xbee_serial_t</ref> *</type>
          <declname>serial</declname>
        </param>
        <briefdescription>
<para>Returns the number of bytes of unused space in the serial transmit buffer for XBee serial port <emphasis>serial</emphasis>. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">serial</parametername>
</parameternamelist>
<parameterdescription>
<para>XBee serial port</para></parameterdescription>
</parameteritem>
</parameterlist>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>INT_MAX</parametername>
</parameternamelist>
<parameterdescription>
<para>The buffer size is unlimited (or unknown). </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>&gt;=0</parametername>
</parameternamelist>
<parameterdescription>
<para>The number of bytes it would take to fill the XBee serial port&apos;s serial transmit buffer. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>-EINVAL</parametername>
</parameternamelist>
<parameterdescription>
<para><emphasis>serial</emphasis> is not a valid XBee serial port.</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="see"><para><ref refid="group__xbee__serial_1ga16fb431a1e66861439518e562431821f" kindref="member">xbee_ser_rx_free()</ref>, <ref refid="group__xbee__serial_1ga43b8322771cc16b4130fa5330ad2242b" kindref="member">xbee_ser_rx_used()</ref>, <ref refid="group__xbee__serial_1ga98a6d5ceb5e1445e8ef82ccaa65a8c15" kindref="member">xbee_ser_rx_flush()</ref>, <ref refid="group__xbee__serial_1gaabf70934d186354cde4ac14ed27d1bd2" kindref="member">xbee_ser_tx_used()</ref>, <ref refid="group__xbee__serial_1ga05308d37301d27715f1e1308b7189220" kindref="member">xbee_ser_tx_flush()</ref> </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="347" column="1" bodyfile="src/dos/xbee_serial_dos.c" bodystart="347" bodyend="352"/>
      </memberdef>
      <memberdef kind="function" id="group__hal__dos_1gaabf70934d186354cde4ac14ed27d1bd2" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int xbee_ser_tx_used</definition>
        <argsstring>(xbee_serial_t *serial)</argsstring>
        <name>xbee_ser_tx_used</name>
        <param>
          <type><ref refid="structxbee__serial__t" kindref="compound">xbee_serial_t</ref> *</type>
          <declname>serial</declname>
        </param>
        <briefdescription>
<para>Returns the number of queued bytes in the serial transmit buffer for XBee serial port <emphasis>serial</emphasis>. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">serial</parametername>
</parameternamelist>
<parameterdescription>
<para>XBee serial port</para></parameterdescription>
</parameteritem>
</parameterlist>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>0</parametername>
</parameternamelist>
<parameterdescription>
<para>The buffer size is unlimited (or space used is unknown). </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>&gt;0</parametername>
</parameternamelist>
<parameterdescription>
<para>The number of bytes queued in the XBee serial port&apos;s serial transmit buffer. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>-EINVAL</parametername>
</parameternamelist>
<parameterdescription>
<para><emphasis>serial</emphasis> is not a valid XBee serial port.</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="see"><para><ref refid="group__xbee__serial_1ga16fb431a1e66861439518e562431821f" kindref="member">xbee_ser_rx_free()</ref>, <ref refid="group__xbee__serial_1ga43b8322771cc16b4130fa5330ad2242b" kindref="member">xbee_ser_rx_used()</ref>, <ref refid="group__xbee__serial_1ga98a6d5ceb5e1445e8ef82ccaa65a8c15" kindref="member">xbee_ser_rx_flush()</ref>, <ref refid="group__xbee__serial_1ga3ad8f378b572d6fec982f1086bd3b94f" kindref="member">xbee_ser_tx_free()</ref>, <ref refid="group__xbee__serial_1ga05308d37301d27715f1e1308b7189220" kindref="member">xbee_ser_tx_flush()</ref> </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="355" column="1" bodyfile="src/dos/xbee_serial_dos.c" bodystart="355" bodyend="359"/>
      </memberdef>
      <memberdef kind="function" id="group__hal__dos_1ga05308d37301d27715f1e1308b7189220" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int xbee_ser_tx_flush</definition>
        <argsstring>(xbee_serial_t *serial)</argsstring>
        <name>xbee_ser_tx_flush</name>
        <param>
          <type><ref refid="structxbee__serial__t" kindref="compound">xbee_serial_t</ref> *</type>
          <declname>serial</declname>
        </param>
        <briefdescription>
<para>Flushes (i.e., deletes and does not transmit) characters in the serial transmit buffer for XBee serial port <emphasis>serial</emphasis>. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">serial</parametername>
</parameternamelist>
<parameterdescription>
<para>XBee serial port</para></parameterdescription>
</parameteritem>
</parameterlist>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>0</parametername>
</parameternamelist>
<parameterdescription>
<para>success </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>-EINVAL</parametername>
</parameternamelist>
<parameterdescription>
<para><emphasis>serial</emphasis> is not a valid XBee serial port.</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="see"><para><ref refid="group__xbee__serial_1ga16fb431a1e66861439518e562431821f" kindref="member">xbee_ser_rx_free()</ref>, <ref refid="group__xbee__serial_1ga43b8322771cc16b4130fa5330ad2242b" kindref="member">xbee_ser_rx_used()</ref>, <ref refid="group__xbee__serial_1ga98a6d5ceb5e1445e8ef82ccaa65a8c15" kindref="member">xbee_ser_rx_flush()</ref>, <ref refid="group__xbee__serial_1ga3ad8f378b572d6fec982f1086bd3b94f" kindref="member">xbee_ser_tx_free()</ref>, <ref refid="group__xbee__serial_1gaabf70934d186354cde4ac14ed27d1bd2" kindref="member">xbee_ser_tx_used()</ref> </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="362" column="1" bodyfile="src/dos/xbee_serial_dos.c" bodystart="362" bodyend="376"/>
      </memberdef>
      <memberdef kind="function" id="group__hal__dos_1ga16fb431a1e66861439518e562431821f" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int xbee_ser_rx_free</definition>
        <argsstring>(xbee_serial_t *serial)</argsstring>
        <name>xbee_ser_rx_free</name>
        <param>
          <type><ref refid="structxbee__serial__t" kindref="compound">xbee_serial_t</ref> *</type>
          <declname>serial</declname>
        </param>
        <briefdescription>
<para>Returns the number of bytes of unused space in the serial receive buffer for XBee serial port <emphasis>serial</emphasis>. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">serial</parametername>
</parameternamelist>
<parameterdescription>
<para>XBee serial port</para></parameterdescription>
</parameteritem>
</parameterlist>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>INT_MAX</parametername>
</parameternamelist>
<parameterdescription>
<para>The buffer size is unlimited (or unknown). </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>&gt;=0</parametername>
</parameternamelist>
<parameterdescription>
<para>The number of bytes it would take to fill the XBee serial port&apos;s serial receive buffer. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>-EINVAL</parametername>
</parameternamelist>
<parameterdescription>
<para><emphasis>serial</emphasis> is not a valid XBee serial port.</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="see"><para><ref refid="group__xbee__serial_1ga3ad8f378b572d6fec982f1086bd3b94f" kindref="member">xbee_ser_tx_free()</ref>, <ref refid="group__xbee__serial_1gaabf70934d186354cde4ac14ed27d1bd2" kindref="member">xbee_ser_tx_used()</ref>, <ref refid="group__xbee__serial_1ga05308d37301d27715f1e1308b7189220" kindref="member">xbee_ser_tx_flush()</ref>, <ref refid="group__xbee__serial_1ga43b8322771cc16b4130fa5330ad2242b" kindref="member">xbee_ser_rx_used()</ref>, <ref refid="group__xbee__serial_1ga98a6d5ceb5e1445e8ef82ccaa65a8c15" kindref="member">xbee_ser_rx_flush()</ref> </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="379" column="1" bodyfile="src/dos/xbee_serial_dos.c" bodystart="379" bodyend="383"/>
      </memberdef>
      <memberdef kind="function" id="group__hal__dos_1ga43b8322771cc16b4130fa5330ad2242b" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int xbee_ser_rx_used</definition>
        <argsstring>(xbee_serial_t *serial)</argsstring>
        <name>xbee_ser_rx_used</name>
        <param>
          <type><ref refid="structxbee__serial__t" kindref="compound">xbee_serial_t</ref> *</type>
          <declname>serial</declname>
        </param>
        <briefdescription>
<para>Returns the number of queued bytes in the serial receive buffer for XBee serial port <emphasis>serial</emphasis>. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">serial</parametername>
</parameternamelist>
<parameterdescription>
<para>XBee serial port</para></parameterdescription>
</parameteritem>
</parameterlist>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>&gt;=0</parametername>
</parameternamelist>
<parameterdescription>
<para>The number of bytes queued in the XBee serial port&apos;s serial transmit buffer. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>-EINVAL</parametername>
</parameternamelist>
<parameterdescription>
<para><emphasis>serial</emphasis> is not a valid XBee serial port.</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="see"><para><ref refid="group__xbee__serial_1ga3ad8f378b572d6fec982f1086bd3b94f" kindref="member">xbee_ser_tx_free()</ref>, <ref refid="group__xbee__serial_1gaabf70934d186354cde4ac14ed27d1bd2" kindref="member">xbee_ser_tx_used()</ref>, <ref refid="group__xbee__serial_1ga05308d37301d27715f1e1308b7189220" kindref="member">xbee_ser_tx_flush()</ref>, <ref refid="group__xbee__serial_1ga16fb431a1e66861439518e562431821f" kindref="member">xbee_ser_rx_free()</ref>, <ref refid="group__xbee__serial_1ga98a6d5ceb5e1445e8ef82ccaa65a8c15" kindref="member">xbee_ser_rx_flush()</ref></para></simplesect>
<simplesect kind="note"><para>Unlike <ref refid="group__xbee__serial_1gaabf70934d186354cde4ac14ed27d1bd2" kindref="member">xbee_ser_tx_used()</ref>, this function MUST return the number of bytes available. Some layers of the library wait until enough bytes are ready before continuing.</para></simplesect>
We may expand on or replace this API. On some platforms (like Win32) we have to do some of our own buffering in order to peek at data in the serial receive buffer. Most of the driver only requires a check to see if some number of bytes are available or not. Consider changing the API to something like:</para><para><programlisting><codeline><highlight class="normal">int<sp/>xbee_ser_rx_avail(<sp/>xbee_serial_t<sp/>*serial,<sp/>uint8_t<sp/>count)</highlight></codeline>
</programlisting> returns TRUE if <computeroutput>count</computeroutput> bytes are available, FALSE otherwise. </para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="386" column="1" bodyfile="src/dos/xbee_serial_dos.c" bodystart="386" bodyend="390"/>
      </memberdef>
      <memberdef kind="function" id="group__hal__dos_1ga98a6d5ceb5e1445e8ef82ccaa65a8c15" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int xbee_ser_rx_flush</definition>
        <argsstring>(xbee_serial_t *serial)</argsstring>
        <name>xbee_ser_rx_flush</name>
        <param>
          <type><ref refid="structxbee__serial__t" kindref="compound">xbee_serial_t</ref> *</type>
          <declname>serial</declname>
        </param>
        <briefdescription>
<para>Deletes all characters in the serial receive buffer for XBee serial port <emphasis>serial</emphasis>. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">serial</parametername>
</parameternamelist>
<parameterdescription>
<para>XBee serial port</para></parameterdescription>
</parameteritem>
</parameterlist>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>0</parametername>
</parameternamelist>
<parameterdescription>
<para>success </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>-EINVAL</parametername>
</parameternamelist>
<parameterdescription>
<para><emphasis>serial</emphasis> is not a valid XBee serial port.</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="see"><para><ref refid="group__xbee__serial_1ga3ad8f378b572d6fec982f1086bd3b94f" kindref="member">xbee_ser_tx_free()</ref>, <ref refid="group__xbee__serial_1gaabf70934d186354cde4ac14ed27d1bd2" kindref="member">xbee_ser_tx_used()</ref>, <ref refid="group__xbee__serial_1ga05308d37301d27715f1e1308b7189220" kindref="member">xbee_ser_tx_flush()</ref>, <ref refid="group__xbee__serial_1ga16fb431a1e66861439518e562431821f" kindref="member">xbee_ser_rx_free()</ref>, <ref refid="group__xbee__serial_1ga43b8322771cc16b4130fa5330ad2242b" kindref="member">xbee_ser_rx_used()</ref> </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="393" column="1" bodyfile="src/dos/xbee_serial_dos.c" bodystart="393" bodyend="408"/>
      </memberdef>
      <memberdef kind="function" id="group__hal__dos_1gab3c12543a07e0669b672c5cab54b0926" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int xbee_ser_baudrate</definition>
        <argsstring>(xbee_serial_t *serial, uint32_t baudrate)</argsstring>
        <name>xbee_ser_baudrate</name>
        <param>
          <type><ref refid="structxbee__serial__t" kindref="compound">xbee_serial_t</ref> *</type>
          <declname>serial</declname>
        </param>
        <param>
          <type><ref refid="group__hal__dos_1ga09a1e304d66d35dd47daffee9731edaa" kindref="member">uint32_t</ref></type>
          <declname>baudrate</declname>
        </param>
        <briefdescription>
<para>Change the baud rate of XBee serial port <emphasis>serial</emphasis> to <emphasis>baudrate</emphasis> bits/second. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">serial</parametername>
</parameternamelist>
<parameterdescription>
<para>XBee serial port</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">baudrate</parametername>
</parameternamelist>
<parameterdescription>
<para>Bits per second of serial data transfer speed.</para></parameterdescription>
</parameteritem>
</parameterlist>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>0</parametername>
</parameternamelist>
<parameterdescription>
<para>Opened serial port within 5% of requested baudrate. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>-EINVAL</parametername>
</parameternamelist>
<parameterdescription>
<para><emphasis>serial</emphasis> is not a valid XBee serial port. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>-EIO</parametername>
</parameternamelist>
<parameterdescription>
<para>Can&apos;t open serial port within 5% of requested baudrate.</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="see"><para><ref refid="group__xbee__serial_1gaa615a221dd69c17ee2989c281f2bf04a" kindref="member">xbee_ser_open()</ref>, <ref refid="group__xbee__serial_1ga48b9d743a446074ea6abacd0de24044d" kindref="member">xbee_ser_close()</ref>, <ref refid="group__xbee__serial_1gae19aa61eec588d1b935d267b0a982319" kindref="member">xbee_ser_break()</ref> </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="411" column="1" bodyfile="src/dos/xbee_serial_dos.c" bodystart="411" bodyend="446"/>
      </memberdef>
      <memberdef kind="function" id="group__hal__dos_1gaa615a221dd69c17ee2989c281f2bf04a" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int xbee_ser_open</definition>
        <argsstring>(xbee_serial_t *serial, uint32_t baudrate)</argsstring>
        <name>xbee_ser_open</name>
        <param>
          <type><ref refid="structxbee__serial__t" kindref="compound">xbee_serial_t</ref> *</type>
          <declname>serial</declname>
        </param>
        <param>
          <type><ref refid="group__hal__dos_1ga09a1e304d66d35dd47daffee9731edaa" kindref="member">uint32_t</ref></type>
          <declname>baudrate</declname>
        </param>
        <briefdescription>
<para>Opens the serial port connected to XBee serial port <emphasis>serial</emphasis> at <emphasis>baudrate</emphasis> bits/second. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">serial</parametername>
</parameternamelist>
<parameterdescription>
<para>XBee serial port</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">baudrate</parametername>
</parameternamelist>
<parameterdescription>
<para>Bits per second of serial data transfer speed.</para></parameterdescription>
</parameteritem>
</parameterlist>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>0</parametername>
</parameternamelist>
<parameterdescription>
<para>Opened serial port within 5% of requested baudrate. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>-EINVAL</parametername>
</parameternamelist>
<parameterdescription>
<para><emphasis>serial</emphasis> is not a valid XBee serial port. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>-EIO</parametername>
</parameternamelist>
<parameterdescription>
<para>Can&apos;t open serial port within 5% of requested baudrate.</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="see"><para><ref refid="group__xbee__serial_1gab3c12543a07e0669b672c5cab54b0926" kindref="member">xbee_ser_baudrate()</ref>, <ref refid="group__xbee__serial_1ga48b9d743a446074ea6abacd0de24044d" kindref="member">xbee_ser_close()</ref>, <ref refid="group__xbee__serial_1gae19aa61eec588d1b935d267b0a982319" kindref="member">xbee_ser_break()</ref> </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="449" column="1" bodyfile="src/dos/xbee_serial_dos.c" bodystart="449" bodyend="545"/>
        <referencedby refid="group__xbee__device_1ga550d7c865e75d3fc1df0e64cb880cf3d" compoundref="xbee__device_8c" startline="125" endline="169">xbee_dev_init</referencedby>
      </memberdef>
      <memberdef kind="function" id="group__hal__dos_1ga48b9d743a446074ea6abacd0de24044d" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int xbee_ser_close</definition>
        <argsstring>(xbee_serial_t *serial)</argsstring>
        <name>xbee_ser_close</name>
        <param>
          <type><ref refid="structxbee__serial__t" kindref="compound">xbee_serial_t</ref> *</type>
          <declname>serial</declname>
        </param>
        <briefdescription>
<para>Close the serial port attached to XBee serial port <emphasis>serial</emphasis>. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">serial</parametername>
</parameternamelist>
<parameterdescription>
<para>XBee serial port</para></parameterdescription>
</parameteritem>
</parameterlist>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>0</parametername>
</parameternamelist>
<parameterdescription>
<para>closed serial port </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>-EINVAL</parametername>
</parameternamelist>
<parameterdescription>
<para><emphasis>serial</emphasis> is not a valid XBee serial port.</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="see"><para><ref refid="group__xbee__serial_1gaa615a221dd69c17ee2989c281f2bf04a" kindref="member">xbee_ser_open()</ref>, <ref refid="group__xbee__serial_1gab3c12543a07e0669b672c5cab54b0926" kindref="member">xbee_ser_baudrate()</ref>, <ref refid="group__xbee__serial_1gae19aa61eec588d1b935d267b0a982319" kindref="member">xbee_ser_break()</ref> </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="548" column="1" bodyfile="src/dos/xbee_serial_dos.c" bodystart="548" bodyend="560"/>
      </memberdef>
      <memberdef kind="function" id="group__hal__dos_1ga6ae89792415a7ac8b45b56188eb9eeb4" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int xbee_ser_break</definition>
        <argsstring>(xbee_serial_t *serial, int enabled)</argsstring>
        <name>xbee_ser_break</name>
        <param>
          <type><ref refid="structxbee__serial__t" kindref="compound">xbee_serial_t</ref> *</type>
          <declname>serial</declname>
        </param>
        <param>
          <type><ref refid="group__hal__dos_1ga04dd5074964518403bf944f2b240a5f8" kindref="member">bool_t</ref></type>
          <declname>enabled</declname>
        </param>
        <briefdescription>
<para>Disable the serial transmit pin and pull it low to send a break to the XBee serial port. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">serial</parametername>
</parameternamelist>
<parameterdescription>
<para>XBee serial port</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">enabled</parametername>
</parameternamelist>
<parameterdescription>
<para>Set to 1 to start the break or 0 to end the break (and resume transmitting).</para></parameterdescription>
</parameteritem>
</parameterlist>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>0</parametername>
</parameternamelist>
<parameterdescription>
<para>Success </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>-EINVAL</parametername>
</parameternamelist>
<parameterdescription>
<para><emphasis>serial</emphasis> is not a valid XBee serial port.</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="see"><para><ref refid="group__xbee__serial_1gaa615a221dd69c17ee2989c281f2bf04a" kindref="member">xbee_ser_open()</ref>, <ref refid="group__xbee__serial_1ga48b9d743a446074ea6abacd0de24044d" kindref="member">xbee_ser_close()</ref> </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="563" column="1" bodyfile="src/dos/xbee_serial_dos.c" bodystart="563" bodyend="580"/>
      </memberdef>
      <memberdef kind="function" id="group__hal__dos_1ga1f5f72ffdfbfb45ac523640db32296ff" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int xbee_ser_flowcontrol</definition>
        <argsstring>(xbee_serial_t *serial, int enabled)</argsstring>
        <name>xbee_ser_flowcontrol</name>
        <param>
          <type><ref refid="structxbee__serial__t" kindref="compound">xbee_serial_t</ref> *</type>
          <declname>serial</declname>
        </param>
        <param>
          <type><ref refid="group__hal__dos_1ga04dd5074964518403bf944f2b240a5f8" kindref="member">bool_t</ref></type>
          <declname>enabled</declname>
        </param>
        <briefdescription>
<para>Enable or disable hardware flow control (CTS/RTS) on the serial port for XBee serial port <emphasis>serial</emphasis>. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">serial</parametername>
</parameternamelist>
<parameterdescription>
<para>XBee serial port</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">enabled</parametername>
</parameternamelist>
<parameterdescription>
<para>Set to 0 to disable flow control or non-zero to enable flow control.</para></parameterdescription>
</parameteritem>
</parameterlist>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>0</parametername>
</parameternamelist>
<parameterdescription>
<para>Success </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>-EINVAL</parametername>
</parameternamelist>
<parameterdescription>
<para><emphasis>serial</emphasis> is not a valid XBee serial port.</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="see"><para><ref refid="group__xbee__serial_1gad1b1f9f42e58d8299ddcca1c9cb3c5e8" kindref="member">xbee_ser_set_rts()</ref>, <ref refid="group__xbee__serial_1ga894f6fadc890b5ba5ce32338f0acd217" kindref="member">xbee_ser_get_cts()</ref> </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="583" column="1" bodyfile="src/dos/xbee_serial_dos.c" bodystart="583" bodyend="591"/>
        <referencedby refid="group__xbee__device_1ga550d7c865e75d3fc1df0e64cb880cf3d" compoundref="xbee__device_8c" startline="125" endline="169">xbee_dev_init</referencedby>
      </memberdef>
      <memberdef kind="function" id="group__hal__dos_1ga731188d8cf41d3d749bc84d51b672535" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int xbee_ser_set_rts</definition>
        <argsstring>(xbee_serial_t *serial, int asserted)</argsstring>
        <name>xbee_ser_set_rts</name>
        <param>
          <type><ref refid="structxbee__serial__t" kindref="compound">xbee_serial_t</ref> *</type>
          <declname>serial</declname>
        </param>
        <param>
          <type><ref refid="group__hal__dos_1ga04dd5074964518403bf944f2b240a5f8" kindref="member">bool_t</ref></type>
          <declname>asserted</declname>
        </param>
        <briefdescription>
<para>Disable hardware flow control and manually set the RTS (ready to send) pin on the XBee device&apos;s serial port. </para>        </briefdescription>
        <detaileddescription>
<para>Typically used to enter the XBee device&apos;s boot loader and initiate a firmware update.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">serial</parametername>
</parameternamelist>
<parameterdescription>
<para>XBee serial port</para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">asserted</parametername>
</parameternamelist>
<parameterdescription>
<para>Set to 1 to assert RTS (ok for XBee to send to us) or 0 to deassert RTS (tell XBee not to send to us).</para></parameterdescription>
</parameteritem>
</parameterlist>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>0</parametername>
</parameternamelist>
<parameterdescription>
<para>Success </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>-EINVAL</parametername>
</parameternamelist>
<parameterdescription>
<para><emphasis>serial</emphasis> is not a valid XBee serial port.</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="see"><para><ref refid="group__xbee__serial_1ga33229d0d63ff1442f23b0739794d3afb" kindref="member">xbee_ser_flowcontrol()</ref>, <ref refid="group__xbee__serial_1ga894f6fadc890b5ba5ce32338f0acd217" kindref="member">xbee_ser_get_cts()</ref> </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="594" column="1" bodyfile="src/dos/xbee_serial_dos.c" bodystart="594" bodyend="607"/>
      </memberdef>
      <memberdef kind="function" id="group__hal__dos_1ga894f6fadc890b5ba5ce32338f0acd217" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int xbee_ser_get_cts</definition>
        <argsstring>(xbee_serial_t *serial)</argsstring>
        <name>xbee_ser_get_cts</name>
        <param>
          <type><ref refid="structxbee__serial__t" kindref="compound">xbee_serial_t</ref> *</type>
          <declname>serial</declname>
        </param>
        <briefdescription>
<para>Read the status of the /CTS (clear to send) pin on the serial port connected to XBee serial port <emphasis>serial</emphasis>. </para>        </briefdescription>
        <detaileddescription>
<para>Note that this function doesn&apos;t return the value of the pin <ndash/> it returns whether it&apos;s asserted (i.e., clear to send to the XBee serial port) or not.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">serial</parametername>
</parameternamelist>
<parameterdescription>
<para>XBee serial port</para></parameterdescription>
</parameteritem>
</parameterlist>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>1</parametername>
</parameternamelist>
<parameterdescription>
<para>it&apos;s clear to send </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>0</parametername>
</parameternamelist>
<parameterdescription>
<para>it&apos;s not clear to send </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>-EINVAL</parametername>
</parameternamelist>
<parameterdescription>
<para><emphasis>serial</emphasis> is not a valid XBee serial port.</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="see"><para><ref refid="group__xbee__serial_1ga33229d0d63ff1442f23b0739794d3afb" kindref="member">xbee_ser_flowcontrol()</ref>, <ref refid="group__xbee__serial_1gad1b1f9f42e58d8299ddcca1c9cb3c5e8" kindref="member">xbee_ser_set_rts()</ref> </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/dos/xbee_serial_dos.c" line="610" column="1" bodyfile="src/dos/xbee_serial_dos.c" bodystart="610" bodyend="619"/>
      </memberdef>
      </sectiondef>
    <briefdescription>
<para>Serial Interface for XBee Module (DOS Platform) </para>    </briefdescription>
    <detaileddescription>
<para>Warning: This module is incomplete. It only supports COM1. </para>    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="comment">/*</highlight></codeline>
<codeline lineno="2"><highlight class="comment"><sp/>*<sp/>Copyright<sp/>(c)<sp/>2010-2012<sp/>Digi<sp/>International<sp/>Inc.,</highlight></codeline>
<codeline lineno="3"><highlight class="comment"><sp/>*<sp/>All<sp/>rights<sp/>not<sp/>expressly<sp/>granted<sp/>are<sp/>reserved.</highlight></codeline>
<codeline lineno="4"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="5"><highlight class="comment"><sp/>*<sp/>This<sp/>Source<sp/>Code<sp/>Form<sp/>is<sp/>subject<sp/>to<sp/>the<sp/>terms<sp/>of<sp/>the<sp/>Mozilla<sp/>Public</highlight></codeline>
<codeline lineno="6"><highlight class="comment"><sp/>*<sp/>License,<sp/>v.<sp/>2.0.<sp/>If<sp/>a<sp/>copy<sp/>of<sp/>the<sp/>MPL<sp/>was<sp/>not<sp/>distributed<sp/>with<sp/>this<sp/>file,</highlight></codeline>
<codeline lineno="7"><highlight class="comment"><sp/>*<sp/>You<sp/>can<sp/>obtain<sp/>one<sp/>at<sp/>http://mozilla.org/MPL/2.0/.</highlight></codeline>
<codeline lineno="8"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="9"><highlight class="comment"><sp/>*<sp/>Digi<sp/>International<sp/>Inc.<sp/>11001<sp/>Bren<sp/>Road<sp/>East,<sp/>Minnetonka,<sp/>MN<sp/>55343</highlight></codeline>
<codeline lineno="10"><highlight class="comment"><sp/>*<sp/>=======================================================================</highlight></codeline>
<codeline lineno="11"><highlight class="comment"><sp/>*/</highlight></codeline>
<codeline lineno="20"><highlight class="comment">//<sp/>NOTE:<sp/>Documentation<sp/>for<sp/>these<sp/>functions<sp/>can<sp/>be<sp/>found<sp/>in<sp/>xbee/serial.h.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="21"><highlight class="normal"></highlight></codeline>
<codeline lineno="22"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Great<sp/>reference<sp/>on<sp/>interfacing<sp/>with<sp/>Serial<sp/>UART<sp/>hardware:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="23"><highlight class="normal"></highlight><highlight class="comment">//<sp/>http://www.lammertbies.nl/comm/info/serial-uart.html</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="24"><highlight class="normal"></highlight></codeline>
<codeline lineno="25"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;errno.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="26"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;limits.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="27"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;stdio.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="28"><highlight class="normal"></highlight></codeline>
<codeline lineno="29"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="serial_8h" kindref="compound">xbee/serial.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="30"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="cbuf_8h" kindref="compound">xbee/cbuf.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="31"><highlight class="normal"></highlight></codeline>
<codeline lineno="32"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Registers</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="33"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>UART_RBR<sp/><sp/><sp/><sp/><sp/>0<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//&lt;<sp/>Receive<sp/>Buffer<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>DLAB<sp/>=<sp/>0,<sp/>read</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="34"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>UART_THR<sp/><sp/><sp/><sp/><sp/>0<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//&lt;<sp/>Transmitter<sp/>Holding<sp/><sp/><sp/><sp/><sp/><sp/><sp/>DLAB<sp/>=<sp/>0,<sp/>write</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="35"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>UART_DLL<sp/><sp/><sp/><sp/><sp/>0<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//&lt;<sp/>Divisor<sp/>Latch<sp/>LSB<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>DLAB<sp/>=<sp/>1</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="36"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>UART_IER<sp/><sp/><sp/><sp/><sp/>1<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//&lt;<sp/>Interrupt<sp/>Enable<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>DLAB<sp/>=<sp/>0</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="37"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>UART_DLM<sp/><sp/><sp/><sp/><sp/>1<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//&lt;<sp/>Divisor<sp/>Latch<sp/>MSB<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>DLAB<sp/>=<sp/>1</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="38"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>UART_IIR<sp/><sp/><sp/><sp/><sp/>2<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//&lt;<sp/>Interrupt<sp/>Identification<sp/><sp/>read</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="39"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>UART_FCR<sp/><sp/><sp/><sp/><sp/>2<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//&lt;<sp/>FIFO<sp/>Control<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>write</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="40"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>UART_LCR<sp/><sp/><sp/><sp/><sp/>3<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//&lt;<sp/>Line<sp/>Control</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="41"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>UART_MCR<sp/><sp/><sp/><sp/><sp/>4<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//&lt;<sp/>Modem<sp/>Control</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="42"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>UART_LSR<sp/><sp/><sp/><sp/><sp/>5<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//&lt;<sp/>Line<sp/>Status<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>read</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="43"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>UART_MSR<sp/><sp/><sp/><sp/><sp/>6<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//&lt;<sp/>Modem<sp/>Status<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>read</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="44"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>UART_SCR<sp/><sp/><sp/><sp/><sp/>7<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//&lt;<sp/>Scratch</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="45"><highlight class="normal"></highlight></codeline>
<codeline lineno="46"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Bitmasks<sp/>for<sp/>Interrupt<sp/>Enable<sp/>Register</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="47"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>IER_NONE<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>0</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="48"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>IER_RX_DATA<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(1&lt;&lt;0)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="49"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>IER_TX_EMPTY<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(1&lt;&lt;1)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="50"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>IER_LSR_CHANGE<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(1&lt;&lt;2)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="51"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>IER_MSR_CHANGE<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(1&lt;&lt;3)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="52"><highlight class="normal"></highlight></codeline>
<codeline lineno="53"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>IER_DEFAULT<sp/><sp/>(IER_RX_DATA<sp/>|<sp/>IER_TX_EMPTY<sp/>|<sp/>IER_LSR_CHANGE)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="54"><highlight class="normal"></highlight></codeline>
<codeline lineno="55"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Bitmasks<sp/>for<sp/>FIFO<sp/>Control<sp/>Register<sp/>(present<sp/>in<sp/>16550<sp/>and<sp/>later)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="56"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>FCR_DISABLE_FIFOS<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(0&lt;&lt;0)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="57"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>FCR_ENABLE_FIFOS<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(1&lt;&lt;0)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="58"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>FCR_CLEAR_RX_FIFO<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(1&lt;&lt;1)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="59"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>FCR_CLEAR_TX_FIFO<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(1&lt;&lt;2)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="60"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>FCR_DMA_MODE_0<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(0&lt;&lt;3)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="61"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>FCR_DMA_MODE_1<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(1&lt;&lt;3)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="62"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>FCR_ENABLE_64BYTE<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(1&lt;&lt;5)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="63"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>FCR_INT_TRIGGER_1BYTE<sp/><sp/><sp/><sp/>(0&lt;&lt;6)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="64"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>FCR_INT_TRIGGER_4BYTE<sp/><sp/><sp/><sp/>(1&lt;&lt;6)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="65"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>FCR_INT_TRIGGER_8BYTE<sp/><sp/><sp/><sp/>(2&lt;&lt;6)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="66"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>FCR_INT_TRIGGER_14BYTE<sp/><sp/><sp/>(3&lt;&lt;6)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="67"><highlight class="normal"></highlight></codeline>
<codeline lineno="68"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>FCR_DEFAULT<sp/><sp/>(FCR_ENABLE_FIFOS<sp/>|<sp/>FCR_DMA_MODE_0)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="69"><highlight class="normal"></highlight></codeline>
<codeline lineno="70"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Bitmasks<sp/>for<sp/>Line<sp/>Control<sp/>Register</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="71"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>LCR_5BIT<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(0&lt;&lt;0)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="72"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>LCR_6BIT<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(1&lt;&lt;0)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="73"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>LCR_7BIT<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(2&lt;&lt;0)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="74"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>LCR_8BIT<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(3&lt;&lt;0)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="75"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>LCR_1STOP<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(0&lt;&lt;2)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="76"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>LCR_2STOP<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(1&lt;&lt;2)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="77"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>LCR_PARITY_NONE<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(0&lt;&lt;3)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="78"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>LCR_PARITY_ODD<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(1&lt;&lt;3)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="79"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>LCR_PARITY_EVEN<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(3&lt;&lt;3)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="80"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>LCR_PARITY_MARK<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(5&lt;&lt;3)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="81"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>LCR_PARITY_SPACE<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(7&lt;&lt;3)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="82"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>LCR_BREAK_ENABLE<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(1&lt;&lt;6)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="83"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>LCR_DIVISOR_LATCH<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(1&lt;&lt;7)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="84"><highlight class="normal"></highlight></codeline>
<codeline lineno="85"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>LCR_DEFAULT<sp/><sp/>(LCR_8BIT<sp/>|<sp/>LCR_1STOP<sp/>|<sp/>LCR_PARITY_NONE)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="86"><highlight class="normal"></highlight></codeline>
<codeline lineno="87"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Bitmasks<sp/>for<sp/>Modem<sp/>Control<sp/>Register</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="88"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>MCR_NONE<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>0</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="89"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>MCR_DTR<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(1&lt;&lt;0)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="90"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>MCR_RTS<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(1&lt;&lt;1)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="91"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>MCR_OUT1<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(1&lt;&lt;2)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="92"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>MCR_OUT2<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(1&lt;&lt;3)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="93"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>MCR_LOOPBACK<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(1&lt;&lt;4)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="94"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>MCR_AUTOFLOW<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(1&lt;&lt;5)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="95"><highlight class="normal"></highlight></codeline>
<codeline lineno="96"><highlight class="normal"></highlight><highlight class="comment">//<sp/>&quot;Output<sp/>2<sp/>is<sp/>sometimes<sp/>used<sp/>in<sp/>circuitry<sp/>which<sp/>controls<sp/>the<sp/>interrupt</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="97"><highlight class="normal"></highlight><highlight class="comment">//<sp/>process<sp/>on<sp/>a<sp/>PC.&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="98"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>MCR_DEFAULT<sp/><sp/>(MCR_DTR<sp/>|<sp/>MCR_RTS<sp/>|<sp/>MCR_OUT2)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="99"><highlight class="normal"></highlight></codeline>
<codeline lineno="100"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Bitmask<sp/>for<sp/>Modem<sp/>Status<sp/>Register</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="101"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>MSR_CTS_CHANGED<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(1&lt;&lt;0)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="102"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>MSR_DSR_CHANGED<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(1&lt;&lt;1)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="103"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>MSR_RI_EDGE<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(1&lt;&lt;2)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="104"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>MSR_CD_CHANGED<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(1&lt;&lt;3)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="105"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>MSR_CTS<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(1&lt;&lt;4)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="106"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>MSR_DSR<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(1&lt;&lt;5)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="107"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>MSR_RI<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(1&lt;&lt;6)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="108"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>MSR_CD<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(1&lt;&lt;7)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="109"><highlight class="normal"></highlight></codeline>
<codeline lineno="110"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Could<sp/>change<sp/>XBEE_SER_CHECK<sp/>to<sp/>an<sp/>assert,<sp/>or<sp/>even<sp/>ignore<sp/>it<sp/>if<sp/>not<sp/>in<sp/>debug.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="111"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined<sp/>XBEE_SERIAL_DEBUG</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="112"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/>#define<sp/>XBEE_SER_CHECK(ptr)<sp/><sp/><sp/>\</highlight></codeline>
<codeline lineno="113"><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/>do<sp/>{<sp/>if<sp/>(xbee_ser_invalid(ptr))<sp/>return<sp/>-EINVAL;<sp/>}<sp/>while<sp/>(0)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="114"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="115"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/>#define<sp/>XBEE_SER_CHECK(ptr)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="116"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="117"><highlight class="normal"></highlight></codeline>
<codeline lineno="118"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Since<sp/>we<sp/>only<sp/>support<sp/>one<sp/>COM<sp/>port,<sp/>it<sp/>is<sp/>expedient<sp/>to<sp/>simply<sp/>save<sp/>the</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="119"><highlight class="normal"></highlight><highlight class="comment">//<sp/>pointer<sp/>passed<sp/>to<sp/>xbee_ser_open<sp/>here.<sp/><sp/>The<sp/>ISR<sp/>needs<sp/>the<sp/>info<sp/>herein.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="120"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="structxbee__serial__t" kindref="compound">xbee_serial_t</ref><sp/>*<sp/>xbee_ser_com1<sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="121"><highlight class="normal"></highlight></codeline>
<codeline lineno="122"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Similarly,<sp/>have<sp/>some<sp/>static<sp/>circular<sp/>buffers</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="123"><highlight class="normal"></highlight><highlight class="comment">//<sp/>CBUF_SIZE<sp/>must<sp/>be<sp/>power<sp/>of<sp/>2<sp/>minus<sp/>1,<sp/>&lt;=<sp/>255<sp/>for<sp/>circular<sp/>buffer<sp/>size</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="124"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>CBUF_SIZE<sp/>255</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="125"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="126"><highlight class="normal">{</highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><ref refid="structxbee__cbuf__t" kindref="compound">xbee_cbuf_t</ref><sp/><sp/><sp/><sp/>cb;</highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/><sp/><ref refid="group__hal__dos_1gae1affc9ca37cfb624959c866a73f83c2" kindref="member">uint8_t</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>buf[CBUF_SIZE];<sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>1<sp/>byte<sp/>is<sp/>already<sp/>at<sp/>end<sp/>of<sp/>the<sp/>cb<sp/>struct</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="129"><highlight class="normal">}<sp/>txbuf,<sp/>rxbuf;</highlight></codeline>
<codeline lineno="130"><highlight class="normal"></highlight></codeline>
<codeline lineno="131"><highlight class="normal"></highlight></codeline>
<codeline lineno="132"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>__interrupt<sp/>__far<sp/>xbee_ser_isr()</highlight></codeline>
<codeline lineno="133"><highlight class="normal">{</highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/><sp/>uint_fast8_t<sp/>mask,<sp/>byte;</highlight></codeline>
<codeline lineno="135"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>txbyte;</highlight></codeline>
<codeline lineno="136"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>DEBUG_ISR</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>in_isr<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="138"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="139"><highlight class="normal"></highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!xbee_ser_com1)<sp/>{</highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="143"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>DEBUG_ISR</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/><sp/>++xbee_ser_com1-&gt;isr_count;</highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(in_isr)<sp/>{</highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>++xbee_ser_com1-&gt;isr_rent;</highlight></codeline>
<codeline lineno="147"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/><sp/>++in_isr;</highlight></codeline>
<codeline lineno="149"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">do</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>mask<sp/>=<sp/>inp(xbee_ser_com1-&gt;port<sp/>+<sp/>UART_LSR)<sp/>&amp;<sp/>xbee_ser_com1-&gt;lsr_mask;</highlight></codeline>
<codeline lineno="153"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(mask<sp/>&amp;<sp/>XST_MASK_DR)</highlight></codeline>
<codeline lineno="154"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Data<sp/>ready.<sp/><sp/>Read<sp/>it<sp/>and<sp/>add<sp/>to<sp/>cbuf</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>byte<sp/>=<sp/>inp(xbee_ser_com1-&gt;port<sp/>+<sp/>UART_RBR);</highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__hal__hcs08_1gac4c834cc0ad3ee43af562f658833a6d5" kindref="member">xbee_cbuf_putch</ref>(xbee_ser_com1-&gt;rxbuf,<sp/>byte);</highlight></codeline>
<codeline lineno="158"><highlight class="normal"></highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="160"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(mask<sp/>&amp;<sp/>XST_MASK_THRE)</highlight></codeline>
<codeline lineno="161"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="162"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Transmitter<sp/>holding<sp/>register<sp/>empty</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="163"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>txbyte<sp/>=<sp/><ref refid="group__util__cbuf_1gaf78d1608008ebde71b57a6bf34e6a3e1" kindref="member">xbee_cbuf_getch</ref>(xbee_ser_com1-&gt;txbuf);</highlight></codeline>
<codeline lineno="164"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(txbyte<sp/>&gt;=<sp/>0)</highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="166"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>outp(xbee_ser_com1-&gt;port<sp/>+<sp/>UART_THR,<sp/>txbyte);</highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="168"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="169"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Tx<sp/>now<sp/>idle<sp/>(nothing<sp/>in<sp/>circ<sp/>buffer).</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="171"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Turn<sp/>off<sp/>tx<sp/>interrupt,<sp/>app<sp/>has<sp/>to<sp/>restart.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="172"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>xbee_ser_com1-&gt;lsr_mask<sp/>&amp;=<sp/>~XST_MASK_THRE;</highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>outp(xbee_ser_com1-&gt;port<sp/>+<sp/>UART_IER,<sp/>IER_DEFAULT<sp/>&amp;<sp/>~IER_TX_EMPTY);</highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="175"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="176"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(mask<sp/>&amp;<sp/>(XST_MASK_OE<sp/>|<sp/>XST_MASK_PE<sp/>|<sp/>XST_MASK_FE<sp/>|<sp/>XST_MASK_BI))</highlight></codeline>
<codeline lineno="177"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="178"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Line<sp/>status<sp/>errors.<sp/><sp/>Already<sp/>reset<sp/>because<sp/>LSR<sp/>read<sp/>above</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="179"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(mask<sp/>&amp;<sp/>XST_MASK_OE)</highlight></codeline>
<codeline lineno="180"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="181"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>++xbee_ser_com1-&gt;oe;</highlight></codeline>
<codeline lineno="182"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="183"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(mask<sp/>&amp;<sp/>XST_MASK_PE)</highlight></codeline>
<codeline lineno="184"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="185"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>++xbee_ser_com1-&gt;pe;</highlight></codeline>
<codeline lineno="186"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="187"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(mask<sp/>&amp;<sp/>XST_MASK_FE)</highlight></codeline>
<codeline lineno="188"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="189"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>++xbee_ser_com1-&gt;fe;</highlight></codeline>
<codeline lineno="190"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="191"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(mask<sp/>&amp;<sp/>XST_MASK_BI)</highlight></codeline>
<codeline lineno="192"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="193"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>++xbee_ser_com1-&gt;bi;</highlight></codeline>
<codeline lineno="194"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="195"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="196"><highlight class="normal"><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(mask);</highlight></codeline>
<codeline lineno="197"><highlight class="normal"></highlight></codeline>
<codeline lineno="198"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Non-specific<sp/>End<sp/>Of<sp/>Interrrupt<sp/>to<sp/>PIC<sp/>1.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="199"><highlight class="normal"><sp/><sp/><sp/>outp(0x20,<sp/>0x20);</highlight></codeline>
<codeline lineno="200"><highlight class="normal"></highlight></codeline>
<codeline lineno="201"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>DEBUG_ISR</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="202"><highlight class="normal"><sp/><sp/><sp/>--in_isr;</highlight></codeline>
<codeline lineno="203"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="204"><highlight class="normal">}</highlight></codeline>
<codeline lineno="205"><highlight class="normal"></highlight></codeline>
<codeline lineno="206"><highlight class="normal"></highlight></codeline>
<codeline lineno="207" refid="group__xbee__serial_1gae7f838b59f553507bf81a86042fe9cd7" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group__hal__dos_1ga3c79f6b72b6cfc3cc5c4524450f661b9" kindref="member">xbee_ser_invalid</ref>(<sp/><ref refid="structxbee__serial__t" kindref="compound">xbee_serial_t</ref><sp/>*serial)</highlight></codeline>
<codeline lineno="208"><highlight class="normal">{</highlight></codeline>
<codeline lineno="209"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(serial)</highlight></codeline>
<codeline lineno="210"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="211"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>!(serial-&gt;flags<sp/>&amp;<sp/>XST_INIT_OK);</highlight></codeline>
<codeline lineno="212"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="213"><highlight class="normal"></highlight></codeline>
<codeline lineno="214"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>1;</highlight></codeline>
<codeline lineno="215"><highlight class="normal">}</highlight></codeline>
<codeline lineno="216"><highlight class="normal"></highlight></codeline>
<codeline lineno="217"><highlight class="normal"></highlight></codeline>
<codeline lineno="218" refid="group__xbee__serial_1ga898057d1b7645785e7f3d6256828d039" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*<ref refid="group__hal__dos_1ga898057d1b7645785e7f3d6256828d039" kindref="member">xbee_ser_portname</ref>(<sp/><ref refid="structxbee__serial__t" kindref="compound">xbee_serial_t</ref><sp/>*serial)</highlight></codeline>
<codeline lineno="219"><highlight class="normal">{</highlight></codeline>
<codeline lineno="220"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>DOS<sp/>serial<sp/>driver<sp/>only<sp/>works<sp/>on<sp/>COM1;<sp/>see<sp/>xbee_serial_win32.c<sp/>for</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="221"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>method<sp/>of<sp/>using<sp/>a<sp/>static<sp/>buffer<sp/>and<sp/>snprintf()<sp/>to<sp/>create<sp/>the<sp/>&quot;COMx&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="222"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>string<sp/>for<sp/>any<sp/>given<sp/>port.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="223"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(serial<sp/>!=<sp/>NULL<sp/>&amp;&amp;<sp/>serial-&gt;comport<sp/>==<sp/>1)</highlight></codeline>
<codeline lineno="224"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="225"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&quot;COM1&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="226"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="227"><highlight class="normal"></highlight></codeline>
<codeline lineno="228"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&quot;(invalid)&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="229"><highlight class="normal">}</highlight></codeline>
<codeline lineno="230"><highlight class="normal"></highlight></codeline>
<codeline lineno="231"><highlight class="normal"></highlight></codeline>
<codeline lineno="232" refid="group__xbee__serial_1ga2ca4e60c9d642084afa52dff9e1f6be4" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group__hal__dos_1ga2ca4e60c9d642084afa52dff9e1f6be4" kindref="member">xbee_ser_write</ref>(<sp/><ref refid="structxbee__serial__t" kindref="compound">xbee_serial_t</ref><sp/>*serial,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/>*buffer,</highlight></codeline>
<codeline lineno="233"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group__zdo_1gab2b3adeb2a67e656ff030b56727fd0ac" kindref="member">length</ref>)</highlight></codeline>
<codeline lineno="234"><highlight class="normal">{</highlight></codeline>
<codeline lineno="235"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>wrote;</highlight></codeline>
<codeline lineno="236"><highlight class="normal"></highlight></codeline>
<codeline lineno="237"><highlight class="normal"><sp/><sp/><sp/>XBEE_SER_CHECK(<sp/>serial);</highlight></codeline>
<codeline lineno="238"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<sp/>buffer<sp/>||<sp/>length<sp/>&lt;<sp/>0)</highlight></codeline>
<codeline lineno="239"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="240"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-<ref refid="group__hal_1ga2d1678d5a7cc8ce499643f3b8957def4" kindref="member">EINVAL</ref>;</highlight></codeline>
<codeline lineno="241"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="242"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!length)</highlight></codeline>
<codeline lineno="243"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="244"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="245"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="246"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>0<sp/><sp/><sp/><sp/>//<sp/>Blocking<sp/>Tx</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="247"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(wrote<sp/>=<sp/>0;<sp/>wrote<sp/>&lt;<sp/><ref refid="group__zdo_1gab2b3adeb2a67e656ff030b56727fd0ac" kindref="member">length</ref>;<sp/>++wrote)<sp/>{</highlight></codeline>
<codeline lineno="248"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(!(inp(serial-&gt;port<sp/>+<sp/>UART_LSR)<sp/>&amp;<sp/>XST_MASK_THRE));</highlight></codeline>
<codeline lineno="249"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>outp(serial-&gt;port<sp/>+<sp/>UART_THR,<sp/>((</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/>*)buffer)[wrote]);</highlight></codeline>
<codeline lineno="250"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="251"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="252"><highlight class="normal"><sp/><sp/><sp/>wrote<sp/>=<sp/><ref refid="group__util__cbuf_1ga9a2eeedf642bdf31dba98aacdc5a7d75" kindref="member">xbee_cbuf_free</ref>(serial-&gt;txbuf);</highlight></codeline>
<codeline lineno="253"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(wrote<sp/>&gt;<sp/>length)</highlight></codeline>
<codeline lineno="254"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="255"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>wrote<sp/>=<sp/><ref refid="group__zdo_1gab2b3adeb2a67e656ff030b56727fd0ac" kindref="member">length</ref>;</highlight></codeline>
<codeline lineno="256"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="257"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!wrote)</highlight></codeline>
<codeline lineno="258"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="259"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="260"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="261"><highlight class="normal"><sp/><sp/><sp/><ref refid="group__util__cbuf_1gad3d314f23c6c7c6fc31c9b65ce61eee1" kindref="member">xbee_cbuf_put</ref>(serial-&gt;txbuf,<sp/>buffer,<sp/>wrote);</highlight></codeline>
<codeline lineno="262"><highlight class="normal"><sp/><sp/><sp/><ref refid="group__hal_1ga658c3ad175b50000ac44b3b9ea836d1a" kindref="member">INTERRUPT_DISABLE</ref>;</highlight></codeline>
<codeline lineno="263"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!(serial-&gt;lsr_mask<sp/>&amp;<sp/>XST_MASK_THRE))</highlight></codeline>
<codeline lineno="264"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="265"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Transmitter<sp/>not<sp/>enabled.<sp/><sp/>Give<sp/>it<sp/>a<sp/>kick</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="266"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>serial-&gt;lsr_mask<sp/>|=<sp/>XST_MASK_THRE;</highlight></codeline>
<codeline lineno="267"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>1st<sp/>char<sp/>and<sp/>write<sp/>it<sp/>directly<sp/>to<sp/>UART</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="268"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>outp(serial-&gt;port<sp/>+<sp/>UART_THR,<sp/><ref refid="group__util__cbuf_1gaf78d1608008ebde71b57a6bf34e6a3e1" kindref="member">xbee_cbuf_getch</ref>(serial-&gt;txbuf));</highlight></codeline>
<codeline lineno="269"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>outp(serial-&gt;port<sp/>+<sp/>UART_IER,<sp/>IER_DEFAULT);<sp/><sp/></highlight><highlight class="comment">//<sp/>LSR,<sp/>Rx<sp/>and<sp/>Tx<sp/>interrupts</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="270"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="271"><highlight class="normal"><sp/><sp/><sp/><ref refid="group__hal_1gacf43057fc38f77d20456c074909ba772" kindref="member">INTERRUPT_ENABLE</ref>;</highlight></codeline>
<codeline lineno="272"><highlight class="normal"></highlight></codeline>
<codeline lineno="273"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="274"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/>#ifdef<sp/>XBEE_SERIAL_VERBOSE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="275"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>printf(<sp/></highlight><highlight class="stringliteral">&quot;%s:<sp/>wrote<sp/>%d<sp/>of<sp/>%d<sp/>bytes<sp/>\n&quot;</highlight><highlight class="normal">,<sp/>__FUNCTION__,</highlight></codeline>
<codeline lineno="276"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>wrote,<sp/>length);</highlight></codeline>
<codeline lineno="277"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__util_1gaa321236a0cb6f4e0dad592fdf1b550d2" kindref="member">hex_dump</ref>(<sp/>buffer,<sp/>length,<sp/><ref refid="group__hal_1ga696f6553e33cbd20eda34e220ec9939a" kindref="member">HEX_DUMP_FLAG_TAB</ref>);</highlight></codeline>
<codeline lineno="278"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/>#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="279"><highlight class="normal"></highlight></codeline>
<codeline lineno="280"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>wrote;</highlight></codeline>
<codeline lineno="281"><highlight class="normal">}</highlight></codeline>
<codeline lineno="282"><highlight class="normal"></highlight></codeline>
<codeline lineno="283" refid="group__xbee__serial_1ga8263312373c03a79a718142e051b3342" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group__hal__dos_1ga8263312373c03a79a718142e051b3342" kindref="member">xbee_ser_read</ref>(<sp/><ref refid="structxbee__serial__t" kindref="compound">xbee_serial_t</ref><sp/>*serial,<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__hal_1gaef060b3456fdcc093a7210a762d5f2ed" kindref="member">FAR</ref><sp/>*buffer,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>bufsize)</highlight></codeline>
<codeline lineno="284"><highlight class="normal">{</highlight></codeline>
<codeline lineno="285"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>read;</highlight></codeline>
<codeline lineno="286"><highlight class="normal"></highlight></codeline>
<codeline lineno="287"><highlight class="normal"><sp/><sp/><sp/>XBEE_SER_CHECK(<sp/>serial);</highlight></codeline>
<codeline lineno="288"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<sp/>buffer)</highlight></codeline>
<codeline lineno="289"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="290"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-<ref refid="group__hal_1ga2d1678d5a7cc8ce499643f3b8957def4" kindref="member">EINVAL</ref>;</highlight></codeline>
<codeline lineno="291"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="292"><highlight class="normal"></highlight></codeline>
<codeline lineno="293"><highlight class="normal"><sp/><sp/><sp/>read<sp/>=<sp/><ref refid="group__util__cbuf_1gaf3ac1a430fe9dbe3498e96c3b96bb0f7" kindref="member">xbee_cbuf_used</ref>(serial-&gt;rxbuf);</highlight></codeline>
<codeline lineno="294"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(read<sp/>&gt;<sp/>bufsize)</highlight></codeline>
<codeline lineno="295"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="296"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>read<sp/>=<sp/>bufsize;</highlight></codeline>
<codeline lineno="297"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="298"><highlight class="normal"></highlight></codeline>
<codeline lineno="299"><highlight class="normal"><sp/><sp/><sp/><ref refid="group__util__cbuf_1ga98b2d80239319b2a9875772c28a7630a" kindref="member">xbee_cbuf_get</ref>(serial-&gt;rxbuf,<sp/>buffer,<sp/>read);</highlight></codeline>
<codeline lineno="300"><highlight class="normal"></highlight></codeline>
<codeline lineno="301"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/>#ifdef<sp/>XBEE_SERIAL_VERBOSE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="302"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(read)</highlight></codeline>
<codeline lineno="303"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="304"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(<sp/></highlight><highlight class="stringliteral">&quot;%s:<sp/>read<sp/>%d<sp/>bytes\n&quot;</highlight><highlight class="normal">,<sp/>__FUNCTION__,<sp/>read);</highlight></codeline>
<codeline lineno="305"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__util_1gaa321236a0cb6f4e0dad592fdf1b550d2" kindref="member">hex_dump</ref>(<sp/>buffer,<sp/>read,<sp/><ref refid="group__hal_1ga696f6553e33cbd20eda34e220ec9939a" kindref="member">HEX_DUMP_FLAG_TAB</ref>);</highlight></codeline>
<codeline lineno="306"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="307"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/>#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="308"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>read;</highlight></codeline>
<codeline lineno="309"><highlight class="normal">}</highlight></codeline>
<codeline lineno="310"><highlight class="normal"></highlight></codeline>
<codeline lineno="311"><highlight class="normal"></highlight></codeline>
<codeline lineno="312" refid="group__xbee__serial_1ga86fea2345efb8bf9424228f0979b1849" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group__hal__dos_1ga86fea2345efb8bf9424228f0979b1849" kindref="member">xbee_ser_putchar</ref>(<sp/><ref refid="structxbee__serial__t" kindref="compound">xbee_serial_t</ref><sp/>*serial,<sp/><ref refid="group__hal__dos_1gae1affc9ca37cfb624959c866a73f83c2" kindref="member">uint8_t</ref><sp/>ch)</highlight></codeline>
<codeline lineno="313"><highlight class="normal">{</highlight></codeline>
<codeline lineno="314"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>retval;</highlight></codeline>
<codeline lineno="315"><highlight class="normal"></highlight></codeline>
<codeline lineno="316"><highlight class="normal"><sp/><sp/><sp/>retval<sp/>=<sp/><ref refid="group__hal__dos_1ga2ca4e60c9d642084afa52dff9e1f6be4" kindref="member">xbee_ser_write</ref>(<sp/>serial,<sp/>&amp;ch,<sp/>1);</highlight></codeline>
<codeline lineno="317"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(retval<sp/>==<sp/>1)</highlight></codeline>
<codeline lineno="318"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="319"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="320"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="321"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(retval<sp/>==<sp/>0)</highlight></codeline>
<codeline lineno="322"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="323"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-<ref refid="group__hal_1ga088abe8bad2df798edad3053d719b937" kindref="member">ENOSPC</ref>;</highlight></codeline>
<codeline lineno="324"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="325"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="326"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="327"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>retval;</highlight></codeline>
<codeline lineno="328"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="329"><highlight class="normal">}</highlight></codeline>
<codeline lineno="330"><highlight class="normal"></highlight></codeline>
<codeline lineno="331"><highlight class="normal"></highlight></codeline>
<codeline lineno="332" refid="group__xbee__serial_1gaeeb38154313a44f86146cdcfe08e7d08" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group__hal__dos_1gaeeb38154313a44f86146cdcfe08e7d08" kindref="member">xbee_ser_getchar</ref>(<sp/><ref refid="structxbee__serial__t" kindref="compound">xbee_serial_t</ref><sp/>*serial)</highlight></codeline>
<codeline lineno="333"><highlight class="normal">{</highlight></codeline>
<codeline lineno="334"><highlight class="normal"><sp/><sp/><sp/><ref refid="group__hal__dos_1gae1affc9ca37cfb624959c866a73f83c2" kindref="member">uint8_t</ref><sp/>ch<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="335"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>retval;</highlight></codeline>
<codeline lineno="336"><highlight class="normal"></highlight></codeline>
<codeline lineno="337"><highlight class="normal"><sp/><sp/><sp/>retval<sp/>=<sp/><ref refid="group__hal__dos_1ga8263312373c03a79a718142e051b3342" kindref="member">xbee_ser_read</ref>(<sp/>serial,<sp/>&amp;ch,<sp/>1);</highlight></codeline>
<codeline lineno="338"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(retval<sp/>!=<sp/>1)</highlight></codeline>
<codeline lineno="339"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="340"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>retval<sp/>?<sp/>retval<sp/>:<sp/>-<ref refid="group__hal_1ga0030614bc864d1b24eaedd71585acc27" kindref="member">ENODATA</ref>;</highlight></codeline>
<codeline lineno="341"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="342"><highlight class="normal"></highlight></codeline>
<codeline lineno="343"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ch;</highlight></codeline>
<codeline lineno="344"><highlight class="normal">}</highlight></codeline>
<codeline lineno="345"><highlight class="normal"></highlight></codeline>
<codeline lineno="346"><highlight class="normal"></highlight></codeline>
<codeline lineno="347" refid="group__xbee__serial_1ga3ad8f378b572d6fec982f1086bd3b94f" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group__hal__dos_1ga3ad8f378b572d6fec982f1086bd3b94f" kindref="member">xbee_ser_tx_free</ref>(<sp/><ref refid="structxbee__serial__t" kindref="compound">xbee_serial_t</ref><sp/>*serial)</highlight></codeline>
<codeline lineno="348"><highlight class="normal">{</highlight></codeline>
<codeline lineno="349"><highlight class="normal"><sp/><sp/><sp/>XBEE_SER_CHECK(<sp/>serial);</highlight></codeline>
<codeline lineno="350"><highlight class="normal"></highlight></codeline>
<codeline lineno="351"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__util__cbuf_1ga9a2eeedf642bdf31dba98aacdc5a7d75" kindref="member">xbee_cbuf_free</ref>(serial-&gt;txbuf);</highlight></codeline>
<codeline lineno="352"><highlight class="normal">}</highlight></codeline>
<codeline lineno="353"><highlight class="normal"></highlight></codeline>
<codeline lineno="354"><highlight class="normal"></highlight></codeline>
<codeline lineno="355" refid="group__xbee__serial_1gaabf70934d186354cde4ac14ed27d1bd2" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group__hal__dos_1gaabf70934d186354cde4ac14ed27d1bd2" kindref="member">xbee_ser_tx_used</ref>(<sp/><ref refid="structxbee__serial__t" kindref="compound">xbee_serial_t</ref><sp/>*serial)</highlight></codeline>
<codeline lineno="356"><highlight class="normal">{</highlight></codeline>
<codeline lineno="357"><highlight class="normal"><sp/><sp/><sp/>XBEE_SER_CHECK(<sp/>serial);</highlight></codeline>
<codeline lineno="358"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__util__cbuf_1gaf3ac1a430fe9dbe3498e96c3b96bb0f7" kindref="member">xbee_cbuf_used</ref>(serial-&gt;txbuf);</highlight></codeline>
<codeline lineno="359"><highlight class="normal">}</highlight></codeline>
<codeline lineno="360"><highlight class="normal"></highlight></codeline>
<codeline lineno="361"><highlight class="normal"></highlight></codeline>
<codeline lineno="362" refid="group__xbee__serial_1ga05308d37301d27715f1e1308b7189220" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group__hal__dos_1ga05308d37301d27715f1e1308b7189220" kindref="member">xbee_ser_tx_flush</ref>(<sp/><ref refid="structxbee__serial__t" kindref="compound">xbee_serial_t</ref><sp/>*serial)</highlight></codeline>
<codeline lineno="363"><highlight class="normal">{</highlight></codeline>
<codeline lineno="364"><highlight class="normal"><sp/><sp/><sp/>XBEE_SER_CHECK(<sp/>serial);</highlight></codeline>
<codeline lineno="365"><highlight class="normal"></highlight></codeline>
<codeline lineno="366"><highlight class="normal"><sp/><sp/><sp/><ref refid="group__hal_1ga658c3ad175b50000ac44b3b9ea836d1a" kindref="member">INTERRUPT_DISABLE</ref>;</highlight></codeline>
<codeline lineno="367"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Reset<sp/>Tx<sp/>FIFO</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="368"><highlight class="normal"><sp/><sp/><sp/>outp(serial-&gt;port<sp/>+<sp/>UART_FCR,<sp/>FCR_DEFAULT<sp/>|<sp/>FCR_CLEAR_TX_FIFO);</highlight></codeline>
<codeline lineno="369"><highlight class="normal"></highlight></codeline>
<codeline lineno="370"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Turn<sp/>off<sp/>tx<sp/>interrupt,<sp/>app<sp/>has<sp/>to<sp/>restart.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="371"><highlight class="normal"><sp/><sp/><sp/>serial-&gt;lsr_mask<sp/>&amp;=<sp/>~XST_MASK_THRE;</highlight></codeline>
<codeline lineno="372"><highlight class="normal"><sp/><sp/><sp/>outp(serial-&gt;port<sp/>+<sp/>UART_IER,<sp/>IER_DEFAULT<sp/>&amp;<sp/>~IER_TX_EMPTY);</highlight></codeline>
<codeline lineno="373"><highlight class="normal"><sp/><sp/><sp/><ref refid="group__hal_1gacf43057fc38f77d20456c074909ba772" kindref="member">INTERRUPT_ENABLE</ref>;</highlight></codeline>
<codeline lineno="374"><highlight class="normal"><sp/><sp/><sp/><ref refid="group__util__cbuf_1gaf0cf797a0e4ee8c9e518e0d8b9554b10" kindref="member">xbee_cbuf_flush</ref>(serial-&gt;txbuf);</highlight></codeline>
<codeline lineno="375"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="376"><highlight class="normal">}</highlight></codeline>
<codeline lineno="377"><highlight class="normal"></highlight></codeline>
<codeline lineno="378"><highlight class="normal"></highlight></codeline>
<codeline lineno="379" refid="group__xbee__serial_1ga16fb431a1e66861439518e562431821f" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group__hal__dos_1ga16fb431a1e66861439518e562431821f" kindref="member">xbee_ser_rx_free</ref>(<sp/><ref refid="structxbee__serial__t" kindref="compound">xbee_serial_t</ref><sp/>*serial)</highlight></codeline>
<codeline lineno="380"><highlight class="normal">{</highlight></codeline>
<codeline lineno="381"><highlight class="normal"><sp/><sp/><sp/>XBEE_SER_CHECK(<sp/>serial);</highlight></codeline>
<codeline lineno="382"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__util__cbuf_1ga9a2eeedf642bdf31dba98aacdc5a7d75" kindref="member">xbee_cbuf_free</ref>(serial-&gt;rxbuf);</highlight></codeline>
<codeline lineno="383"><highlight class="normal">}</highlight></codeline>
<codeline lineno="384"><highlight class="normal"></highlight></codeline>
<codeline lineno="385"><highlight class="normal"></highlight></codeline>
<codeline lineno="386" refid="group__xbee__serial_1ga43b8322771cc16b4130fa5330ad2242b" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group__hal__dos_1ga43b8322771cc16b4130fa5330ad2242b" kindref="member">xbee_ser_rx_used</ref>(<sp/><ref refid="structxbee__serial__t" kindref="compound">xbee_serial_t</ref><sp/>*serial)</highlight></codeline>
<codeline lineno="387"><highlight class="normal">{</highlight></codeline>
<codeline lineno="388"><highlight class="normal"><sp/><sp/><sp/>XBEE_SER_CHECK(<sp/>serial);</highlight></codeline>
<codeline lineno="389"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__util__cbuf_1gaf3ac1a430fe9dbe3498e96c3b96bb0f7" kindref="member">xbee_cbuf_used</ref>(serial-&gt;rxbuf);</highlight></codeline>
<codeline lineno="390"><highlight class="normal">}</highlight></codeline>
<codeline lineno="391"><highlight class="normal"></highlight></codeline>
<codeline lineno="392"><highlight class="normal"></highlight></codeline>
<codeline lineno="393" refid="group__xbee__serial_1ga98a6d5ceb5e1445e8ef82ccaa65a8c15" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group__hal__dos_1ga98a6d5ceb5e1445e8ef82ccaa65a8c15" kindref="member">xbee_ser_rx_flush</ref>(<sp/><ref refid="structxbee__serial__t" kindref="compound">xbee_serial_t</ref><sp/>*serial)</highlight></codeline>
<codeline lineno="394"><highlight class="normal">{</highlight></codeline>
<codeline lineno="395"><highlight class="normal"><sp/><sp/><sp/>XBEE_SER_CHECK(<sp/>serial);</highlight></codeline>
<codeline lineno="396"><highlight class="normal"></highlight></codeline>
<codeline lineno="397"><highlight class="normal"><sp/><sp/><sp/><ref refid="group__hal_1ga658c3ad175b50000ac44b3b9ea836d1a" kindref="member">INTERRUPT_DISABLE</ref>;</highlight></codeline>
<codeline lineno="398"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Reset<sp/>Rx<sp/>FIFO</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="399"><highlight class="normal"><sp/><sp/><sp/>outp(serial-&gt;port<sp/>+<sp/>UART_FCR,<sp/>FCR_DEFAULT<sp/>|<sp/>FCR_CLEAR_RX_FIFO);</highlight></codeline>
<codeline lineno="400"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Read<sp/>pending<sp/>char<sp/>and<sp/>LSR<sp/>to<sp/>clear<sp/>interrupts</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="401"><highlight class="normal"><sp/><sp/><sp/>inp(serial-&gt;port<sp/>+<sp/>UART_RBR);</highlight></codeline>
<codeline lineno="402"><highlight class="normal"><sp/><sp/><sp/>inp(serial-&gt;port<sp/>+<sp/>UART_LSR);</highlight></codeline>
<codeline lineno="403"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Clear<sp/>Rx<sp/>buffer</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="404"><highlight class="normal"><sp/><sp/><sp/><ref refid="group__util__cbuf_1gaf0cf797a0e4ee8c9e518e0d8b9554b10" kindref="member">xbee_cbuf_flush</ref>(serial-&gt;rxbuf);</highlight></codeline>
<codeline lineno="405"><highlight class="normal"><sp/><sp/><sp/><ref refid="group__hal_1gacf43057fc38f77d20456c074909ba772" kindref="member">INTERRUPT_ENABLE</ref>;</highlight></codeline>
<codeline lineno="406"><highlight class="normal"></highlight></codeline>
<codeline lineno="407"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="408"><highlight class="normal">}</highlight></codeline>
<codeline lineno="409"><highlight class="normal"></highlight></codeline>
<codeline lineno="410"><highlight class="normal"></highlight></codeline>
<codeline lineno="411" refid="group__xbee__serial_1gab3c12543a07e0669b672c5cab54b0926" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group__hal__dos_1gab3c12543a07e0669b672c5cab54b0926" kindref="member">xbee_ser_baudrate</ref>(<sp/><ref refid="structxbee__serial__t" kindref="compound">xbee_serial_t</ref><sp/>*serial,<sp/><ref refid="group__hal__dos_1ga09a1e304d66d35dd47daffee9731edaa" kindref="member">uint32_t</ref><sp/>baudrate)</highlight></codeline>
<codeline lineno="412"><highlight class="normal">{</highlight></codeline>
<codeline lineno="413"><highlight class="normal"><sp/><sp/><sp/><ref refid="group__hal__dos_1ga5a8b2dc9e45a9ee81a94ef304fb62505" kindref="member">uint16_t</ref><sp/>div;</highlight></codeline>
<codeline lineno="414"><highlight class="normal"></highlight></codeline>
<codeline lineno="415"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(serial<sp/>==<sp/>NULL)</highlight></codeline>
<codeline lineno="416"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="417"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/>#ifdef<sp/>XBEE_SERIAL_VERBOSE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="418"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(<sp/></highlight><highlight class="stringliteral">&quot;%s:<sp/>-EINVAL<sp/>(serial=%p,<sp/>baud=%&quot;</highlight><highlight class="normal"><sp/><ref refid="group__hal_1gaaf2af4a10f0bd308e9c349c8382382be" kindref="member">PRIu32</ref><sp/></highlight><highlight class="stringliteral">&quot;)<sp/>-<sp/>bad<sp/>param\n&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="419"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>__FUNCTION__,<sp/>serial,<sp/>baudrate);</highlight></codeline>
<codeline lineno="420"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/>#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="421"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-<ref refid="group__hal_1ga2d1678d5a7cc8ce499643f3b8957def4" kindref="member">EINVAL</ref>;</highlight></codeline>
<codeline lineno="422"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="423"><highlight class="normal"></highlight></codeline>
<codeline lineno="424"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(baudrate<sp/>&gt;<sp/>115200<sp/>||<sp/>baudrate<sp/>&lt;<sp/>1)</highlight></codeline>
<codeline lineno="425"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="426"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>baudrate<sp/>=<sp/>115200;</highlight></codeline>
<codeline lineno="427"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="428"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(baudrate<sp/>&lt;<sp/>115)</highlight></codeline>
<codeline lineno="429"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="430"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Direct<sp/>divisor<sp/>specification<sp/>if<sp/>1..114</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="431"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>div<sp/>=<sp/>(<ref refid="group__hal__dos_1ga5a8b2dc9e45a9ee81a94ef304fb62505" kindref="member">uint16_t</ref>)baudrate;</highlight></codeline>
<codeline lineno="432"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="433"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="434"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="435"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Direct<sp/>BPS<sp/>rate<sp/>specification</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="436"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>div<sp/>=<sp/>(<ref refid="group__hal__dos_1ga5a8b2dc9e45a9ee81a94ef304fb62505" kindref="member">uint16_t</ref>)(115200<sp/>/<sp/>baudrate);</highlight></codeline>
<codeline lineno="437"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="438"><highlight class="normal"><sp/><sp/><sp/>serial-&gt;baudrate<sp/>=<sp/>115200<sp/>/<sp/>div;</highlight></codeline>
<codeline lineno="439"><highlight class="normal"></highlight></codeline>
<codeline lineno="440"><highlight class="normal"><sp/><sp/><sp/>outp(serial-&gt;port<sp/>+<sp/>UART_LCR,<sp/>LCR_DEFAULT<sp/>|<sp/>LCR_DIVISOR_LATCH);</highlight></codeline>
<codeline lineno="441"><highlight class="normal"><sp/><sp/><sp/>outp(serial-&gt;port<sp/>+<sp/>UART_DLL,<sp/>div<sp/>&amp;<sp/>0xFF);</highlight></codeline>
<codeline lineno="442"><highlight class="normal"><sp/><sp/><sp/>outp(serial-&gt;port<sp/>+<sp/>UART_DLM,<sp/>div<sp/>&gt;&gt;<sp/>8);</highlight></codeline>
<codeline lineno="443"><highlight class="normal"><sp/><sp/><sp/>outp(serial-&gt;port<sp/>+<sp/>UART_LCR,<sp/>LCR_DEFAULT);</highlight></codeline>
<codeline lineno="444"><highlight class="normal"></highlight></codeline>
<codeline lineno="445"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="446"><highlight class="normal">}</highlight></codeline>
<codeline lineno="447"><highlight class="normal"></highlight></codeline>
<codeline lineno="448"><highlight class="normal"></highlight></codeline>
<codeline lineno="449" refid="group__xbee__serial_1gaa615a221dd69c17ee2989c281f2bf04a" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group__hal__dos_1gaa615a221dd69c17ee2989c281f2bf04a" kindref="member">xbee_ser_open</ref>(<sp/><ref refid="structxbee__serial__t" kindref="compound">xbee_serial_t</ref><sp/>*serial,<sp/><ref refid="group__hal__dos_1ga09a1e304d66d35dd47daffee9731edaa" kindref="member">uint32_t</ref><sp/>baudrate)</highlight></codeline>
<codeline lineno="450"><highlight class="normal">{</highlight></codeline>
<codeline lineno="451"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(serial<sp/>==<sp/>NULL)</highlight></codeline>
<codeline lineno="452"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="453"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/>#ifdef<sp/>XBEE_SERIAL_VERBOSE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="454"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(<sp/></highlight><highlight class="stringliteral">&quot;%s:<sp/>-EINVAL<sp/>(serial=%p,<sp/>baud=%&quot;</highlight><highlight class="normal"><sp/><ref refid="group__hal_1gaaf2af4a10f0bd308e9c349c8382382be" kindref="member">PRIu32</ref><sp/></highlight><highlight class="stringliteral">&quot;)<sp/>-<sp/>bad<sp/>param\n&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="455"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>__FUNCTION__,<sp/>serial,<sp/>baudrate);</highlight></codeline>
<codeline lineno="456"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/><sp/><sp/>#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="457"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-<ref refid="group__hal_1ga2d1678d5a7cc8ce499643f3b8957def4" kindref="member">EINVAL</ref>;</highlight></codeline>
<codeline lineno="458"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="459"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(xbee_ser_com1)</highlight></codeline>
<codeline lineno="460"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="461"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Only<sp/>support<sp/>one<sp/>open<sp/>at<sp/>a<sp/>time.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="462"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__hal__dos_1ga48b9d743a446074ea6abacd0de24044d" kindref="member">xbee_ser_close</ref>(xbee_ser_com1);</highlight></codeline>
<codeline lineno="463"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="464"><highlight class="normal"></highlight></codeline>
<codeline lineno="465"><highlight class="normal"></highlight></codeline>
<codeline lineno="466"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Important<sp/>to<sp/>save<sp/>pointer<sp/>for<sp/>ISR</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="467"><highlight class="normal"><sp/><sp/><sp/>xbee_ser_com1<sp/>=<sp/>serial;</highlight></codeline>
<codeline lineno="468"><highlight class="normal"></highlight></codeline>
<codeline lineno="469"><highlight class="normal"><sp/><sp/><sp/>serial-&gt;flags<sp/>=<sp/>XST_INIT_OK;</highlight></codeline>
<codeline lineno="470"><highlight class="normal"><sp/><sp/><sp/>serial-&gt;isr_count<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="471"><highlight class="normal"><sp/><sp/><sp/>serial-&gt;isr_rent<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="472"><highlight class="normal"><sp/><sp/><sp/>serial-&gt;oe<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="473"><highlight class="normal"><sp/><sp/><sp/>serial-&gt;pe<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="474"><highlight class="normal"><sp/><sp/><sp/>serial-&gt;fe<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="475"><highlight class="normal"><sp/><sp/><sp/>serial-&gt;bi<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="476"><highlight class="normal"></highlight></codeline>
<codeline lineno="477"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>COM<sp/><sp/>port<sp/><sp/><sp/>vec<sp/><sp/><sp/>IRQ*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="478"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>----<sp/>-----<sp/><sp/>----<sp/><sp/>---*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="479"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>COM1<sp/>0x3F8<sp/><sp/>0x0C<sp/><sp/>4<sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="480"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>COM2<sp/>0x2F8<sp/><sp/>0x0B<sp/><sp/>3<sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="481"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>COM3<sp/>0x3E8<sp/><sp/>0x0C<sp/><sp/>4<sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="482"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>COM4<sp/>0x2E8<sp/><sp/>0x0B<sp/><sp/>3<sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="483"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(serial-&gt;comport)</highlight></codeline>
<codeline lineno="484"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="485"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="486"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>serial-&gt;comport<sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="487"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>serial-&gt;port<sp/>=<sp/>0x3F8;</highlight></codeline>
<codeline lineno="488"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>serial-&gt;intvec<sp/>=<sp/>0x0C;</highlight></codeline>
<codeline lineno="489"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>serial-&gt;picmask<sp/>=<sp/>1&lt;&lt;4;</highlight></codeline>
<codeline lineno="490"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="491"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>2:</highlight></codeline>
<codeline lineno="492"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>serial-&gt;port<sp/>=<sp/>0x2F8;</highlight></codeline>
<codeline lineno="493"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>serial-&gt;intvec<sp/>=<sp/>0x0B;</highlight></codeline>
<codeline lineno="494"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>serial-&gt;picmask<sp/>=<sp/>1&lt;&lt;3;</highlight></codeline>
<codeline lineno="495"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="496"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>3:</highlight></codeline>
<codeline lineno="497"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>serial-&gt;port<sp/>=<sp/>0x3E8;</highlight></codeline>
<codeline lineno="498"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>serial-&gt;intvec<sp/>=<sp/>0x0C;</highlight></codeline>
<codeline lineno="499"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>serial-&gt;picmask<sp/>=<sp/>1&lt;&lt;4;</highlight></codeline>
<codeline lineno="500"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="501"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>4:</highlight></codeline>
<codeline lineno="502"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>serial-&gt;port<sp/>=<sp/>0x2E8;</highlight></codeline>
<codeline lineno="503"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>serial-&gt;intvec<sp/>=<sp/>0x0B;</highlight></codeline>
<codeline lineno="504"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>serial-&gt;picmask<sp/>=<sp/>1&lt;&lt;3;</highlight></codeline>
<codeline lineno="505"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="506"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="507"><highlight class="normal"></highlight></codeline>
<codeline lineno="508"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Point<sp/>to<sp/>buffers<sp/>(static<sp/>for<sp/>now,<sp/>since<sp/>only<sp/>COM1)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="509"><highlight class="normal"><sp/><sp/><sp/>serial-&gt;txbuf<sp/>=<sp/>&amp;txbuf.cb;</highlight></codeline>
<codeline lineno="510"><highlight class="normal"><sp/><sp/><sp/>serial-&gt;rxbuf<sp/>=<sp/>&amp;rxbuf.cb;</highlight></codeline>
<codeline lineno="511"><highlight class="normal"><sp/><sp/><sp/><ref refid="group__util__cbuf_1gabf58cafa9f3e989b433a14c23a94cebb" kindref="member">xbee_cbuf_init</ref>(&amp;txbuf.cb,<sp/>CBUF_SIZE);</highlight></codeline>
<codeline lineno="512"><highlight class="normal"><sp/><sp/><sp/><ref refid="group__util__cbuf_1gabf58cafa9f3e989b433a14c23a94cebb" kindref="member">xbee_cbuf_init</ref>(&amp;rxbuf.cb,<sp/>CBUF_SIZE);</highlight></codeline>
<codeline lineno="513"><highlight class="normal"></highlight></codeline>
<codeline lineno="514"><highlight class="normal"></highlight></codeline>
<codeline lineno="515"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Halt<sp/>interrupts,<sp/>save<sp/>old<sp/>vector,<sp/>set<sp/>new<sp/>vector</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="516"><highlight class="normal"><sp/><sp/><sp/>outp(serial-&gt;port<sp/>+<sp/>UART_IER,<sp/>IER_NONE);</highlight></codeline>
<codeline lineno="517"><highlight class="normal"><sp/><sp/><sp/>serial-&gt;prev_int<sp/>=<sp/>_dos_getvect(serial-&gt;intvec);</highlight></codeline>
<codeline lineno="518"><highlight class="normal"><sp/><sp/><sp/>_dos_setvect(serial-&gt;intvec,<sp/>xbee_ser_isr);</highlight></codeline>
<codeline lineno="519"><highlight class="normal"></highlight></codeline>
<codeline lineno="520"><highlight class="normal"><sp/><sp/><sp/><ref refid="group__hal__dos_1gab3c12543a07e0669b672c5cab54b0926" kindref="member">xbee_ser_baudrate</ref>(<sp/>serial,<sp/>baudrate);</highlight></codeline>
<codeline lineno="521"><highlight class="normal"></highlight></codeline>
<codeline lineno="522"><highlight class="normal"><sp/><sp/><sp/>outp(serial-&gt;port<sp/>+<sp/>UART_LCR,<sp/>LCR_DEFAULT);</highlight></codeline>
<codeline lineno="523"><highlight class="normal"><sp/><sp/><sp/>outp(serial-&gt;port<sp/>+<sp/>UART_FCR,</highlight></codeline>
<codeline lineno="524"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>FCR_DEFAULT<sp/>|<sp/>FCR_CLEAR_RX_FIFO<sp/>|<sp/>FCR_CLEAR_TX_FIFO);</highlight></codeline>
<codeline lineno="525"><highlight class="normal"></highlight></codeline>
<codeline lineno="526"><highlight class="normal"><sp/><sp/><sp/>outp(serial-&gt;port<sp/>+<sp/>UART_MCR,<sp/>MCR_DEFAULT);</highlight></codeline>
<codeline lineno="527"><highlight class="normal"></highlight></codeline>
<codeline lineno="528"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Enable<sp/>interrupts<sp/>for<sp/>rx<sp/>and<sp/>line<sp/>status<sp/>only<sp/>at<sp/>this<sp/>point<sp/>(nothing<sp/>to<sp/>tx)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="529"><highlight class="normal"><sp/><sp/><sp/>serial-&gt;lsr_mask<sp/>=<sp/>XST_MASK_DR<sp/>|<sp/>XST_MASK_OE<sp/>|<sp/>XST_MASK_PE<sp/>|<sp/>XST_MASK_FE<sp/>|<sp/>XST_MASK_BI;</highlight></codeline>
<codeline lineno="530"><highlight class="normal"><sp/><sp/><sp/>outp(serial-&gt;port<sp/>+<sp/>UART_IER,<sp/>IER_DEFAULT<sp/>&amp;<sp/>~IER_TX_EMPTY);</highlight></codeline>
<codeline lineno="531"><highlight class="normal"></highlight></codeline>
<codeline lineno="532"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Clear<sp/>pending<sp/>garbage<sp/>chars<sp/>and<sp/>status</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="533"><highlight class="normal"><sp/><sp/><sp/>inp(serial-&gt;port<sp/>+<sp/>UART_RBR);</highlight></codeline>
<codeline lineno="534"><highlight class="normal"><sp/><sp/><sp/>inp(serial-&gt;port<sp/>+<sp/>UART_LSR);</highlight></codeline>
<codeline lineno="535"><highlight class="normal"><sp/><sp/><sp/>inp(serial-&gt;port<sp/>+<sp/>UART_MSR);</highlight></codeline>
<codeline lineno="536"><highlight class="normal"></highlight></codeline>
<codeline lineno="537"><highlight class="normal"><sp/><sp/><sp/>outp(0x21,(inp(0x21)<sp/>&amp;<sp/>~serial-&gt;picmask));<sp/><sp/></highlight><highlight class="comment">//<sp/>Enable<sp/>IRQ</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="538"><highlight class="normal"></highlight></codeline>
<codeline lineno="539"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/>#ifdef<sp/>XBEE_SERIAL_VERBOSE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="540"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>printf(<sp/></highlight><highlight class="stringliteral">&quot;%s:<sp/>COM1<sp/>port<sp/>opened<sp/>(baud=%lu,<sp/>8N1)\n&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="541"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>__FUNCTION__,<sp/>baudrate);</highlight></codeline>
<codeline lineno="542"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/>#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="543"><highlight class="normal"></highlight></codeline>
<codeline lineno="544"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="545"><highlight class="normal">}</highlight></codeline>
<codeline lineno="546"><highlight class="normal"></highlight></codeline>
<codeline lineno="547"><highlight class="normal"></highlight></codeline>
<codeline lineno="548" refid="group__xbee__serial_1ga48b9d743a446074ea6abacd0de24044d" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group__hal__dos_1ga48b9d743a446074ea6abacd0de24044d" kindref="member">xbee_ser_close</ref>(<sp/><ref refid="structxbee__serial__t" kindref="compound">xbee_serial_t</ref><sp/>*serial)</highlight></codeline>
<codeline lineno="549"><highlight class="normal">{</highlight></codeline>
<codeline lineno="550"><highlight class="normal"><sp/><sp/><sp/>XBEE_SER_CHECK(<sp/>serial);</highlight></codeline>
<codeline lineno="551"><highlight class="normal"><sp/><sp/><sp/>outp(serial-&gt;port<sp/>+<sp/>UART_MCR,<sp/>MCR_OUT2);<sp/><sp/></highlight><highlight class="comment">//<sp/>Turn<sp/>off<sp/>DTR,<sp/>RTS</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="552"><highlight class="normal"><sp/><sp/><sp/>outp(0x21,(inp(0x21)<sp/>|<sp/>serial-&gt;picmask));<sp/><sp/></highlight><highlight class="comment">//<sp/>Disable<sp/>IRQ</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="553"><highlight class="normal"><sp/><sp/><sp/>outp(serial-&gt;port<sp/>+<sp/>UART_IER,<sp/>IER_NONE);</highlight></codeline>
<codeline lineno="554"><highlight class="normal"><sp/><sp/><sp/>_dos_setvect(serial-&gt;intvec,<sp/>serial-&gt;prev_int);</highlight></codeline>
<codeline lineno="555"><highlight class="normal"></highlight></codeline>
<codeline lineno="556"><highlight class="normal"><sp/><sp/><sp/>xbee_ser_com1<sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="557"><highlight class="normal"><sp/><sp/><sp/>serial-&gt;flags<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="558"><highlight class="normal"></highlight></codeline>
<codeline lineno="559"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="560"><highlight class="normal">}</highlight></codeline>
<codeline lineno="561"><highlight class="normal"></highlight></codeline>
<codeline lineno="562"><highlight class="normal"></highlight></codeline>
<codeline lineno="563" refid="group__xbee__serial_1gae19aa61eec588d1b935d267b0a982319" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group__hal__dos_1ga6ae89792415a7ac8b45b56188eb9eeb4" kindref="member">xbee_ser_break</ref>(<sp/><ref refid="structxbee__serial__t" kindref="compound">xbee_serial_t</ref><sp/>*serial,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>enabled)</highlight></codeline>
<codeline lineno="564"><highlight class="normal">{</highlight></codeline>
<codeline lineno="565"><highlight class="normal"><sp/><sp/><sp/>XBEE_SER_CHECK(<sp/>serial);</highlight></codeline>
<codeline lineno="566"><highlight class="normal"></highlight></codeline>
<codeline lineno="567"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>FIXME:<sp/>this<sp/>is<sp/>not<sp/>a<sp/>really<sp/>clean<sp/>way<sp/>of<sp/>doing<sp/>it,<sp/>since<sp/>the</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="568"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>UART<sp/>may<sp/>still<sp/>be<sp/>part<sp/>way<sp/>through<sp/>the<sp/>last<sp/>char.<sp/><sp/>But<sp/>it<sp/>doesn&apos;t</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="569"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>hurt<sp/>in<sp/>this<sp/>application<sp/>I<sp/>think...</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="570"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(enabled)</highlight></codeline>
<codeline lineno="571"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="572"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>outp(serial-&gt;port<sp/>+<sp/>UART_LCR,<sp/>LCR_DEFAULT<sp/>|<sp/>LCR_BREAK_ENABLE);</highlight></codeline>
<codeline lineno="573"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="574"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="575"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="576"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>outp(serial-&gt;port<sp/>+<sp/>UART_LCR,<sp/>LCR_DEFAULT<sp/>&amp;<sp/>~LCR_BREAK_ENABLE);</highlight></codeline>
<codeline lineno="577"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="578"><highlight class="normal"></highlight></codeline>
<codeline lineno="579"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="580"><highlight class="normal">}</highlight></codeline>
<codeline lineno="581"><highlight class="normal"></highlight></codeline>
<codeline lineno="582"><highlight class="normal"></highlight></codeline>
<codeline lineno="583" refid="group__xbee__serial_1ga33229d0d63ff1442f23b0739794d3afb" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group__hal__dos_1ga1f5f72ffdfbfb45ac523640db32296ff" kindref="member">xbee_ser_flowcontrol</ref>(<sp/><ref refid="structxbee__serial__t" kindref="compound">xbee_serial_t</ref><sp/>*serial,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>enabled)</highlight></codeline>
<codeline lineno="584"><highlight class="normal">{</highlight></codeline>
<codeline lineno="585"><highlight class="normal"><sp/><sp/><sp/>XBEE_SER_CHECK(<sp/>serial);</highlight></codeline>
<codeline lineno="586"><highlight class="normal"></highlight></codeline>
<codeline lineno="587"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>FIXME:<sp/>interpret<sp/>this<sp/>to<sp/>mean<sp/>turn<sp/>on<sp/>RTS,<sp/>DTR</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="588"><highlight class="normal"><sp/><sp/><sp/>outp(serial-&gt;port<sp/>+<sp/>UART_MCR,<sp/>MCR_DEFAULT);<sp/><sp/></highlight><highlight class="comment">/*<sp/>Turn<sp/>on<sp/>DTR,<sp/>RTS<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="589"><highlight class="normal"></highlight></codeline>
<codeline lineno="590"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="591"><highlight class="normal">}</highlight></codeline>
<codeline lineno="592"><highlight class="normal"></highlight></codeline>
<codeline lineno="593"><highlight class="normal"></highlight></codeline>
<codeline lineno="594" refid="group__xbee__serial_1gad1b1f9f42e58d8299ddcca1c9cb3c5e8" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group__hal__dos_1ga731188d8cf41d3d749bc84d51b672535" kindref="member">xbee_ser_set_rts</ref>(<sp/><ref refid="structxbee__serial__t" kindref="compound">xbee_serial_t</ref><sp/>*serial,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>asserted)</highlight></codeline>
<codeline lineno="595"><highlight class="normal">{</highlight></codeline>
<codeline lineno="596"><highlight class="normal"><sp/><sp/><sp/>XBEE_SER_CHECK(<sp/>serial);</highlight></codeline>
<codeline lineno="597"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(asserted)</highlight></codeline>
<codeline lineno="598"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="599"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>outp(serial-&gt;port<sp/>+<sp/>UART_MCR,<sp/>MCR_DEFAULT<sp/>|<sp/>MCR_RTS);</highlight></codeline>
<codeline lineno="600"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="601"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="602"><highlight class="normal"><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="603"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>outp(serial-&gt;port<sp/>+<sp/>UART_MCR,<sp/>MCR_DEFAULT<sp/>&amp;<sp/>~MCR_RTS);</highlight></codeline>
<codeline lineno="604"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="605"><highlight class="normal"></highlight></codeline>
<codeline lineno="606"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="607"><highlight class="normal">}</highlight></codeline>
<codeline lineno="608"><highlight class="normal"></highlight></codeline>
<codeline lineno="609"><highlight class="normal"></highlight></codeline>
<codeline lineno="610" refid="group__xbee__serial_1ga894f6fadc890b5ba5ce32338f0acd217" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group__hal__dos_1ga894f6fadc890b5ba5ce32338f0acd217" kindref="member">xbee_ser_get_cts</ref>(<sp/><ref refid="structxbee__serial__t" kindref="compound">xbee_serial_t</ref><sp/>*serial)</highlight></codeline>
<codeline lineno="611"><highlight class="normal">{</highlight></codeline>
<codeline lineno="612"><highlight class="normal"><sp/><sp/><sp/>XBEE_SER_CHECK(<sp/>serial);</highlight></codeline>
<codeline lineno="613"><highlight class="normal"></highlight></codeline>
<codeline lineno="614"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>XBEE_SER_DISABLE_CTS</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="615"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>1;<sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>&lt;--<sp/>hack<sp/>to<sp/>ignore<sp/>CTS<sp/>for<sp/>miswired<sp/>modems</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="616"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="617"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>inp(serial-&gt;port<sp/>+<sp/>UART_MSR)<sp/>&amp;<sp/>MSR_CTS<sp/>?<sp/>1<sp/>:<sp/>0;</highlight></codeline>
<codeline lineno="618"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="619"><highlight class="normal">}</highlight></codeline>
<codeline lineno="620"><highlight class="normal"></highlight></codeline>
    </programlisting>
    <location file="src/dos/xbee_serial_dos.c"/>
  </compounddef>
</doxygen>
